<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Progressive Web Apps with Angular</title>
  <meta name="description" content="Progressive Web Applications have been the talk of the town in the past few months. In short, they use modern web capabilities to provide a user experie...">

  <!-- Schema.org markup for Google+ -->
  
  <meta itemprop="name" content="Progressive Web Apps with Angular">  
  <meta itemprop="description" content="Progressive Web Applications have been the talk of the town in the past few months. In short, they use modern web capabilities to provide a user experience similar to that of mobile apps. Still a relatively new concept, these applications work for every user in every browser but are enhanced in modern browsers...">  
  <meta itemprop="image" content="https://houssein.me/assets/progressive-angular-applications/angular-progressive-banner.png"> 

  <!-- Twitter Card data -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@hdjirdeh">
  <meta name="twitter:creator" content="@hdjirdeh"> 
  <meta name="twitter:title" content="Progressive Web Apps with Angular">  
  <meta name="twitter:url" content="https://houssein.me/progressive-angular-applications">  
  <meta name="twitter:description" content="Progressive Web Applications have been the talk of the town in the past few months. In short, they use modern web capabilities to provide a user experience similar to that of mobile apps. Still a r...">  
  <meta name="twitter:image" content="https://houssein.me/assets/progressive-angular-applications/angular-progressive-banner.png"> 

  <!-- Open Graph data -->
  
  <meta property="og:title" content="Progressive Web Apps with Angular"> 
  <meta property="og:type" content="article" /> 
  <meta property="og:url" content="https://houssein.me/progressive-angular-applications">  
  <meta property="og:image" content="https://houssein.me/assets/progressive-angular-applications/angular-progressive-banner.png">  
  <meta property="og:description" content="Progressive Web Applications have been the talk of the town in the past few months. In short, they use modern web capabilities to provide a user experience similar to that of mobile apps. Still a r...">  
  <meta property="article:published_time" content="2017-01-17 07:30:00 +0000" />
  <meta property="article:modified_time" content="2017-01-17 07:30:00 +0000" /> 
  <meta property="fb:admins" content="1518546144" />
  
  <!-- Icons -->
  <meta name="msapplication-TileColor" content="#b91d47">
	<meta name="msapplication-TileImage" content="/icons/mstile-150x150.png">
  <meta name="msapplication-config" content="/icons/browserconfig.xml">

	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="default">

  <link rel="manifest" href="/icons/site.webmanifest">
  <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#d0113f">

  <link rel="shortcut icon" type="image/x-icon" href="/icons/favicon.ico" />
  <link rel="shortcut icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="shortcut icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">

  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-touch-icon.png">
	<link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-touch-icon-120x120.png">
	<link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-touch-icon-152x152.png">
	<link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-touch-icon-180x180.png">

  <meta name="theme-color" content="#ffffff">

  <link rel="canonical" href="https://houssein.me/progressive-angular-applications">
  <link rel="author" href="https://plus.google.com/109730836902589271473" />
  <link rel="alternate" type="application/rss+xml" title="Houssein Djirdeh" href="https://houssein.me/feed.xml">  
  <style>
    /*! TACHYONS v4.9.1 | http://tachyons.io  (SELECTED STYLES) */
    .dim:active,.dim:focus,.dim:hover{-webkit-backface-visibility:hidden}.f-6,.f-headline{font-size:6rem}.f-5,.f-subheadline{font-size:5rem}.f1{font-size:3rem}.f2{font-size:2.25rem}.f3{font-size:1.5rem}.f4{font-size:1.25rem}.f5{font-size:1rem}.f6{font-size:.875rem}.f7{font-size:.75rem}.br0{border-radius:0}.br1{border-radius:.125rem}.br2{border-radius:.25rem}.br3{border-radius:.5rem}.br4{border-radius:1rem}@media screen and (min-width:30em){.f1-ns{font-size:3rem}.f2-ns{font-size:2.25rem}.f3-ns{font-size:1.5rem}.f4-ns{font-size:1.25rem}.f5-ns{font-size:1rem}.f6-ns{font-size:.875rem}.f7-ns{font-size:.75rem}.fw1-ns{font-weight:100}.fw2-ns{font-weight:200}.fw3-ns{font-weight:300}.fw4-ns{font-weight:400}.fw5-ns{font-weight:500}.fw6-ns{font-weight:600}.fw7-ns{font-weight:700}.fw8-ns{font-weight:800}.fw9-ns{font-weight:900}.pa0-ns{padding:0}.pa1-ns{padding:.25rem}.pa2-ns{padding:.5rem}.pa3-ns{padding:1rem}.pa4-ns{padding:2rem}.pa5-ns{padding:4rem}.pa6-ns{padding:8rem}.pa7-ns{padding:16rem}.pl0-ns{padding-left:0}.pl1-ns{padding-left:.25rem}.pl2-ns{padding-left:.5rem}.pl3-ns{padding-left:1rem}.pl4-ns{padding-left:2rem}.pl5-ns{padding-left:4rem}.pl6-ns{padding-left:8rem}.pl7-ns{padding-left:16rem}.pr0-ns{padding-right:0}.pr1-ns{padding-right:.25rem}.pr2-ns{padding-right:.5rem}.pr3-ns{padding-right:1rem}.pr4-ns{padding-right:2rem}.pr5-ns{padding-right:4rem}.pr6-ns{padding-right:8rem}.pr7-ns{padding-right:16rem}.pb0-ns{padding-bottom:0}.pb1-ns{padding-bottom:.25rem}.pb2-ns{padding-bottom:.5rem}.pb3-ns{padding-bottom:1rem}.pb4-ns{padding-bottom:2rem}.pb5-ns{padding-bottom:4rem}.pb6-ns{padding-bottom:8rem}.pb7-ns{padding-bottom:16rem}.pt0-ns{padding-top:0}.pt1-ns{padding-top:.25rem}.pt2-ns{padding-top:.5rem}.pt3-ns{padding-top:1rem}.pt4-ns{padding-top:2rem}.pt5-ns{padding-top:4rem}.pt6-ns{padding-top:8rem}.pt7-ns{padding-top:16rem}.pv0-ns{padding-top:0;padding-bottom:0}.pv1-ns{padding-top:.25rem;padding-bottom:.25rem}.pv2-ns{padding-top:.5rem;padding-bottom:.5rem}.pv3-ns{padding-top:1rem;padding-bottom:1rem}.pv4-ns{padding-top:2rem;padding-bottom:2rem}.pv5-ns{padding-top:4rem;padding-bottom:4rem}.pv6-ns{padding-top:8rem;padding-bottom:8rem}.pv7-ns{padding-top:16rem;padding-bottom:16rem}.ph0-ns{padding-left:0;padding-right:0}.ph1-ns{padding-left:.25rem;padding-right:.25rem}.ph2-ns{padding-left:.5rem;padding-right:.5rem}.ph3-ns{padding-left:1rem;padding-right:1rem}.ph4-ns{padding-left:2rem;padding-right:2rem}.ph5-ns{padding-left:4rem;padding-right:4rem}.ph6-ns{padding-left:8rem;padding-right:8rem}.ph7-ns{padding-left:16rem;padding-right:16rem}.ma0-ns{margin:0}.ma1-ns{margin:.25rem}.ma2-ns{margin:.5rem}.ma3-ns{margin:1rem}.ma4-ns{margin:2rem}.ma5-ns{margin:4rem}.ma6-ns{margin:8rem}.ma7-ns{margin:16rem}.ml0-ns{margin-left:0}.ml1-ns{margin-left:.25rem}.ml2-ns{margin-left:.5rem}.ml3-ns{margin-left:1rem}.ml4-ns{margin-left:2rem}.ml5-ns{margin-left:4rem}.ml6-ns{margin-left:8rem}.ml7-ns{margin-left:16rem}.mr0-ns{margin-right:0}.mr1-ns{margin-right:.25rem}.mr2-ns{margin-right:.5rem}.mr3-ns{margin-right:1rem}.mr4-ns{margin-right:2rem}.mr5-ns{margin-right:4rem}.mr6-ns{margin-right:8rem}.mr7-ns{margin-right:16rem}.mb0-ns{margin-bottom:0}.mb1-ns{margin-bottom:.25rem}.mb2-ns{margin-bottom:.5rem}.mb3-ns{margin-bottom:1rem}.mb4-ns{margin-bottom:2rem}.mb5-ns{margin-bottom:4rem}.mb6-ns{margin-bottom:8rem}.mb7-ns{margin-bottom:16rem}.mt0-ns{margin-top:0}.mt1-ns{margin-top:.25rem}.mt2-ns{margin-top:.5rem}.mt3-ns{margin-top:1rem}.mt4-ns{margin-top:2rem}.mt5-ns{margin-top:4rem}.mt6-ns{margin-top:8rem}.mt7-ns{margin-top:16rem}.mv0-ns{margin-top:0;margin-bottom:0}.mv1-ns{margin-top:.25rem;margin-bottom:.25rem}.mv2-ns{margin-top:.5rem;margin-bottom:.5rem}.mv3-ns{margin-top:1rem;margin-bottom:1rem}.mv4-ns{margin-top:2rem;margin-bottom:2rem}.mv5-ns{margin-top:4rem;margin-bottom:4rem}.mv6-ns{margin-top:8rem;margin-bottom:8rem}.mv7-ns{margin-top:16rem;margin-bottom:16rem}.mh0-ns{margin-left:0;margin-right:0}.mh1-ns{margin-left:.25rem;margin-right:.25rem}.mh2-ns{margin-left:.5rem;margin-right:.5rem}.mh3-ns{margin-left:1rem;margin-right:1rem}.mh4-ns{margin-left:2rem;margin-right:2rem}.mh5-ns{margin-left:4rem;margin-right:4rem}.mh6-ns{margin-left:8rem;margin-right:8rem}.mh7-ns{margin-left:16rem;margin-right:16rem}.mw1-ns{max-width:1rem}.mw2-ns{max-width:2rem}.mw3-ns{max-width:4rem}.mw4-ns{max-width:8rem}.mw5-ns{max-width:16rem}.mw6-ns{max-width:32rem}.mw7-ns{max-width:48rem}.mw8-ns{max-width:64rem}.mw9-ns{max-width:96rem}}.normal{font-weight:400}.b{font-weight:700}.fw1{font-weight:100}.fw2{font-weight:200}.fw3{font-weight:300}.fw4{font-weight:400}.fw5{font-weight:500}.fw6{font-weight:600}.fw7{font-weight:700}.fw8{font-weight:800}.fw9{font-weight:900}.near-black{color:#111}.white{color:#fff}.ttl{text-transform:lowercase}.flex{display:-webkit-box;display:-ms-flexbox;display:flex}.flex-column{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.items-start{-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start}.items-end{-webkit-box-align:end;-ms-flex-align:end;align-items:flex-end}.items-center{-webkit-box-align:center;-ms-flex-align:center;align-items:center}.justify-center{-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.justify-between{-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.pa0{padding:0}.pa1{padding:.25rem}.pa2{padding:.5rem}.pa3{padding:1rem}.pa4{padding:2rem}.pa5{padding:4rem}.pa6{padding:8rem}.pa7{padding:16rem}.pl0{padding-left:0}.pl1{padding-left:.25rem}.pl2{padding-left:.5rem}.pl3{padding-left:1rem}.pl4{padding-left:2rem}.pl5{padding-left:4rem}.pl6{padding-left:8rem}.pl7{padding-left:16rem}.pr0{padding-right:0}.pr1{padding-right:.25rem}.pr2{padding-right:.5rem}.pr3{padding-right:1rem}.pr4{padding-right:2rem}.pr5{padding-right:4rem}.pr6{padding-right:8rem}.pr7{padding-right:16rem}.pb0{padding-bottom:0}.pb1{padding-bottom:.25rem}.pb2{padding-bottom:.5rem}.pb3{padding-bottom:1rem}.pb4{padding-bottom:2rem}.pb5{padding-bottom:4rem}.pb6{padding-bottom:8rem}.pb7{padding-bottom:16rem}.pt0{padding-top:0}.pt1{padding-top:.25rem}.pt2{padding-top:.5rem}.pt3{padding-top:1rem}.pt4{padding-top:2rem}.pt5{padding-top:4rem}.pt6{padding-top:8rem}.pt7{padding-top:16rem}.pv0{padding-top:0;padding-bottom:0}.pv1{padding-top:.25rem;padding-bottom:.25rem}.pv2{padding-top:.5rem;padding-bottom:.5rem}.pv3{padding-top:1rem;padding-bottom:1rem}.pv4{padding-top:2rem;padding-bottom:2rem}.pv5{padding-top:4rem;padding-bottom:4rem}.pv6{padding-top:8rem;padding-bottom:8rem}.pv7{padding-top:16rem;padding-bottom:16rem}.ph0{padding-left:0;padding-right:0}.ph1{padding-left:.25rem;padding-right:.25rem}.ph2{padding-left:.5rem;padding-right:.5rem}.ph3{padding-left:1rem;padding-right:1rem}.ph4{padding-left:2rem;padding-right:2rem}.ph5{padding-left:4rem;padding-right:4rem}.ph6{padding-left:8rem;padding-right:8rem}.ph7{padding-left:16rem;padding-right:16rem}.ma0{margin:0}.ma1{margin:.25rem}.ma2{margin:.5rem}.ma3{margin:1rem}.ma4{margin:2rem}.ma5{margin:4rem}.ma6{margin:8rem}.ma7{margin:16rem}.ml0{margin-left:0}.ml1{margin-left:.25rem}.ml2{margin-left:.5rem}.ml3{margin-left:1rem}.ml4{margin-left:2rem}.ml5{margin-left:4rem}.ml6{margin-left:8rem}.ml7{margin-left:16rem}.mr0{margin-right:0}.mr1{margin-right:.25rem}.mr2{margin-right:.5rem}.mr3{margin-right:1rem}.mr4{margin-right:2rem}.mr5{margin-right:4rem}.mr6{margin-right:8rem}.mr7{margin-right:16rem}.mb0{margin-bottom:0}.mb1{margin-bottom:.25rem}.mb2{margin-bottom:.5rem}.mb3{margin-bottom:1rem}.mb4{margin-bottom:2rem}.mb5{margin-bottom:4rem}.mb6{margin-bottom:8rem}.mb7{margin-bottom:16rem}.mt0{margin-top:0}.mt1{margin-top:.25rem}.mt2{margin-top:.5rem}.mt3{margin-top:1rem}.mt4{margin-top:2rem}.mt5{margin-top:4rem}.mt6{margin-top:8rem}.mt7{margin-top:16rem}.mv0{margin-top:0;margin-bottom:0}.mv1{margin-top:.25rem;margin-bottom:.25rem}.mv2{margin-top:.5rem;margin-bottom:.5rem}.mv3{margin-top:1rem;margin-bottom:1rem}.mv4{margin-top:2rem;margin-bottom:2rem}.mv5{margin-top:4rem;margin-bottom:4rem}.mv6{margin-top:8rem;margin-bottom:8rem}.mv7{margin-top:16rem;margin-bottom:16rem}.mh0{margin-left:0;margin-right:0}.mh1{margin-left:.25rem;margin-right:.25rem}.mh2{margin-left:.5rem;margin-right:.5rem}.mh3{margin-left:1rem;margin-right:1rem}.mh4{margin-left:2rem;margin-right:2rem}.mh5{margin-left:4rem;margin-right:4rem}.mh6{margin-left:8rem;margin-right:8rem}.mh7{margin-left:16rem;margin-right:16rem}.mw1{max-width:1rem}.mw2{max-width:2rem}.mw3{max-width:4rem}.mw4{max-width:8rem}.mw5{max-width:16rem}.mw6{max-width:32rem}.mw7{max-width:48rem}.mw8{max-width:64rem}.mw9{max-width:96rem}.w-100{width:100%}.dim{opacity:1;-webkit-transition:opacity .15s ease-in;transition:opacity .15s ease-in}.dim:focus,.dim:hover{backface-visibility:hidden;opacity:.5;-webkit-transition:opacity .15s ease-in;transition:opacity .15s ease-in}.dim:active{backface-visibility:hidden;opacity:.8;-webkit-transition:opacity .15s ease-out;transition:opacity .15s ease-out}.grow{-moz-osx-font-smoothing:grayscale;-webkit-backface-visibility:hidden;backface-visibility:hidden;-webkit-transform:translateZ(0);transform:translateZ(0);-webkit-transition:-webkit-transform .25s ease-out;transition:-webkit-transform .25s ease-out;transition:transform .25s ease-out;transition:transform .25s ease-out,-webkit-transform .25s ease-out}.grow:focus,.grow:hover{-webkit-transform:scale(1.05);transform:scale(1.05)}.grow:active{-webkit-transform:scale(.9);transform:scale(.9)}.dib{display:inline-block}.h1{height:1rem}.h2{height:2rem}.h3{height:4rem}.h4{height:8rem}.h5{height:16rem}.bb{border-bottom-style:solid;border-bottom-width:1px}.bt{border-top-style:solid;border-top-width:1px}.link{text-decoration:none;-webkit-transition:color .15s ease-in;transition:color .15s ease-in}.link:active,.link:hover,.link:link,.link:visited{-webkit-transition:color .15s ease-in;transition:color .15s ease-in}.link:focus{-webkit-transition:color .15s ease-in;transition:color .15s ease-in;outline:currentColor dotted 1px}.center{margin-right:auto;margin-left:auto}img,video{max-width:100%}    
    /* Extra styles */
    #markup video,body,html{width:100%}#markup aside a,#markup li a,#markup p a,.link-effect{text-decoration:none;transition:color .15s ease-in;border-bottom:1px solid #d0113f}#markup aside p,#markup figure,body,html{margin:0}body,html{padding:0;background:#fff;font-family:avenir next,avenir,helvetica neue,helvetica,ubuntu,roboto,noto,segoe ui,arial,sans-serif;font-weight:400;color:#444;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}#markup aside ol,#markup aside p,#markup aside ul{font-weight:500}*{box-sizing:border-box}.hover-red:hover,.red{color:#d0113f}.bg-red{background-color:#d0113f}#home-icon-container{transition:all .15s ease-in-out}#home-icon-container:hover #home-icon{fill:#d0113f}.lh-copy{line-height:1.7}#markup h2,#markup h3,#markup h4{margin-top:3rem;margin-bottom:1rem}#markup aside{margin:30px 0;background:#f1ece9;padding:25px;border-radius:10px}#markup aside.secondary{background:#e3f3f9}#markup aside a,#markup li a,#markup p a{font-weight:600;color:#d0113f;-webkit-box-shadow:inset 0 -2px 0 0 #d0113f;box-shadow:inset 0 -2px 0 0 #d0113f;padding-bottom:2px}#markup aside a:hover,#markup blockquote footer,#markup li a:hover,#markup p a:hover{color:#111}#markup aside h1,#markup aside h2,#markup aside h3,#markup aside h4{margin-top:0}#markup aside img{margin-top:2rem}#markup blockquote{color:#767676;border-left:4px solid #e9e9e9;padding-left:15px;letter-spacing:-1px;font-style:italic;margin:0}#markup li code,#markup p code{background:#f8f8f8;padding:5px}#markup figure code,#markup figure li code{background:#f8f8f8;font-size:.95rem;padding:1rem}@media (max-width:30rem){#markup figure code,#markup figure li code{font-size:.8rem}}#markup img{left:50%;position:relative;transform:translate(-50%,0);top:50%;margin:0 -50% 0 0}@media (min-width:560px){#markup img.small,video.small{max-width:500px}}#markup img.shadow,video.shadow{box-shadow:0 1px 16px 0 rgba(0,0,0,.2),0 2px 8px 0 rgba(0,0,0,.14),0 4px 8px -1px rgba(0,0,0,.12)}#markup .image-source{font-size:16px;margin:0 0 3rem;text-align:center;letter-spacing:.02rem;color:#d0113f;font-weight:700}#markup .image-source.no-margin{margin-bottom:0}.link-effect{font-weight:600;color:#d0113f;-webkit-box-shadow:inset 0 -2px 0 0 #d0113f;box-shadow:inset 0 -2px 0 0 #d0113f;padding-bottom:2px}.link-effect:hover{color:#111}
    /* Github Highlight */
    /* GitHub highlight (slightly modified) */
    .hljs{display:block;overflow-x:auto;padding:0.5em;color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#404040;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:bold}.hljs-number,.hljs-literal,.hljs-variable,.hljs-template-variable,.hljs-tag .hljs-attr{color:#045252}.hljs-string,.hljs-doctag{color:#d14}.hljs-title,.hljs-section,.hljs-selector-id{color:#900;font-weight:bold}.hljs-subst{font-weight:normal}.hljs-type,.hljs-class .hljs-title{color:#458;font-weight:bold}.hljs-tag,.hljs-name,.hljs-attribute{color:#000080;font-weight:normal}.hljs-regexp,.hljs-link{color:#014c13}.hljs-symbol,.hljs-bullet{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#004d67}.hljs-meta{color:#999;font-weight:bold}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:bold}
  </style>
</head>

<body>

  <div class="flex flex-column items-center justify-between">
    <header class="h5 flex items-center">
  <a id="home-icon-container" href="/" aria-label="Home"><svg width="50" height="50" preserveAspectRatio="none" viewBox="0 0 350 350">
  <defs>
    <clipPath id="a">
      <path d="M0 300h500V0H0z"/>
    </clipPath>
  </defs>
  <g clip-path="url(#a)" transform="matrix(1.33333 0 0 -1.33333 -150 390)">
    <path id="home-icon" fill="#1d1d1d" d="M237.4502 130.5498c5 4.967 11.017 7.45 18.05 7.45 7.033 0 13.033-2.483 18-7.45 5-5 7.5-11.017 7.5-18.05 0-7.033-2.5-13.033-7.5-18-4.967-5-10.967-7.5-18-7.5-7.033 0-13.05 2.5-18.05 7.5-4.967 4.967-7.45 10.967-7.45 18 0 7.033 2.483 13.05 7.45 18.05m87.3 56.85l15.099-15.1c2.368-2.367 2.384-4.716.051-7.05l-17.15-17.15c-2.366-2.366-4.734-2.366-7.1 0l-59.551 59.55-59.299-59.3c-.5-.5-.983-.883-1.45-1.15l-53.95-53.95c-2.367-2.366-4.734-2.366-7.1 0l-17.15 17.151c-2.333 2.333-2.317 4.682.05 7.049l61.15 61.15h.3l55.1 55.1h.35l7.85 7.85c4.6 4.6 9.2 6.95 13.8 7.05h.599c3.467-.067 6.934-1.417 10.401-4.05l13.65-12.6-.1-.1 23.2-23.2v13.2c0 3.333 1.667 5 5 5h11.25c3.333 0 5-1.667 5-5z" fill-rule="evenodd"/>
  </g>
</svg></a>
</header>
  </div>

  <div class="flex flex-column justify-between mw7 pb5 center w-100 ph4">
    <div class="flex flex-column mt2 mb5">
      <h1 class="f3 f1-ns ttl mb2 near-black lh-title">
        Progressive Web Apps with Angular
      </h1>
      <time class="f5 fw6 red" datetime="2017-01-17 07:30:00 +0000">January 17, 2017</time>
    </div>
    <div id="markup" class="f5 f4-ns lh-copy near-black">
      <aside>
<p>Among other things, this post goes through how I set up offline support using the <code>sw-precache</code> and <code>sw-toolbox</code> libraries. Many updates and changes have been made to Angular tooling with regard to PWA support since this article was written.</p>
</aside>

<p>Progressive Web Apps (PWA) have been the talk of the town in 2016. In short, they are applications that use modern web capabilities to provide a user experience similar to that of mobile and native apps. Still a relatively new concept, these applications work for every user in every browser but are enhanced in some.</p>

<p>An earlier post of mine (see <a href="https://houssein.me/angular2-hacker-news">here</a>) revolved around building a Hacker News client from scratch using <a href="https://cli.angular.io/">Angular CLI</a>. In this post, we’re going to look into how we can make it faster and more reliable by making it a PWA.</p>

<div class="flex items-center justify-center h3">
  <a class="f6 fw6 link dim ph3 pv2 mb2 dib white bg-red mr2 ttu br2" href="https://angular2-hn.firebaseapp.com/">View App</a>
  <a class="f6 fw6 link dim ph3 pv2 mb2 dib white bg-red ttu br2" href="https://github.com/housseindjirdeh/angular2-hn/tree/version-1">Source Code</a>
</div>

<p><img alt="Angular 2 HN Preview" title="Angular 2 HN Preview" data-src="/assets/progressive-angular-applications/angular2-hn-mobile.png" class="lazyload shadow" /></p>

<p>Let’s go through some of the main concepts of progressive applications.</p>

<ul>
  <li>They are <strong>progressive</strong>, meaning that they work for every user in every browser</li>
  <li>Although they may provide a mobile-like experience, they are <strong>responsive</strong> and work on every device and screen size</li>
  <li><a href="https://developers.google.com/web/fundamentals/getting-started/codelabs/push-notifications/">Push notifications</a> and <a href="https://developers.google.com/web/fundamentals/getting-started/codelabs/offline/">offline support</a> are both features that can be included</li>
  <li>They can be <strong>installed</strong> to the home screen of your device</li>
  <li>They can be accessed directly with just a URL</li>
</ul>

<h2 id="the-case-for-progressive-web">The case for Progressive Web</h2>

<p><img alt="Installing" title="Installing" data-src="/assets/progressive-angular-applications/xkcd-installing.png" class="lazyload" /></p>

<p class="image-source"><a href="http://xkcd.com/1367/">XKCD - Installing</a></p>

<p>Although installing an app is usually a fast and simple process, when was the last time you were about to install something but decided not to? Maybe you felt like you didn’t want to go through the hassle of installing it, or maybe you just didn’t want use to up any more memory. Whatever the reason, almost every single mobile user has experienced this at some point.</p>

<p>However, most people feel a lot less <em>restricted</em> to open up a browser and just type in to the address bar. The convenience, security and simplicity of just typing a URL into an address bar is a powerful advantage of the web, and PWAs combine this with the feel of native applications.</p>

<h2 id="lighthouse">Lighthouse</h2>

<p><a href="https://github.com/GoogleChrome/lighthouse">Lighthouse</a> is an open-source auditing tool that you can use to test and improve your webpage. It runs a number of tests and generates a report on how well the page did. You can install Lighthouse as a <a href="https://github.com/GoogleChrome/lighthouse#install-chrome-extension">Chrome extension</a> or use its <a href="https://github.com/GoogleChrome/lighthouse#install-cli-">Node CLI tool</a>.</p>

<p>Here’s a snippet of the report before I added a number of progressive elements to the app.</p>

<p><img alt="Lighthouse Report" title="Lighthouse Report" data-src="/assets/progressive-angular-applications/lighthouse-before.png" class="lazyload shadow" /></p>

<p>The report consists of a number of audits that validate the aspects of a PWA. Let’s go over each of these audits and how we can improve each of these areas in our application.</p>

<p><strong>Note: This tutorial will reference my Hacker News client as we add a number of different tools to improve it. However, you can easily follow along and include each tool in your app if you already have an application built with Angular CLI. If you don’t and would like to know how, my <a href="https://houssein.me/angular2-hacker-news">previous post</a> can help.</strong></p>

<h2 id="network-connection-is-secure">Network connection is secure</h2>

<p>A number of progressive web technologies, such as service workers (which we’ll go over in a bit), require a <strong>HTTPS</strong> connection in order to work. The ‘<strong>S</strong>’ at the end, which stands for secure, ensures that the content that you retrieve is secure and cannot be tampered with.</p>

<p>There are a number of hosting platforms that are protected with HTTPS by default which makes it easy to have your website or application protected. Our Hacker News client is hosted on Firebase and this website is hosted on Github Pages: both allow <strong>HTTPS</strong> encryption.</p>

<p>I also wrote a <a href="https://houssein.me/continuous-integration-angular-firebase-travisci">post</a> that explains how you can deploy your Angular CLI app with Firebase so please take a look if you’re interested.</p>

<h2 id="page-load-performance-is-fast">Page load performance is fast</h2>

<p>Let’s take a look at how our app loads without any configuration. To represent mobile users more fairly, we’ll use simulated conditions of <strong>a 3G Network</strong> and <strong>a CPU Throttle of 2X slower</strong> thanks to Chrome’s Developer Tools.</p>

<p><img alt="Network - No Configuration" title="Network - No Configuration" data-src="/assets/progressive-angular-applications/network-first.png" class="lazyload" /></p>

<p>Humans are impatient creatures, and <a href="https://developers.google.com/web/progressive-web-apps/#fast">53% of us will give up if a site takes longer than 3 seconds to load</a>. Even under these simulated conditions, no webpage should take this long to load if we can prevent it.</p>

<h3 id="ahead-of-time-compilation">Ahead-of-Time compilation</h3>

<p>Components, along with their HTML templates, are the foundation of any Angular application. By default, this is all converted into viable JavaScript when you run the application in the browser. In other words, compilation happens <strong><em>Just-in-Time</em></strong>.</p>

<p>One way we can make an Angular app load faster is to run its compiler under <strong><em>Ahead-of-Time</em></strong> conditions. This means that the compiler only runs once during the build step. The app does not have to compile when you try to load it in the browser.</p>

<p>With Angular CLI, creating a production build is as simple as a terminal command.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">ng build <span class="nt">--prod</span></code></pre></figure>

<p>Creating a production build with AOT compilation is also just as simple (this really goes to show the amazing work the CLI team has done to make our lives easier).</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">ng build <span class="nt">--prod</span> <span class="nt">--aot</span></code></pre></figure>

<p>And that’s it. Now let’s see how our app loads under the same conditions.</p>

<p><img alt="Network - Ahead-of-Time" title="Network - Ahead-of-Time" data-src="/assets/progressive-angular-applications/network-first.png" class="lazyload" /></p>

<p>The app now loads 55% faster. That’s a pretty big difference for such a quick adjustment. The bundled file sizes were also reduced by <a href="https://twitter.com/beeman_nl/status/808180209719582720">roughly 40%</a>.</p>

<p><strong>Note: If you would like to understand how AOT works in more detail, Juri does an awesome job explaining it in this <a href="https://juristr.com/blog/2016/12/configure-aot-with-angular-cli/">screencast</a>.</strong></p>

<h3 id="application-shell">Application Shell</h3>

<p>An application shell (or App Shell) is the minimal HTML, CSS and JS responsible for providing the user with the <em>shell</em> of the user interface. A toolbar is a good example of something that would be encapsulated in this shell. In a PWA, the App Shell can be cached so it loads as quickly as possible when a user decides to return to the webpage. With this, we can provide the user with something meaningful <strong>immediately</strong> even if the actual content has not rendered yet.</p>

<p><img alt="App Shell" title="App Shell" data-src="/assets/progressive-angular-applications/app-shell-content.png" class="lazyload shadow" /></p>

<p>We can see that the App Shell in this application just consists of a header, navigation and loading icon that shows while the content is being fetched over the network. To cache our shell in order to load faster on repeat visits, we’ll need to add a <strong>Service Worker</strong> to our application.</p>

<h3 id="service-worker">Service Worker</h3>

<p>A service worker is a script that runs in the background of your browser when you view a webpage. It is entirely separate from the webpage itself and can only communicate with it.</p>

<p>We can register a service worker to our application by adding the following to <code class="highlighter-rouge">index.html</code>.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="o">&lt;</span><span class="nx">script</span><span class="o">&gt;</span>
  <span class="k">if</span> <span class="p">(</span><span class="s1">'serviceWorker'</span> <span class="k">in</span> <span class="nb">navigator</span><span class="p">)</span> <span class="p">{</span>
    <span class="nb">navigator</span><span class="p">.</span><span class="nx">serviceWorker</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="s1">'/service-worker.js'</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">registration</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// Registration was successful</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'ServiceWorker registration successful with scope: '</span><span class="p">,</span> <span class="nx">registration</span><span class="p">.</span><span class="nx">scope</span><span class="p">);</span>
    <span class="p">}).</span><span class="k">catch</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// registration failed :(</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'ServiceWorker registration failed: '</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
    <span class="p">});</span>
  <span class="p">}</span>
<span class="o">&lt;</span><span class="sr">/script&gt;</span></code></pre></figure>

<p>All this does is check to see if the browser supports service workers and if so, register it’s file path. Let’s run our application locally with <code class="highlighter-rouge">ng serve</code> or <code class="highlighter-rouge">ng serve --prod</code>, open it in a Chromium browser (Google Chrome, Firefox or Opera) and check the console.</p>

<p><img alt="Service Worker Fail" title="Service Worker Fail" data-src="/assets/progressive-angular-applications/service-worker-fail-local.png" class="lazyload shadow" /></p>

<p>We can see that it can’t retrieve the service worker file, <code class="highlighter-rouge">service-worker.js</code>, since it doesn’t exist. There’s a few ways we can set up this file:</p>

<ol>
  <li>Create the file and write out the logic to open a cache, cache all the static files (HTML, CSS, JS, images, etc..) and return the cached resources when the user returns to the page. Here’s an <a href="https://developers.google.com/web/fundamentals/getting-started/primers/service-workers">excellent introduction</a> to setting up a service worker.</li>
  <li>Use  <strong>Service Worker Precache</strong>.</li>
</ol>

<h3 id="service-worker-precache">Service Worker Precache</h3>

<p><a href="https://github.com/GoogleChrome/sw-precache#service-worker-precache">Service Worker Precache</a> (<code class="highlighter-rouge">sw-precache</code>) is a module that generates a service worker responsible for caching all the static resources in your application. It integrates right into the build system you’re using and, with some simple configurations, creates the service worker on the fly. We can begin by installing its package.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">npm install <span class="nt">--save-dev</span> sw-precache</code></pre></figure>

<p>Now in your <code class="highlighter-rouge">package.json</code> file, let’s add a <code class="highlighter-rouge">precache</code> script that runs a simple command: <code class="highlighter-rouge">sw-precache</code>.</p>

<figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="s2">"scripts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="s2">"ng"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ng"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"start"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ng serve"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"lint"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tslint </span><span class="se">\"</span><span class="s2">src/**/*.ts</span><span class="se">\"</span><span class="s2">"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"test"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ng test"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"pree2e"</span><span class="p">:</span><span class="w"> </span><span class="s2">"webdriver-manager update --standalone false --gecko false"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"e2e"</span><span class="p">:</span><span class="w"> </span><span class="s2">"protractor"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"precache"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sw-precache"</span><span class="w">
</span><span class="p">}</span></code></pre></figure>

<p>Now just run the following script.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">npm run precache</code></pre></figure>

<p><img alt="Service worker output" title="Service worker output" data-src="/assets/progressive-angular-applications/service-worker-output.png" class="lazyload shadow" /></p>

<p>It generates a <code class="highlighter-rouge">service-worker.js</code> file right in your root folder. You can see the output also includes the total size and number of assets that are cached. This corresponds to the total number of resources that your application shell contains.</p>

<p>Furthermore, if you take a look at the actual file, you’ll see logic that <code class="highlighter-rouge">installs</code> and <code class="highlighter-rouge">activates</code> your service worker. You can also find where it caches and returns requests (<code class="highlighter-rouge">fetch</code> event).</p>

<p>Now this is all pretty cool and everything, but having the service worker in the root of our application isn’t going to help us. This is because when you run a production build with the CLI (<code class="highlighter-rouge">ng build --prod</code> or <code class="highlighter-rouge">ng build --prod --aot</code>), it generates the compiled, bundled and minifed code in a <code class="highlighter-rouge">dist/</code> subdirectory which we deploy and host. We can update our <code class="highlighter-rouge">precache</code> script to make this happen.</p>

<figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="s2">"scripts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="err">//</span><span class="w"> </span><span class="err">...</span><span class="w">
  </span><span class="s2">"precache"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sw-precache --root=dist --verbose"</span><span class="w">
</span><span class="p">}</span></code></pre></figure>

<p>Now running the script should generate the service worker right inside the <code class="highlighter-rouge">dist/</code> directory. We’ve added <code class="highlighter-rouge">verbose</code> so we can see a logged output in the terminal for each and every resource that’s precached. Let’s run <code class="highlighter-rouge">ng build --prod --aot</code> to set up a production build followed with <code class="highlighter-rouge">npm run precache</code>.</p>

<p><img alt="Service worker dist output" title="Service worker dist output" data-src="/assets/progressive-angular-applications/service-worker-dist-output.png" class="lazyload shadow" /></p>

<p>We can see that our service worker file was generated in the <code class="highlighter-rouge">dist/</code> folder which is perfect. We can also see that each and every static resource in our dist folder is precached by default. This is a bit overkill since not every one of those files are requested when you run the application. Now if we wanted to just precache our HTML files, we can use the following command instead.</p>

<figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="s2">"scripts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="err">//</span><span class="w"> </span><span class="err">...</span><span class="w">
  </span><span class="s2">"precache"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sw-precache --root=dist --verbose --static-file-globs='dist/**.html'"</span><span class="w">
</span><span class="p">}</span></code></pre></figure>

<p>We’re adding quite a bit to our script now. To make things simpler, we can set up a separate file to specify what configurations we would like for our service worker.  Let’s create a <code class="highlighter-rouge">sw-precache-config.js</code> file right at the root of our application and move our current configurations there.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">staticFileGlobs</span><span class="p">:</span> <span class="p">[</span>
    <span class="s1">'dist/**.html'</span><span class="p">,</span>
  <span class="p">],</span>
  <span class="na">root</span><span class="p">:</span> <span class="s1">'dist'</span>
<span class="p">};</span></code></pre></figure>

<p>We can now simplify our script to just refer to that file.</p>

<figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="s2">"scripts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="err">//</span><span class="w"> </span><span class="err">...</span><span class="w">
  </span><span class="s2">"precache"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sw-precache --verbose --config=sw-precache-config.js"</span><span class="w">
</span><span class="p">}</span></code></pre></figure>

<p>Now let’s run <code class="highlighter-rouge">npm run precache</code> once more.</p>

<p><img alt="Service worker dist HTML" title="Service worker dist HTML" data-src="/assets/progressive-angular-applications/service-worker-only-html.png" class="lazyload shadow" /></p>

<p>As expected, the only HTML file in our production folder, <code class="highlighter-rouge">index.html</code>, is cached. Remember that Angular is a Single Page Application, where the final output consists of a single HTML file that dynamically changes based on the JavaScript we have. Now that we have a decent understanding of how <code class="highlighter-rouge">sw-precache</code> allows us to set up a service worker, let’s add some more configurations to <code class="highlighter-rouge">sw-precache-config.js</code>.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">staticFileGlobs</span><span class="p">:</span> <span class="p">[</span>
    <span class="s1">'dist/**.html'</span><span class="p">,</span>
    <span class="s1">'dist/**.js'</span><span class="p">,</span>
    <span class="s1">'dist/**.css'</span><span class="p">,</span>
    <span class="s1">'dist/assets/images/*'</span><span class="p">,</span>
    <span class="s1">'dist/assets/icons/*'</span>
  <span class="p">],</span>
  <span class="na">root</span><span class="p">:</span> <span class="s1">'dist'</span><span class="p">,</span>
  <span class="na">stripPrefix</span><span class="p">:</span> <span class="s1">'dist/'</span><span class="p">,</span>
  <span class="na">navigateFallback</span><span class="p">:</span> <span class="s1">'/index.html'</span>
<span class="p">};</span></code></pre></figure>

<ol>
  <li>We can precache all our static files (HTML, JS and CSS) along with our assets folder which contains our icons and images (we’ll go over generating icons for our application in a bit)</li>
  <li>Since our built app lives solely in the <code class="highlighter-rouge">dist</code> folder, we use <code class="highlighter-rouge">stripPrefix</code> to remove it from the beginning of any file paths that may be referenced</li>
  <li>When the app attempts to fetch a request not found in the cache, we use <code class="highlighter-rouge">navigateFallback</code> to set <code class="highlighter-rouge">index.html</code> as our <em>fallback</em> (couldn’t think of another word :P)</li>
</ol>

<p>Now that we have all our static resources set up for precaching, we need to make sure to generate our service worker right before we deploy the app to our hosting platform. For example, if we were hosting our application on Firebase, we would do the following:</p>

<ol>
  <li><code class="highlighter-rouge">ng build --prod --aot</code></li>
  <li><code class="highlighter-rouge">npm run precache</code></li>
  <li><code class="highlighter-rouge">firebase deploy</code></li>
</ol>

<p>Once deployed, let’s take a look at the network requests when we load the application <strong>on a repeat visit</strong>.</p>

<p><img alt="Requests with sw-precache" title="Requests with sw-precache" data-src="/assets/progressive-angular-applications/requests-sw-precache.png" class="lazyload shadow" /></p>

<p>You can see that every precached resource was retrieved from the service worker! The only data transferred was our third party call to get the list of stories from the Hacker News API. Let’s take a look at the captured sequences on reload.</p>

<p><img alt="Network with sw-precache" title="Network with sw-precache" data-src="/assets/progressive-angular-applications/network-sw-precache.png" class="lazyload" /></p>

<p>Not bad at all. You can see that the static resources load a lot faster since they’re now being retrieved from the service worker. This significantly reduces our <a href="https://developers.google.com/web/tools/lighthouse/audits/time-to-interactive">Time to Interactive</a>.</p>

<h3 id="service-worker-webpack-plugin">Service Worker Webpack Plugin</h3>

<p>To make this entire procedure a lot simple, there’s a Webpack plugin for service workers, <a href="https://www.npmjs.com/package/sw-precache-webpack-plugin"><code class="highlighter-rouge">SWPrecacheWebpackPlugin</code></a>, that you can include in your Webpack configuration. When I built this application, Angular CLI <a href="https://github.com/angular/angular-cli/issues/1656">did not support</a> overriding Webpack configurations. However, the team has recently included the ability to <a href="https://github.com/angular/angular-cli/blob/3ad2856b27889a50a742c9dca9554a190c8509bf/CHANGELOG.md#100-beta32-2017-02-17">eject</a> and modify your configurations so using this plugin may probably make things even smoother (and I look forward to trying this soon).</p>

<h3 id="continuous-integration">Continuous Integration</h3>

<p>It’s important to remember that because we’re doing this manually, we need to make sure we generate our service worker every time we create a new build. For example, this app is hosted on Firebase and I use a simple command line, <code class="highlighter-rouge">firebase deploy</code> to host <code class="highlighter-rouge">dist/</code>. So that means I need to always run the following in order when I make updates to my app.</p>

<ol>
  <li><code class="highlighter-rouge">ng build --prod --aot</code></li>
  <li><code class="highlighter-rouge">npm run precache</code></li>
  <li><code class="highlighter-rouge">firebase deploy</code></li>
</ol>

<p>There’s been quite a few times I forgot to run that command, so I set up a simple continuous integration script that automatically runs a build, generates a new service worker and deploys to Firebase every time I just <code class="highlighter-rouge">push</code> to my repository. My previous <a href="https://houssein.me/continuous-integration-angular-firebase-travisci">post</a> explains how I set this up as well.</p>

<h2 id="app-can-load-on-offlineflaky-connections">App can load on offline/flaky connections</h2>

<p>Now that we understand how we can set up an App Shell using <code class="highlighter-rouge">sw-precache</code>, let’s look at another important factor of progressive web applications, <strong>working with unavailable or poor network connections</strong>. We’ll be using another library for this, <a href="https://github.com/GoogleChrome/sw-toolbox">Service Worker Toolbox</a> (<code class="highlighter-rouge">sw-toolbox</code>).</p>

<p>Although this is a different tool, <code class="highlighter-rouge">sw-precache</code> is capable of including this just by adding a new configuration, <code class="highlighter-rouge">runtimeCaching</code>, to our config file. Although this may <a href="https://github.com/GoogleChrome/sw-precache/issues/147">change in the future</a>, this lets us easily integrate dynamic network caching into our service worker.</p>

<blockquote>
  <p>We wanted to make it easier for developers to use the two libraries together. Because sw-precache has to be directly integrated with your build environment and must be responsible for outputting your top-level service worker file, it made the most sense as an integration point to give sw-precache the ability to include the sw-toolbox code and configuration alongside its own configuration.</p>
  <footer><a href="https://github.com/GoogleChrome/sw-precache/blob/master/sw-precache-and-sw-toolbox.md">sw-precache? sw-toolbox? What's the difference?</a></footer>
</blockquote>

<h3 id="runtimecaching">runtimeCaching</h3>

<p>Let’s look at how we can add this configuration to <code class="highlighter-rouge">sw-precache-config</code>.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">runtimeCaching</span><span class="p">:</span> <span class="p">[{</span>
  <span class="na">urlPattern</span><span class="p">:</span> <span class="sr">/node-hnapi</span><span class="se">\.</span><span class="sr">herokuapp</span><span class="se">\.</span><span class="sr">com/</span><span class="p">,</span>
  <span class="na">handler</span><span class="p">:</span> <span class="s1">'networkFirst'</span>
<span class="p">}]</span></code></pre></figure>

<p>And that’s pretty much all I needed to do for my application. The configuration consists of an array with each object referencing a separate <code class="highlighter-rouge">urlPattern</code>. You can see that I have a <strong>RegExp</strong> here referencing the <a href="https://github.com/cheeaun/node-hnapi">unofficial API</a> I’m using to power my application. You can also use a string among other route types (the <a href="https://googlechrome.github.io/sw-toolbox/docs/master/tutorial-usage.html">docs</a> give a clear overview of the different route styles you can use).</p>

<p><code class="highlighter-rouge">handler</code> is also required and you can see that I’m using <code class="highlighter-rouge">networkFirst</code>. There are a total of five built-in handlers that allow you to modify your network strategy. For <code class="highlighter-rouge">networkFirst</code>, the toolbox will try to handle the request first by retrieving from the network and if that succeeds, it will <strong>cache the response</strong>. When this fails (flaky/unavailable network), it will fetch directly from the cache.</p>

<p>The <a href="https://googlechrome.github.io/sw-toolbox/docs/master/tutorial-api.html">documentation</a> also explains the different handler types clearly. To get a better understanding of each of the network strategies, <a href="https://jakearchibald.com/2014/offline-cookbook/">The Offline Cookbook</a> is an excellent read.</p>

<p>Now when we run the application offline, requests previously fetched are now retrieved from the cache. This means that the user can now use the app with pages they have previously visited.</p>

<p><img alt="Network with sw-toolbox" title="Network with sw-toolbox" data-src="/assets/progressive-angular-applications/network-sw-toolbox.png" class="lazyload shadow" /></p>

<p>Someone was nice enough to open an <a href="https://github.com/housseindjirdeh/angular2-hn/issues/21">issue</a> and mention that for failing requests (both cache and network), it makes more sense to show an error message instead of a loading indicator. Consider the following two scenarios:</p>

<ol>
  <li>The API fails through the network and is not cached (first-time viewing that page)</li>
  <li>The API works, however the user is offline but navigates to a page that they have not yet visited</li>
</ol>

<p>In either of these scenarios, an appropriate warning message would be nice so the user isn’t confused when nothing is loading, <strong>especially on a mobile device</strong>.</p>

<p><img alt="Request error message" title="Request error message" data-src="/assets/progressive-angular-applications/request-error-message.png" class="lazyload shadow small" /></p>

<p class="image-source"><a href="https://codepen.io/MyXoToD/pen/HFeda">Awesome minimalist skull CSS</a> by <a href="https://codepen.io/MyXoToD/">Max</a> on Codepen</p>

<h2 id="site-is-progressively-enhanced">Site is progressively enhanced</h2>

<p>One of the primary principles behind progressively enhanced web pages is that anyone and everyone should be able to access its basic content at the very least. So far we’ve overlooked those who browse the web with <em>JavaScript disabled</em>.</p>

<h3 id="working-without-javascript">Working without JavaScript</h3>

<p>Some think that always developing an application for users with their JavaScript disabled <a href="http://tomdale.net/2013/09/progressive-enhancement-is-dead/">doesn’t make much sense</a>. If you think about it, SPA’s <em>rely</em> on client JS in order to work. That’s how we end up with a single <code class="highlighter-rouge">index.html</code> file that dynamically changes based on user events.</p>

<p>But how would we go about having a SPA to work without client side JS in the first place? We can do this by <strong>server-side rendering</strong> some (or all) of our content. <a href="https://universal.angular.io/">Angular Universal</a> allows us to do this in Angular applications, which can give your application a better perceived performance and make it more SEO friendly.</p>

<p>I haven’t had the chance to try this (and hopefully I will soon), but in the meantime we can at least insert a <code class="highlighter-rouge">&lt;noscript&gt;</code> tag in <code class="highlighter-rouge">index.html</code> to warn the user that JavaScript is required.</p>

<p><img alt="JS disabled message" title="JS disabled message" data-src="/assets/progressive-angular-applications/js-disabled.png" class="lazyload shadow" /></p>

<p><img alt="Better than nothing" title="Better than nothing" data-src="/assets/progressive-angular-applications/better-than-nothing.png" class="lazyload shadow" /></p>

<h2 id="design-is-mobile-friendly">Design is mobile-friendly</h2>

<p>If you plan on building a web application and not expect any users to access it through their mobile device, than you may not be concerned with how it looks with smaller screens whatsoever. However, more and more users access the web through their phones and if you intend on building an app with progressive enhancement in mind, you most likely want to make sure it sizes correctly to all screen sizes.</p>

<p>In this area, Lighthouse will check to see if your HTML has a <code class="highlighter-rouge">&lt;meta name="viewport"&gt;</code> in order to optimize your app for mobile devices. Fortunately, Angular CLI includes this by default.</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">"viewport"</span> <span class="na">content=</span><span class="s">"width=device-width, initial-scale=1"</span><span class="nt">&gt;</span></code></pre></figure>

<h2 id="user-can-be-prompted-to-add-to-homescreen">User can be prompted to Add to Homescreen</h2>

<p>We can give users the ability to install the application to their homescreen in order to feel more like a native application.</p>

<p><img alt="Installed to homescreen" title="Installed to homescreen" data-src="/assets/progressive-angular-applications/app-installed-phone.png" class="lazyload" /></p>

<p>This is done by adding a <a href="https://developer.mozilla.org/en-US/docs/Web/Manifest">Web App Manifest</a>, a JSON file that contains specific information about your app. We can begin by adding a <code class="highlighter-rouge">link</code> to the head of our <code class="highlighter-rouge">index.html</code>.</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"manifest"</span> <span class="na">href=</span><span class="s">"/manifest.json"</span><span class="nt">&gt;</span></code></pre></figure>

<p>Since we need this file as we build our app into the <code class="highlighter-rouge">dist</code> directory, we’ll need to add it as an asset in <code class="highlighter-rouge">angular-cli.json</code>.</p>

<figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="s2">"assets"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
  </span><span class="s2">"assets"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"favicon.ico"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"manifest.json"</span><span class="w">
</span><span class="p">]</span></code></pre></figure>

<p>Now let’s create <code class="highlighter-rouge">manifest.json</code> in our <code class="highlighter-rouge">src</code> folder.</p>

<figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
  </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Angular 2 HN"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"short_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Angular 2 HN"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"icons"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"src"</span><span class="p">:</span><span class="w"> </span><span class="s2">"assets/icons/android-chrome-192x192.png"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"sizes"</span><span class="p">:</span><span class="w"> </span><span class="s2">"192x192"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"image</span><span class="se">\/</span><span class="s2">png"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"display"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standalone"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"start_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"./?utm_source=web_app_manifest"</span><span class="w">
</span><span class="p">}</span></code></pre></figure>

<p>Many of these configurations are self explanatory, but this <a href="https://developer.mozilla.org/en-US/docs/Web/Manifest">resource</a> from MDN does a great job explaining each one.</p>

<p>Since our manifest has a <code class="highlighter-rouge">short_name</code>, a <code class="highlighter-rouge">start_url</code> and an icon larger than <strong>144px</strong>, our application will show an install banner to prompt the user to install the app to their home page. This banner shows if the user visits your site at least twice with five minutes between each visit.</p>

<p><img alt="App install banner" title="App install banner" data-src="/assets/progressive-angular-applications/install-to-home-screen.png" class="lazyload" /></p>

<h2 id="installed-web-app-will-launch-with-custom-splash-screen">Installed web app will launch with custom splash screen</h2>

<p>Another thing that a manifest file allows for is a custom splash screen when you open the app through your home screen. This is useful because it can reduce the <em>perceived</em> load time of your application (even if it loads in the same amount of time). To do this, we’ll need to flush out our manifest file a little more.</p>

<figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
  </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Angular 2 HN"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"short_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Angular 2 HN"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"icons"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"src"</span><span class="p">:</span><span class="w"> </span><span class="s2">"assets/icons/android-chrome-192x192.png"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"sizes"</span><span class="p">:</span><span class="w"> </span><span class="s2">"192x192"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"image</span><span class="se">\/</span><span class="s2">png"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"src"</span><span class="p">:</span><span class="w"> </span><span class="s2">"assets/icons/android-chrome-256x256.png"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"sizes"</span><span class="p">:</span><span class="w"> </span><span class="s2">"256x256"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"image</span><span class="se">\/</span><span class="s2">png"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"theme_color"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#b92b27"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"background_color"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#ffffff"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"display"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standalone"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"orientation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"portrait"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"start_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"./?utm_source=web_app_manifest"</span><span class="w">
</span><span class="p">}</span></code></pre></figure>

<p>You can see that we’ve added two new attributes, <code class="highlighter-rouge">theme_color</code> and <code class="highlighter-rouge">background_color</code>. The manifest needs to contain this along with <code class="highlighter-rouge">name</code> and an icon of at least 192px (we added a new one of 256px) in order to serve a splash screen.</p>

<p><img alt="Mobile splash screen" title="Mobile splash screen" data-src="/assets/progressive-angular-applications/mobile-whitebg-combined.png" class="lazyload" /></p>

<h3 id="icons">Icons</h3>

<p>To simply generate a number of icons needed not just for Android, but for Windows and iOS devices as well, I used <a href="http://realfavicongenerator.net/">RealFaviconGenerator</a>. It shows you how your icons will look in each device as well previews of the splash screen in Android. It then provides the markup you can include in your <code class="highlighter-rouge">index.html</code> along with all the icons you need (which I put in <code class="highlighter-rouge">assets/icons</code>).</p>

<p><img alt="Assets icons folder" title="Assets icons folder" data-src="/assets/progressive-angular-applications/assets-icons-folder.png" class="lazyload small" /></p>

<h3 id="installing-with-ios">Installing with iOS</h3>

<p>Like Chromium browsers (Chrome, Firefox, Opera) on Android, Safari on iOS allows you to install to homescreen and provide an icon. However, splash screens are not supported.</p>

<p>Moreover, with the presence of a web manifest, the URL bar is automatically removed giving the user a full-screen experience on Android devices. This is not the case on iOS, but there are <a href="https://developer.apple.com/library/content/documentation/AppleApplications/Reference/SafariHTMLRef/Articles/MetaTags.html">supported meta tags</a> that we can add to fix this (credits to <a href="https://github.com/beeman">Bram Borggreve</a>, I didn’t know this was possible until he put up a PR for this!). With this, we can have a rich full-screen experience on iOS as well.</p>

<p><img alt="iPhone Demo" title="iPhone Demo" data-src="/assets/progressive-angular-applications/iphone-demo.gif" class="lazyload shadow" /></p>

<p class="image-source">Recording by Bram Borggreve</p>

<h2 id="best-practices">Best Practices</h2>

<p>Along with audits that measure the aspects of a PWA, Lighthouse provides a list of recommendations to improve your webpage in terms of best practices. Although these don’t affect your score, it’s still fun/handy to tick them off the list as you work on your application. Some examples:</p>

<ol>
  <li>Site opens external links using <code class="highlighter-rouge">rel="noopener"</code></li>
  <li>Every image element has an alt attribute</li>
</ol>

<h2 id="conclusion">Conclusion</h2>

<p><img alt="Conclusion" title="Conclusion" data-src="/assets/progressive-angular-applications/conclusion.png" class="lazyload shadow" /></p>

<p>Although Angular Mobile Toolkit may eventually make creating a PWA a smooth and simple process with the CLI, it’s still very possible to integrate a number of progressive elements to your application without adding much overhead at all.</p>

<p>I hope this tutorial helped you and if it did, please <a href="https://twitter.com/intent/tweet?text=Progressive Web Apps with Angular&amp;url=https://houssein.me/progressive-angular-applications&amp;via=hdjirdeh&amp;related=hdjirdeh&quot;">tweet it forward</a> and <a href="https://github.com/housseindjirdeh/angular2-hn">star the repo</a>! You can also <a href="https://twitter.com/intent/user?screen_name=hdjirdeh">follow me</a> on Twitter if you haven’t had enough of me rambling.</p>

    </div>

    <div class="f5 fw6 lh-copy mt5">
      <p>If you have any questions or suggestions, feel free to open an
        <a class="link-effect" href="https://github.com/housseindjirdeh/housseindjirdeh.github.io/issues/new">issue!</a>
      </p>
    </div>

    <div class="flex flex-column items-center mt6 mt7-ns mb5">
	<p class="grow">
		<a class="f4 fw6 link near-black hover-red ttl" href="https://twitter.com/hdjirdeh" rel="noopener noreferrer" target="_blank">
			Houssein Djirdeh
		</a>
	</p>
</div>
  </div>
  
  <script>
  /*! highlight.js v9.12.0 | BSD3 License | git.io/hljslicense */
  !function(e){var t="object"==typeof window&&window||"object"==typeof self&&self;"undefined"!=typeof exports?e(exports):t&&(t.hljs=e({}),"function"==typeof define&&define.amd&&define([],function(){return t.hljs}))}(function(e){function t(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function r(e){return e.nodeName.toLowerCase()}function n(e,t){var r=e&&e.exec(t);return r&&0===r.index}function a(e){return v.test(e)}function c(e){var t,r={},n=Array.prototype.slice.call(arguments,1);for(t in e)r[t]=e[t];return n.forEach(function(e){for(t in e)r[t]=e[t]}),r}function i(e){var t=[];return function e(n,a){for(var c=n.firstChild;c;c=c.nextSibling)3===c.nodeType?a+=c.nodeValue.length:1===c.nodeType&&(t.push({event:"start",offset:a,node:c}),a=e(c,a),r(c).match(/br|hr|img|input/)||t.push({event:"stop",offset:a,node:c}));return a}(e,0),t}function s(e){function t(e){return e&&e.source||e}function r(r,n){return new RegExp(t(r),"m"+(e.cI?"i":"")+(n?"g":""))}!function n(a,i){if(!a.compiled){if(a.compiled=!0,a.k=a.k||a.bK,a.k){var s={},o=function(t,r){e.cI&&(r=r.toLowerCase()),r.split(" ").forEach(function(e){var r=e.split("|");s[r[0]]=[t,r[1]?Number(r[1]):1]})};"string"==typeof a.k?o("keyword",a.k):d(a.k).forEach(function(e){o(e,a.k[e])}),a.k=s}a.lR=r(a.l||/\w+/,!0),i&&(a.bK&&(a.b="\\b("+a.bK.split(" ").join("|")+")\\b"),a.b||(a.b=/\B|\b/),a.bR=r(a.b),a.e||a.eW||(a.e=/\B|\b/),a.e&&(a.eR=r(a.e)),a.tE=t(a.e)||"",a.eW&&i.tE&&(a.tE+=(a.e?"|":"")+i.tE)),a.i&&(a.iR=r(a.i)),null==a.r&&(a.r=1),a.c||(a.c=[]),a.c=Array.prototype.concat.apply([],a.c.map(function(e){return(t="self"===e?a:e).v&&!t.cached_variants&&(t.cached_variants=t.v.map(function(e){return c(t,{v:null},e)})),t.cached_variants||t.eW&&[c(t)]||[t];var t})),a.c.forEach(function(e){n(e,a)}),a.starts&&n(a.starts,i);var l=a.c.map(function(e){return e.bK?"\\.?("+e.b+")\\.?":e.b}).concat([a.tE,a.i]).map(t).filter(Boolean);a.t=l.length?r(l.join("|"),!0):{exec:function(){return null}}}}(e)}function o(e,r,a,c){function i(e,t,r,n){var a='<span class="'+(n?"":E.classPrefix);return(a+=e+'">')+t+(r?"":y)}function u(){N+=null!=m.sL?function(){var e="string"==typeof m.sL;if(e&&!h[m.sL])return t(w);var r=e?o(m.sL,w,!0,v[m.sL]):l(w,m.sL.length?m.sL:void 0);return m.r>0&&(M+=r.r),e&&(v[m.sL]=r.top),i(r.language,r.value,!1,!0)}():function(){var e,r,n,a,c,s,o;if(!m.k)return t(w);for(a="",r=0,m.lR.lastIndex=0,n=m.lR.exec(w);n;)a+=t(w.substring(r,n.index)),c=m,s=n,o=g.cI?s[0].toLowerCase():s[0],e=c.k.hasOwnProperty(o)&&c.k[o],e?(M+=e[1],a+=i(e[0],t(n[0]))):a+=t(n[0]),r=m.lR.lastIndex,n=m.lR.exec(w);return a+t(w.substr(r))}(),w=""}function f(e){N+=e.cN?i(e.cN,"",!0):"",m=Object.create(e,{parent:{value:m}})}function b(e,t){if(w+=e,null==t)return u(),0;var r=function(e,t){var r,a;for(r=0,a=t.c.length;a>r;r++)if(n(t.c[r].bR,e))return t.c[r]}(t,m);if(r)return r.skip?w+=t:(r.eB&&(w+=t),u(),r.rB||r.eB||(w=t)),f(r),r.rB?0:t.length;var c,i=function e(t,r){if(n(t.eR,r)){for(;t.endsParent&&t.parent;)t=t.parent;return t}return t.eW?e(t.parent,r):void 0}(m,t);if(i){var s=m;s.skip?w+=t:(s.rE||s.eE||(w+=t),u(),s.eE&&(w=t));do{m.cN&&(N+=y),m.skip||(M+=m.r),m=m.parent}while(m!==i.parent);return i.starts&&f(i.starts),s.rE?0:t.length}if(c=t,!a&&n(m.iR,c))throw new Error('Illegal lexeme "'+t+'" for mode "'+(m.cN||"<unnamed>")+'"');return w+=t,t.length||1}var g=p(e);if(!g)throw new Error('Unknown language: "'+e+'"');s(g);var d,m=c||g,v={},N="";for(d=m;d!==g;d=d.parent)d.cN&&(N=i(d.cN,"",!0)+N);var w="",M=0;try{for(var x,R,C=0;m.t.lastIndex=C,x=m.t.exec(r);)R=b(r.substring(C,x.index),x[0]),C=x.index+R;for(b(r.substr(C)),d=m;d.parent;d=d.parent)d.cN&&(N+=y);return{r:M,value:N,language:e,top:m}}catch(e){if(e.message&&-1!==e.message.indexOf("Illegal"))return{r:0,value:t(r)};throw e}}function l(e,r){r=r||E.languages||d(h);var n={r:0,value:t(e)},a=n;return r.filter(p).forEach(function(t){var r=o(t,e,!1);r.language=t,r.r>a.r&&(a=r),r.r>n.r&&(a=n,n=r)}),a.language&&(n.second_best=a),n}function u(e){return E.tabReplace||E.useBR?e.replace(w,function(e,t){return E.useBR&&"\n"===e?"<br>":E.tabReplace?t.replace(/\t/g,E.tabReplace):""}):e}function f(e){var n,c,s,f,b,d,h,v,w,y,M=function(e){var t,r,n,c,i=e.className+" ";if(i+=e.parentNode?e.parentNode.className:"",r=N.exec(i))return p(r[1])?r[1]:"no-highlight";for(t=0,n=(i=i.split(/\s+/)).length;n>t;t++)if(c=i[t],a(c)||p(c))return c}(e);a(M)||(E.useBR?(n=document.createElementNS("http://www.w3.org/1999/xhtml","div")).innerHTML=e.innerHTML.replace(/\n/g,"").replace(/<br[ \/]*>/g,"\n"):n=e,b=n.textContent,s=M?o(M,b,!0):l(b),(c=i(n)).length&&((f=document.createElementNS("http://www.w3.org/1999/xhtml","div")).innerHTML=s.value,s.value=function(e,n,a){function c(){return e.length&&n.length?e[0].offset!==n[0].offset?e[0].offset<n[0].offset?e:n:"start"===n[0].event?e:n:e.length?e:n}function i(e){u+="<"+r(e)+g.map.call(e.attributes,function(e){return" "+e.nodeName+'="'+t(e.value).replace('"',"&quot;")+'"'}).join("")+">"}function s(e){u+="</"+r(e)+">"}function o(e){("start"===e.event?i:s)(e.node)}for(var l=0,u="",f=[];e.length||n.length;){var b=c();if(u+=t(a.substring(l,b[0].offset)),l=b[0].offset,b===e){f.reverse().forEach(s);do{o(b.splice(0,1)[0]),b=c()}while(b===e&&b.length&&b[0].offset===l);f.reverse().forEach(i)}else"start"===b[0].event?f.push(b[0].node):f.pop(),o(b.splice(0,1)[0])}return u+t(a.substr(l))}(c,i(f),b)),s.value=u(s.value),e.innerHTML=s.value,e.className=(d=e.className,h=M,v=s.language,w=h?m[h]:v,y=[d.trim()],d.match(/\bhljs\b/)||y.push("hljs"),-1===d.indexOf(w)&&y.push(w),y.join(" ").trim()),e.result={language:s.language,re:s.r},s.second_best&&(e.second_best={language:s.second_best.language,re:s.second_best.r}))}function b(){if(!b.called){b.called=!0;var e=document.querySelectorAll("pre code");g.forEach.call(e,f)}}function p(e){return e=(e||"").toLowerCase(),h[e]||h[m[e]]}var g=[],d=Object.keys,h={},m={},v=/^(no-?highlight|plain|text)$/i,N=/\blang(?:uage)?-([\w-]+)\b/i,w=/((^(<[^>]+>|\t|)+|(?:\n)))/gm,y="</span>",E={classPrefix:"hljs-",tabReplace:null,useBR:!1,languages:void 0};return e.highlight=o,e.highlightAuto=l,e.fixMarkup=u,e.highlightBlock=f,e.configure=function(e){E=c(E,e)},e.initHighlighting=b,e.initHighlightingOnLoad=function(){addEventListener("DOMContentLoaded",b,!1),addEventListener("load",b,!1)},e.registerLanguage=function(t,r){var n=h[t]=r(e);n.aliases&&n.aliases.forEach(function(e){m[e]=t})},e.listLanguages=function(){return d(h)},e.getLanguage=p,e.inherit=c,e.IR="[a-zA-Z]\\w*",e.UIR="[a-zA-Z_]\\w*",e.NR="\\b\\d+(\\.\\d+)?",e.CNR="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",e.BNR="\\b(0b[01]+)",e.RSR="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",e.BE={b:"\\\\[\\s\\S]",r:0},e.ASM={cN:"string",b:"'",e:"'",i:"\\n",c:[e.BE]},e.QSM={cN:"string",b:'"',e:'"',i:"\\n",c:[e.BE]},e.PWM={b:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},e.C=function(t,r,n){var a=e.inherit({cN:"comment",b:t,e:r,c:[]},n||{});return a.c.push(e.PWM),a.c.push({cN:"doctag",b:"(?:TODO|FIXME|NOTE|BUG|XXX):",r:0}),a},e.CLCM=e.C("//","$"),e.CBCM=e.C("/\\*","\\*/"),e.HCM=e.C("#","$"),e.NM={cN:"number",b:e.NR,r:0},e.CNM={cN:"number",b:e.CNR,r:0},e.BNM={cN:"number",b:e.BNR,r:0},e.CSSNM={cN:"number",b:e.NR+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",r:0},e.RM={cN:"regexp",b:/\//,e:/\/[gimuy]*/,i:/\n/,c:[e.BE,{b:/\[/,e:/\]/,r:0,c:[e.BE]}]},e.TM={cN:"title",b:e.IR,r:0},e.UTM={cN:"title",b:e.UIR,r:0},e.METHOD_GUARD={b:"\\.\\s*"+e.UIR,r:0},e}),hljs.registerLanguage("css",function(e){var t={b:/[A-Z\_\.\-]+\s*:/,rB:!0,e:";",eW:!0,c:[{cN:"attribute",b:/\S/,e:":",eE:!0,starts:{eW:!0,eE:!0,c:[{b:/[\w-]+\(/,rB:!0,c:[{cN:"built_in",b:/[\w-]+/},{b:/\(/,e:/\)/,c:[e.ASM,e.QSM]}]},e.CSSNM,e.QSM,e.ASM,e.CBCM,{cN:"number",b:"#[0-9A-Fa-f]+"},{cN:"meta",b:"!important"}]}}]};return{cI:!0,i:/[=\/|'\$]/,c:[e.CBCM,{cN:"selector-id",b:/#[A-Za-z0-9_-]+/},{cN:"selector-class",b:/\.[A-Za-z0-9_-]+/},{cN:"selector-attr",b:/\[/,e:/\]/,i:"$"},{cN:"selector-pseudo",b:/:(:)?[a-zA-Z0-9\_\-\+\(\)"'.]+/},{b:"@(font-face|page)",l:"[a-z-]+",k:"font-face page"},{b:"@",e:"[{;]",i:/:/,c:[{cN:"keyword",b:/\w+/},{b:/\s/,eW:!0,eE:!0,r:0,c:[e.ASM,e.QSM,e.CSSNM]}]},{cN:"selector-tag",b:"[a-zA-Z-][a-zA-Z0-9_-]*",r:0},{b:"{",e:"}",i:/\S/,c:[e.CBCM,t]}]}}),hljs.registerLanguage("bash",function(e){var t={cN:"variable",v:[{b:/\$[\w\d#@][\w\d_]*/},{b:/\$\{(.*?)}/}]},r={cN:"string",b:/"/,e:/"/,c:[e.BE,t,{cN:"variable",b:/\$\(/,e:/\)/,c:[e.BE]}]};return{aliases:["sh","zsh"],l:/\b-?[a-z\._]+\b/,k:{keyword:"if then else elif fi for while in do done case esac function",literal:"true false",built_in:"break cd continue eval exec exit export getopts hash pwd readonly return shift test times trap umask unset alias bind builtin caller command declare echo enable help let local logout mapfile printf read readarray source type typeset ulimit unalias set shopt autoload bg bindkey bye cap chdir clone comparguments compcall compctl compdescribe compfiles compgroups compquote comptags comptry compvalues dirs disable disown echotc echoti emulate fc fg float functions getcap getln history integer jobs kill limit log noglob popd print pushd pushln rehash sched setcap setopt stat suspend ttyctl unfunction unhash unlimit unsetopt vared wait whence where which zcompile zformat zftp zle zmodload zparseopts zprof zpty zregexparse zsocket zstyle ztcp",_:"-ne -eq -lt -gt -f -d -e -s -l -a"},c:[{cN:"meta",b:/^#![^\n]+sh\s*$/,r:10},{cN:"function",b:/\w[\w\d_]*\s*\(\s*\)\s*\{/,rB:!0,c:[e.inherit(e.TM,{b:/\w[\w\d_]*/})],r:0},e.HCM,r,{cN:"string",b:/'/,e:/'/},t]}}),hljs.registerLanguage("xml",function(e){var t={eW:!0,i:/</,r:0,c:[{cN:"attr",b:"[A-Za-z0-9\\._:-]+",r:0},{b:/=\s*/,r:0,c:[{cN:"string",endsParent:!0,v:[{b:/"/,e:/"/},{b:/'/,e:/'/},{b:/[^\s"'=<>`]+/}]}]}]};return{aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist"],cI:!0,c:[{cN:"meta",b:"<!DOCTYPE",e:">",r:10,c:[{b:"\\[",e:"\\]"}]},e.C("\x3c!--","--\x3e",{r:10}),{b:"<\\!\\[CDATA\\[",e:"\\]\\]>",r:10},{b:/<\?(php)?/,e:/\?>/,sL:"php",c:[{b:"/\\*",e:"\\*/",skip:!0}]},{cN:"tag",b:"<style(?=\\s|>|$)",e:">",k:{name:"style"},c:[t],starts:{e:"</style>",rE:!0,sL:["css","xml"]}},{cN:"tag",b:"<script(?=\\s|>|$)",e:">",k:{name:"script"},c:[t],starts:{e:"<\/script>",rE:!0,sL:["actionscript","javascript","handlebars","xml"]}},{cN:"meta",v:[{b:/<\?xml/,e:/\?>/,r:10},{b:/<\?\w+/,e:/\?>/}]},{cN:"tag",b:"</?",e:"/?>",c:[{cN:"name",b:/[^\/><\s]+/,r:0},t]}]}}),hljs.registerLanguage("json",function(e){var t={literal:"true false null"},r=[e.QSM,e.CNM],n={e:",",eW:!0,eE:!0,c:r,k:t},a={b:"{",e:"}",c:[{cN:"attr",b:/"/,e:/"/,c:[e.BE],i:"\\n"},e.inherit(n,{b:/:/})],i:"\\S"},c={b:"\\[",e:"\\]",c:[e.inherit(n)],i:"\\S"};return r.splice(r.length,0,a,c),{c:r,k:t,i:"\\S"}}),hljs.registerLanguage("javascript",function(e){var t="[A-Za-z$_][0-9A-Za-z$_]*",r={keyword:"in of if for while finally var new function do return void else break catch instanceof with throw case default try this switch continue typeof delete let yield const export super debugger as async await static import from as",literal:"true false null undefined NaN Infinity",built_in:"eval isFinite isNaN parseFloat parseInt decodeURI decodeURIComponent encodeURI encodeURIComponent escape unescape Object Function Boolean Error EvalError InternalError RangeError ReferenceError StopIteration SyntaxError TypeError URIError Number Math Date String RegExp Array Float32Array Float64Array Int16Array Int32Array Int8Array Uint16Array Uint32Array Uint8Array Uint8ClampedArray ArrayBuffer DataView JSON Intl arguments require module console window document Symbol Set Map WeakSet WeakMap Proxy Reflect Promise"},n={cN:"number",v:[{b:"\\b(0[bB][01]+)"},{b:"\\b(0[oO][0-7]+)"},{b:e.CNR}],r:0},a={cN:"subst",b:"\\$\\{",e:"\\}",k:r,c:[]},c={cN:"string",b:"`",e:"`",c:[e.BE,a]};a.c=[e.ASM,e.QSM,c,n,e.RM];var i=a.c.concat([e.CBCM,e.CLCM]);return{aliases:["js","jsx"],k:r,c:[{cN:"meta",r:10,b:/^\s*['"]use (strict|asm)['"]/},{cN:"meta",b:/^#!/,e:/$/},e.ASM,e.QSM,c,e.CLCM,e.CBCM,n,{b:/[{,]\s*/,r:0,c:[{b:t+"\\s*:",rB:!0,r:0,c:[{cN:"attr",b:t,r:0}]}]},{b:"("+e.RSR+"|\\b(case|return|throw)\\b)\\s*",k:"return throw case",c:[e.CLCM,e.CBCM,e.RM,{cN:"function",b:"(\\(.*?\\)|"+t+")\\s*=>",rB:!0,e:"\\s*=>",c:[{cN:"params",v:[{b:t},{b:/\(\s*\)/},{b:/\(/,e:/\)/,eB:!0,eE:!0,k:r,c:i}]}]},{b:/</,e:/(\/\w+|\w+\/)>/,sL:"xml",c:[{b:/<\w+\s*\/>/,skip:!0},{b:/<\w+/,e:/(\/\w+|\w+\/)>/,skip:!0,c:[{b:/<\w+\s*\/>/,skip:!0},"self"]}]}],r:0},{cN:"function",bK:"function",e:/\{/,eE:!0,c:[e.inherit(e.TM,{b:t}),{cN:"params",b:/\(/,e:/\)/,eB:!0,eE:!0,c:i}],i:/\[|%/},{b:/\$[(.]/},e.METHOD_GUARD,{cN:"class",bK:"class",e:/[{;=]/,eE:!0,i:/[:"\[\]]/,c:[{bK:"extends"},e.UTM]},{bK:"constructor",e:/\{/,eE:!0}],i:/#(?!!)/}});
</script>
<script>
  window.addEventListener('load', () => {
    hljs.initHighlighting();
  });
</script> <script>
  /*! lazysizes - v4.0.3 */
  !function(a,b){var c=b(a,a.document);a.lazySizes=c,"object"==typeof module&&module.exports&&(module.exports=c)}(window,function(a,b){"use strict";if(b.getElementsByClassName){var c,d,e=b.documentElement,f=a.Date,g=a.HTMLPictureElement,h="addEventListener",i="getAttribute",j=a[h],k=a.setTimeout,l=a.requestAnimationFrame||k,m=a.requestIdleCallback,n=/^picture$/i,o=["load","error","lazyincluded","_lazyloaded"],p={},q=Array.prototype.forEach,r=function(a,b){return p[b]||(p[b]=new RegExp("(\\s|^)"+b+"(\\s|$)")),p[b].test(a[i]("class")||"")&&p[b]},s=function(a,b){r(a,b)||a.setAttribute("class",(a[i]("class")||"").trim()+" "+b)},t=function(a,b){var c;(c=r(a,b))&&a.setAttribute("class",(a[i]("class")||"").replace(c," "))},u=function(a,b,c){var d=c?h:"removeEventListener";c&&u(a,b),o.forEach(function(c){a[d](c,b)})},v=function(a,d,e,f,g){var h=b.createEvent("CustomEvent");return e||(e={}),e.instance=c,h.initCustomEvent(d,!f,!g,e),a.dispatchEvent(h),h},w=function(b,c){var e;!g&&(e=a.picturefill||d.pf)?e({reevaluate:!0,elements:[b]}):c&&c.src&&(b.src=c.src)},x=function(a,b){return(getComputedStyle(a,null)||{})[b]},y=function(a,b,c){for(c=c||a.offsetWidth;c<d.minSize&&b&&!a._lazysizesWidth;)c=b.offsetWidth,b=b.parentNode;return c},z=function(){var a,c,d=[],e=[],f=d,g=function(){var b=f;for(f=d.length?e:d,a=!0,c=!1;b.length;)b.shift()();a=!1},h=function(d,e){a&&!e?d.apply(this,arguments):(f.push(d),c||(c=!0,(b.hidden?k:l)(g)))};return h._lsFlush=g,h}(),A=function(a,b){return b?function(){z(a)}:function(){var b=this,c=arguments;z(function(){a.apply(b,c)})}},B=function(a){var b,c=0,e=d.throttleDelay,g=d.ricTimeout,h=function(){b=!1,c=f.now(),a()},i=m&&g>49?function(){m(h,{timeout:g}),g!==d.ricTimeout&&(g=d.ricTimeout)}:A(function(){k(h)},!0);return function(a){var d;(a=a===!0)&&(g=33),b||(b=!0,d=e-(f.now()-c),0>d&&(d=0),a||9>d?i():k(i,d))}},C=function(a){var b,c,d=99,e=function(){b=null,a()},g=function(){var a=f.now()-c;d>a?k(g,d-a):(m||e)(e)};return function(){c=f.now(),b||(b=k(g,d))}};!function(){var b,c={lazyClass:"lazyload",loadedClass:"lazyloaded",loadingClass:"lazyloading",preloadClass:"lazypreload",errorClass:"lazyerror",autosizesClass:"lazyautosizes",srcAttr:"data-src",srcsetAttr:"data-srcset",sizesAttr:"data-sizes",minSize:40,customMedia:{},init:!0,expFactor:1.5,hFac:.8,loadMode:2,loadHidden:!0,ricTimeout:0,throttleDelay:125};d=a.lazySizesConfig||a.lazysizesConfig||{};for(b in c)b in d||(d[b]=c[b]);a.lazySizesConfig=d,k(function(){d.init&&F()})}();var D=function(){var g,l,m,o,p,y,D,F,G,H,I,J,K,L,M=/^img$/i,N=/^iframe$/i,O="onscroll"in a&&!/glebot/.test(navigator.userAgent),P=0,Q=0,R=0,S=-1,T=function(a){R--,a&&a.target&&u(a.target,T),(!a||0>R||!a.target)&&(R=0)},U=function(a,c){var d,f=a,g="hidden"==x(b.body,"visibility")||"hidden"!=x(a,"visibility");for(F-=c,I+=c,G-=c,H+=c;g&&(f=f.offsetParent)&&f!=b.body&&f!=e;)g=(x(f,"opacity")||1)>0,g&&"visible"!=x(f,"overflow")&&(d=f.getBoundingClientRect(),g=H>d.left&&G<d.right&&I>d.top-1&&F<d.bottom+1);return g},V=function(){var a,f,h,j,k,m,n,p,q,r=c.elements;if((o=d.loadMode)&&8>R&&(a=r.length)){f=0,S++,null==K&&("expand"in d||(d.expand=e.clientHeight>500&&e.clientWidth>500?500:370),J=d.expand,K=J*d.expFactor),K>Q&&1>R&&S>2&&o>2&&!b.hidden?(Q=K,S=0):Q=o>1&&S>1&&6>R?J:P;for(;a>f;f++)if(r[f]&&!r[f]._lazyRace)if(O)if((p=r[f][i]("data-expand"))&&(m=1*p)||(m=Q),q!==m&&(y=innerWidth+m*L,D=innerHeight+m,n=-1*m,q=m),h=r[f].getBoundingClientRect(),(I=h.bottom)>=n&&(F=h.top)<=D&&(H=h.right)>=n*L&&(G=h.left)<=y&&(I||H||G||F)&&(d.loadHidden||"hidden"!=x(r[f],"visibility"))&&(l&&3>R&&!p&&(3>o||4>S)||U(r[f],m))){if(ba(r[f]),k=!0,R>9)break}else!k&&l&&!j&&4>R&&4>S&&o>2&&(g[0]||d.preloadAfterLoad)&&(g[0]||!p&&(I||H||G||F||"auto"!=r[f][i](d.sizesAttr)))&&(j=g[0]||r[f]);else ba(r[f]);j&&!k&&ba(j)}},W=B(V),X=function(a){s(a.target,d.loadedClass),t(a.target,d.loadingClass),u(a.target,Z),v(a.target,"lazyloaded")},Y=A(X),Z=function(a){Y({target:a.target})},$=function(a,b){try{a.contentWindow.location.replace(b)}catch(c){a.src=b}},_=function(a){var b,c=a[i](d.srcsetAttr);(b=d.customMedia[a[i]("data-media")||a[i]("media")])&&a.setAttribute("media",b),c&&a.setAttribute("srcset",c)},aa=A(function(a,b,c,e,f){var g,h,j,l,o,p;(o=v(a,"lazybeforeunveil",b)).defaultPrevented||(e&&(c?s(a,d.autosizesClass):a.setAttribute("sizes",e)),h=a[i](d.srcsetAttr),g=a[i](d.srcAttr),f&&(j=a.parentNode,l=j&&n.test(j.nodeName||"")),p=b.firesLoad||"src"in a&&(h||g||l),o={target:a},p&&(u(a,T,!0),clearTimeout(m),m=k(T,2500),s(a,d.loadingClass),u(a,Z,!0)),l&&q.call(j.getElementsByTagName("source"),_),h?a.setAttribute("srcset",h):g&&!l&&(N.test(a.nodeName)?$(a,g):a.src=g),f&&(h||l)&&w(a,{src:g})),a._lazyRace&&delete a._lazyRace,t(a,d.lazyClass),z(function(){(!p||a.complete&&a.naturalWidth>1)&&(p?T(o):R--,X(o))},!0)}),ba=function(a){var b,c=M.test(a.nodeName),e=c&&(a[i](d.sizesAttr)||a[i]("sizes")),f="auto"==e;(!f&&l||!c||!a[i]("src")&&!a.srcset||a.complete||r(a,d.errorClass)||!r(a,d.lazyClass))&&(b=v(a,"lazyunveilread").detail,f&&E.updateElem(a,!0,a.offsetWidth),a._lazyRace=!0,R++,aa(a,b,f,e,c))},ca=function(){if(!l){if(f.now()-p<999)return void k(ca,999);var a=C(function(){d.loadMode=3,W()});l=!0,d.loadMode=3,W(),j("scroll",function(){3==d.loadMode&&(d.loadMode=2),a()},!0)}};return{_:function(){p=f.now(),c.elements=b.getElementsByClassName(d.lazyClass),g=b.getElementsByClassName(d.lazyClass+" "+d.preloadClass),L=d.hFac,j("scroll",W,!0),j("resize",W,!0),a.MutationObserver?new MutationObserver(W).observe(e,{childList:!0,subtree:!0,attributes:!0}):(e[h]("DOMNodeInserted",W,!0),e[h]("DOMAttrModified",W,!0),setInterval(W,999)),j("hashchange",W,!0),["focus","mouseover","click","load","transitionend","animationend","webkitAnimationEnd"].forEach(function(a){b[h](a,W,!0)}),/d$|^c/.test(b.readyState)?ca():(j("load",ca),b[h]("DOMContentLoaded",W),k(ca,2e4)),c.elements.length?(V(),z._lsFlush()):W()},checkElems:W,unveil:ba}}(),E=function(){var a,c=A(function(a,b,c,d){var e,f,g;if(a._lazysizesWidth=d,d+="px",a.setAttribute("sizes",d),n.test(b.nodeName||""))for(e=b.getElementsByTagName("source"),f=0,g=e.length;g>f;f++)e[f].setAttribute("sizes",d);c.detail.dataAttr||w(a,c.detail)}),e=function(a,b,d){var e,f=a.parentNode;f&&(d=y(a,f,d),e=v(a,"lazybeforesizes",{width:d,dataAttr:!!b}),e.defaultPrevented||(d=e.detail.width,d&&d!==a._lazysizesWidth&&c(a,f,e,d)))},f=function(){var b,c=a.length;if(c)for(b=0;c>b;b++)e(a[b])},g=C(f);return{_:function(){a=b.getElementsByClassName(d.autosizesClass),j("resize",g)},checkElems:g,updateElem:e}}(),F=function(){F.i||(F.i=!0,E._(),D._())};return c={cfg:d,autoSizer:E,loader:D,init:F,uP:w,aC:s,rC:t,hC:r,fire:v,gW:y,rAF:z}}});
</script>
 <script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('/service-worker.js').then(registration => {
        console.log('service worker registration was successful')
      }, err => {
        console.log('service worker registration failed')
      });
    });
  }
</script>
  
    <script>
  window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
  ga('create', 'UA-66348622-2', 'auto');
  ga('send', 'pageview');
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
  
</body>

</html>