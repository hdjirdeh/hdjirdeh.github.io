<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Building Hacker News with Angular 2 CLI, RxJS and Webpack</title>
  <meta name="description" content="If you have ever built an Angular 2 application before, you'll know that setting up and bootstrapping an application can take a significant amount of ti...">

  <!-- Schema.org markup for Google+ -->
  
  <meta itemprop="name" content="Building Hacker News with Angular 2 CLI, RxJS and Webpack">  
  <meta itemprop="description" content="If you have ever built an Angular 2 application before, you'll know that setting up and bootstrapping an application can take a significant amount of time. Thankfully, the Angular team has rolled out Angular CLI, a command line interface that makes creating and scaffolding an application significantly easier...">  
  <meta itemprop="image" content="https://houssein.me/public/angular2-hn.jpg"> 

  <!-- Twitter Card data -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@hdjirdeh">
  <meta name="twitter:creator" content="@hdjirdeh"> 
  <meta name="twitter:title" content="Building Hacker News with Angular 2 CLI, RxJS and Webpack">  
  <meta name="twitter:url" content="https://houssein.me/angular2-hacker-news">  
  <meta name="twitter:description" content="If you have ever built an Angular 2 application before, you'll know that setting up and bootstrapping an application can take a significant amount of time. Thankfully, the Angular team has rolled o...">  
  <meta name="twitter:image" content="https://houssein.me/public/angular2-hn.jpg"> 

  <!-- Open Graph data -->
  
  <meta property="og:title" content="Building Hacker News with Angular 2 CLI, RxJS and Webpack"> 
  <meta property="og:type" content="article" /> 
  <meta property="og:url" content="https://houssein.me/angular2-hacker-news">  
  <meta property="og:image" content="https://houssein.me/public/angular2-hn.jpg">  
  <meta property="og:description" content="If you have ever built an Angular 2 application before, you'll know that setting up and bootstrapping an application can take a significant amount of time. Thankfully, the Angular team has rolled o...">  
  <meta property="article:published_time" content="2016-09-16 13:20:00 +0000" />
  <meta property="article:modified_time" content="2016-09-16 13:20:00 +0000" /> 
  <meta property="fb:admins" content="1518546144" />
  
  <!-- Icons -->
  <meta name="msapplication-TileColor" content="#b91d47">
	<meta name="msapplication-TileImage" content="/icons/mstile-150x150.png">
  <meta name="msapplication-config" content="/icons/browserconfig.xml">

	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="default">

  <link rel="manifest" href="/icons/site.webmanifest">
  <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#d0113f">

  <link rel="shortcut icon" type="image/x-icon" href="/icons/favicon.ico" />
  <link rel="shortcut icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="shortcut icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">

  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-touch-icon.png">
	<link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-touch-icon-120x120.png">
	<link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-touch-icon-152x152.png">
	<link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-touch-icon-180x180.png">

  <meta name="theme-color" content="#ffffff">

  <link rel="canonical" href="https://houssein.me/angular2-hacker-news">
  <link rel="author" href="https://plus.google.com/109730836902589271473" />
  <link rel="alternate" type="application/rss+xml" title="Houssein Djirdeh" href="https://houssein.me/feed.xml">  
  <style>
    /*! TACHYONS v4.9.1 | http://tachyons.io  (SELECTED STYLES) */
    .dim:active,.dim:focus,.dim:hover{-webkit-backface-visibility:hidden}.f-6,.f-headline{font-size:6rem}.f-5,.f-subheadline{font-size:5rem}.f1{font-size:3rem}.f2{font-size:2.25rem}.f3{font-size:1.5rem}.f4{font-size:1.25rem}.f5{font-size:1rem}.f6{font-size:.875rem}.f7{font-size:.75rem}.br0{border-radius:0}.br1{border-radius:.125rem}.br2{border-radius:.25rem}.br3{border-radius:.5rem}.br4{border-radius:1rem}@media screen and (min-width:30em){.f1-ns{font-size:3rem}.f2-ns{font-size:2.25rem}.f3-ns{font-size:1.5rem}.f4-ns{font-size:1.25rem}.f5-ns{font-size:1rem}.f6-ns{font-size:.875rem}.f7-ns{font-size:.75rem}.fw1-ns{font-weight:100}.fw2-ns{font-weight:200}.fw3-ns{font-weight:300}.fw4-ns{font-weight:400}.fw5-ns{font-weight:500}.fw6-ns{font-weight:600}.fw7-ns{font-weight:700}.fw8-ns{font-weight:800}.fw9-ns{font-weight:900}.pa0-ns{padding:0}.pa1-ns{padding:.25rem}.pa2-ns{padding:.5rem}.pa3-ns{padding:1rem}.pa4-ns{padding:2rem}.pa5-ns{padding:4rem}.pa6-ns{padding:8rem}.pa7-ns{padding:16rem}.pl0-ns{padding-left:0}.pl1-ns{padding-left:.25rem}.pl2-ns{padding-left:.5rem}.pl3-ns{padding-left:1rem}.pl4-ns{padding-left:2rem}.pl5-ns{padding-left:4rem}.pl6-ns{padding-left:8rem}.pl7-ns{padding-left:16rem}.pr0-ns{padding-right:0}.pr1-ns{padding-right:.25rem}.pr2-ns{padding-right:.5rem}.pr3-ns{padding-right:1rem}.pr4-ns{padding-right:2rem}.pr5-ns{padding-right:4rem}.pr6-ns{padding-right:8rem}.pr7-ns{padding-right:16rem}.pb0-ns{padding-bottom:0}.pb1-ns{padding-bottom:.25rem}.pb2-ns{padding-bottom:.5rem}.pb3-ns{padding-bottom:1rem}.pb4-ns{padding-bottom:2rem}.pb5-ns{padding-bottom:4rem}.pb6-ns{padding-bottom:8rem}.pb7-ns{padding-bottom:16rem}.pt0-ns{padding-top:0}.pt1-ns{padding-top:.25rem}.pt2-ns{padding-top:.5rem}.pt3-ns{padding-top:1rem}.pt4-ns{padding-top:2rem}.pt5-ns{padding-top:4rem}.pt6-ns{padding-top:8rem}.pt7-ns{padding-top:16rem}.pv0-ns{padding-top:0;padding-bottom:0}.pv1-ns{padding-top:.25rem;padding-bottom:.25rem}.pv2-ns{padding-top:.5rem;padding-bottom:.5rem}.pv3-ns{padding-top:1rem;padding-bottom:1rem}.pv4-ns{padding-top:2rem;padding-bottom:2rem}.pv5-ns{padding-top:4rem;padding-bottom:4rem}.pv6-ns{padding-top:8rem;padding-bottom:8rem}.pv7-ns{padding-top:16rem;padding-bottom:16rem}.ph0-ns{padding-left:0;padding-right:0}.ph1-ns{padding-left:.25rem;padding-right:.25rem}.ph2-ns{padding-left:.5rem;padding-right:.5rem}.ph3-ns{padding-left:1rem;padding-right:1rem}.ph4-ns{padding-left:2rem;padding-right:2rem}.ph5-ns{padding-left:4rem;padding-right:4rem}.ph6-ns{padding-left:8rem;padding-right:8rem}.ph7-ns{padding-left:16rem;padding-right:16rem}.ma0-ns{margin:0}.ma1-ns{margin:.25rem}.ma2-ns{margin:.5rem}.ma3-ns{margin:1rem}.ma4-ns{margin:2rem}.ma5-ns{margin:4rem}.ma6-ns{margin:8rem}.ma7-ns{margin:16rem}.ml0-ns{margin-left:0}.ml1-ns{margin-left:.25rem}.ml2-ns{margin-left:.5rem}.ml3-ns{margin-left:1rem}.ml4-ns{margin-left:2rem}.ml5-ns{margin-left:4rem}.ml6-ns{margin-left:8rem}.ml7-ns{margin-left:16rem}.mr0-ns{margin-right:0}.mr1-ns{margin-right:.25rem}.mr2-ns{margin-right:.5rem}.mr3-ns{margin-right:1rem}.mr4-ns{margin-right:2rem}.mr5-ns{margin-right:4rem}.mr6-ns{margin-right:8rem}.mr7-ns{margin-right:16rem}.mb0-ns{margin-bottom:0}.mb1-ns{margin-bottom:.25rem}.mb2-ns{margin-bottom:.5rem}.mb3-ns{margin-bottom:1rem}.mb4-ns{margin-bottom:2rem}.mb5-ns{margin-bottom:4rem}.mb6-ns{margin-bottom:8rem}.mb7-ns{margin-bottom:16rem}.mt0-ns{margin-top:0}.mt1-ns{margin-top:.25rem}.mt2-ns{margin-top:.5rem}.mt3-ns{margin-top:1rem}.mt4-ns{margin-top:2rem}.mt5-ns{margin-top:4rem}.mt6-ns{margin-top:8rem}.mt7-ns{margin-top:16rem}.mv0-ns{margin-top:0;margin-bottom:0}.mv1-ns{margin-top:.25rem;margin-bottom:.25rem}.mv2-ns{margin-top:.5rem;margin-bottom:.5rem}.mv3-ns{margin-top:1rem;margin-bottom:1rem}.mv4-ns{margin-top:2rem;margin-bottom:2rem}.mv5-ns{margin-top:4rem;margin-bottom:4rem}.mv6-ns{margin-top:8rem;margin-bottom:8rem}.mv7-ns{margin-top:16rem;margin-bottom:16rem}.mh0-ns{margin-left:0;margin-right:0}.mh1-ns{margin-left:.25rem;margin-right:.25rem}.mh2-ns{margin-left:.5rem;margin-right:.5rem}.mh3-ns{margin-left:1rem;margin-right:1rem}.mh4-ns{margin-left:2rem;margin-right:2rem}.mh5-ns{margin-left:4rem;margin-right:4rem}.mh6-ns{margin-left:8rem;margin-right:8rem}.mh7-ns{margin-left:16rem;margin-right:16rem}.mw1-ns{max-width:1rem}.mw2-ns{max-width:2rem}.mw3-ns{max-width:4rem}.mw4-ns{max-width:8rem}.mw5-ns{max-width:16rem}.mw6-ns{max-width:32rem}.mw7-ns{max-width:48rem}.mw8-ns{max-width:64rem}.mw9-ns{max-width:96rem}}.normal{font-weight:400}.b{font-weight:700}.fw1{font-weight:100}.fw2{font-weight:200}.fw3{font-weight:300}.fw4{font-weight:400}.fw5{font-weight:500}.fw6{font-weight:600}.fw7{font-weight:700}.fw8{font-weight:800}.fw9{font-weight:900}.near-black{color:#111}.white{color:#fff}.ttl{text-transform:lowercase}.flex{display:-webkit-box;display:-ms-flexbox;display:flex}.flex-column{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.items-start{-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start}.items-end{-webkit-box-align:end;-ms-flex-align:end;align-items:flex-end}.items-center{-webkit-box-align:center;-ms-flex-align:center;align-items:center}.justify-center{-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.justify-between{-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.pa0{padding:0}.pa1{padding:.25rem}.pa2{padding:.5rem}.pa3{padding:1rem}.pa4{padding:2rem}.pa5{padding:4rem}.pa6{padding:8rem}.pa7{padding:16rem}.pl0{padding-left:0}.pl1{padding-left:.25rem}.pl2{padding-left:.5rem}.pl3{padding-left:1rem}.pl4{padding-left:2rem}.pl5{padding-left:4rem}.pl6{padding-left:8rem}.pl7{padding-left:16rem}.pr0{padding-right:0}.pr1{padding-right:.25rem}.pr2{padding-right:.5rem}.pr3{padding-right:1rem}.pr4{padding-right:2rem}.pr5{padding-right:4rem}.pr6{padding-right:8rem}.pr7{padding-right:16rem}.pb0{padding-bottom:0}.pb1{padding-bottom:.25rem}.pb2{padding-bottom:.5rem}.pb3{padding-bottom:1rem}.pb4{padding-bottom:2rem}.pb5{padding-bottom:4rem}.pb6{padding-bottom:8rem}.pb7{padding-bottom:16rem}.pt0{padding-top:0}.pt1{padding-top:.25rem}.pt2{padding-top:.5rem}.pt3{padding-top:1rem}.pt4{padding-top:2rem}.pt5{padding-top:4rem}.pt6{padding-top:8rem}.pt7{padding-top:16rem}.pv0{padding-top:0;padding-bottom:0}.pv1{padding-top:.25rem;padding-bottom:.25rem}.pv2{padding-top:.5rem;padding-bottom:.5rem}.pv3{padding-top:1rem;padding-bottom:1rem}.pv4{padding-top:2rem;padding-bottom:2rem}.pv5{padding-top:4rem;padding-bottom:4rem}.pv6{padding-top:8rem;padding-bottom:8rem}.pv7{padding-top:16rem;padding-bottom:16rem}.ph0{padding-left:0;padding-right:0}.ph1{padding-left:.25rem;padding-right:.25rem}.ph2{padding-left:.5rem;padding-right:.5rem}.ph3{padding-left:1rem;padding-right:1rem}.ph4{padding-left:2rem;padding-right:2rem}.ph5{padding-left:4rem;padding-right:4rem}.ph6{padding-left:8rem;padding-right:8rem}.ph7{padding-left:16rem;padding-right:16rem}.ma0{margin:0}.ma1{margin:.25rem}.ma2{margin:.5rem}.ma3{margin:1rem}.ma4{margin:2rem}.ma5{margin:4rem}.ma6{margin:8rem}.ma7{margin:16rem}.ml0{margin-left:0}.ml1{margin-left:.25rem}.ml2{margin-left:.5rem}.ml3{margin-left:1rem}.ml4{margin-left:2rem}.ml5{margin-left:4rem}.ml6{margin-left:8rem}.ml7{margin-left:16rem}.mr0{margin-right:0}.mr1{margin-right:.25rem}.mr2{margin-right:.5rem}.mr3{margin-right:1rem}.mr4{margin-right:2rem}.mr5{margin-right:4rem}.mr6{margin-right:8rem}.mr7{margin-right:16rem}.mb0{margin-bottom:0}.mb1{margin-bottom:.25rem}.mb2{margin-bottom:.5rem}.mb3{margin-bottom:1rem}.mb4{margin-bottom:2rem}.mb5{margin-bottom:4rem}.mb6{margin-bottom:8rem}.mb7{margin-bottom:16rem}.mt0{margin-top:0}.mt1{margin-top:.25rem}.mt2{margin-top:.5rem}.mt3{margin-top:1rem}.mt4{margin-top:2rem}.mt5{margin-top:4rem}.mt6{margin-top:8rem}.mt7{margin-top:16rem}.mv0{margin-top:0;margin-bottom:0}.mv1{margin-top:.25rem;margin-bottom:.25rem}.mv2{margin-top:.5rem;margin-bottom:.5rem}.mv3{margin-top:1rem;margin-bottom:1rem}.mv4{margin-top:2rem;margin-bottom:2rem}.mv5{margin-top:4rem;margin-bottom:4rem}.mv6{margin-top:8rem;margin-bottom:8rem}.mv7{margin-top:16rem;margin-bottom:16rem}.mh0{margin-left:0;margin-right:0}.mh1{margin-left:.25rem;margin-right:.25rem}.mh2{margin-left:.5rem;margin-right:.5rem}.mh3{margin-left:1rem;margin-right:1rem}.mh4{margin-left:2rem;margin-right:2rem}.mh5{margin-left:4rem;margin-right:4rem}.mh6{margin-left:8rem;margin-right:8rem}.mh7{margin-left:16rem;margin-right:16rem}.mw1{max-width:1rem}.mw2{max-width:2rem}.mw3{max-width:4rem}.mw4{max-width:8rem}.mw5{max-width:16rem}.mw6{max-width:32rem}.mw7{max-width:48rem}.mw8{max-width:64rem}.mw9{max-width:96rem}.w-100{width:100%}.dim{opacity:1;-webkit-transition:opacity .15s ease-in;transition:opacity .15s ease-in}.dim:focus,.dim:hover{backface-visibility:hidden;opacity:.5;-webkit-transition:opacity .15s ease-in;transition:opacity .15s ease-in}.dim:active{backface-visibility:hidden;opacity:.8;-webkit-transition:opacity .15s ease-out;transition:opacity .15s ease-out}.grow{-moz-osx-font-smoothing:grayscale;-webkit-backface-visibility:hidden;backface-visibility:hidden;-webkit-transform:translateZ(0);transform:translateZ(0);-webkit-transition:-webkit-transform .25s ease-out;transition:-webkit-transform .25s ease-out;transition:transform .25s ease-out;transition:transform .25s ease-out,-webkit-transform .25s ease-out}.grow:focus,.grow:hover{-webkit-transform:scale(1.05);transform:scale(1.05)}.grow:active{-webkit-transform:scale(.9);transform:scale(.9)}.dib{display:inline-block}.h1{height:1rem}.h2{height:2rem}.h3{height:4rem}.h4{height:8rem}.h5{height:16rem}.bb{border-bottom-style:solid;border-bottom-width:1px}.bt{border-top-style:solid;border-top-width:1px}.link{text-decoration:none;-webkit-transition:color .15s ease-in;transition:color .15s ease-in}.link:active,.link:hover,.link:link,.link:visited{-webkit-transition:color .15s ease-in;transition:color .15s ease-in}.link:focus{-webkit-transition:color .15s ease-in;transition:color .15s ease-in;outline:currentColor dotted 1px}.center{margin-right:auto;margin-left:auto}img,video{max-width:100%}    
    /* Extra styles */
    #markup video,body,html{width:100%}#markup aside a,#markup li a,#markup p a,.link-effect{text-decoration:none;transition:color .15s ease-in;border-bottom:1px solid #d0113f}#markup aside p,#markup figure,body,html{margin:0}body,html{padding:0;background:#fff;font-family:avenir next,avenir,helvetica neue,helvetica,ubuntu,roboto,noto,segoe ui,arial,sans-serif;font-weight:400;color:#444;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}#markup aside ol,#markup aside p,#markup aside ul{font-weight:500}*{box-sizing:border-box}.hover-red:hover,.red{color:#d0113f}.bg-red{background-color:#d0113f}#home-icon-container{transition:all .15s ease-in-out}#home-icon-container:hover #home-icon{fill:#d0113f}.lh-copy{line-height:1.7}#markup h2,#markup h3,#markup h4{margin-top:3rem;margin-bottom:1rem}#markup aside{margin:30px 0;background:#f1ece9;padding:25px;border-radius:10px}#markup aside.secondary{background:#e3f3f9}#markup aside a,#markup li a,#markup p a{font-weight:600;color:#d0113f;-webkit-box-shadow:inset 0 -2px 0 0 #d0113f;box-shadow:inset 0 -2px 0 0 #d0113f;padding-bottom:2px}#markup aside a:hover,#markup blockquote footer,#markup li a:hover,#markup p a:hover{color:#111}#markup aside h1,#markup aside h2,#markup aside h3,#markup aside h4{margin-top:0}#markup aside img{margin-top:2rem}#markup blockquote{color:#767676;border-left:4px solid #e9e9e9;padding-left:15px;letter-spacing:-1px;font-style:italic;margin:0}#markup li code,#markup p code{background:#f8f8f8;padding:5px}#markup figure code,#markup figure li code{background:#f8f8f8;font-size:.95rem;padding:1rem}@media (max-width:30rem){#markup figure code,#markup figure li code{font-size:.8rem}}#markup img{left:50%;position:relative;transform:translate(-50%,0);top:50%;margin:0 -50% 0 0}@media (min-width:560px){#markup img.small,video.small{max-width:500px}}#markup img.shadow,video.shadow{box-shadow:0 1px 16px 0 rgba(0,0,0,.2),0 2px 8px 0 rgba(0,0,0,.14),0 4px 8px -1px rgba(0,0,0,.12)}#markup .image-source{font-size:16px;margin:0 0 3rem;text-align:center;letter-spacing:.02rem;color:#d0113f;font-weight:700}#markup .image-source.no-margin{margin-bottom:0}.link-effect{font-weight:600;color:#d0113f;-webkit-box-shadow:inset 0 -2px 0 0 #d0113f;box-shadow:inset 0 -2px 0 0 #d0113f;padding-bottom:2px}.link-effect:hover{color:#111}
    /* Github Highlight */
    /* GitHub highlight (slightly modified) */
    .hljs{display:block;overflow-x:auto;padding:0.5em;color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#404040;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:bold}.hljs-number,.hljs-literal,.hljs-variable,.hljs-template-variable,.hljs-tag .hljs-attr{color:#045252}.hljs-string,.hljs-doctag{color:#d14}.hljs-title,.hljs-section,.hljs-selector-id{color:#900;font-weight:bold}.hljs-subst{font-weight:normal}.hljs-type,.hljs-class .hljs-title{color:#458;font-weight:bold}.hljs-tag,.hljs-name,.hljs-attribute{color:#000080;font-weight:normal}.hljs-regexp,.hljs-link{color:#014c13}.hljs-symbol,.hljs-bullet{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#004d67}.hljs-meta{color:#999;font-weight:bold}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:bold}
  </style>
</head>

<body>

  <div class="flex flex-column items-center justify-between">
    <header class="h5 flex items-center">
  <a id="home-icon-container" href="/" aria-label="Home"><svg width="50" height="50" preserveAspectRatio="none" viewBox="0 0 350 350">
  <defs>
    <clipPath id="a">
      <path d="M0 300h500V0H0z"/>
    </clipPath>
  </defs>
  <g clip-path="url(#a)" transform="matrix(1.33333 0 0 -1.33333 -150 390)">
    <path id="home-icon" fill="#1d1d1d" d="M237.4502 130.5498c5 4.967 11.017 7.45 18.05 7.45 7.033 0 13.033-2.483 18-7.45 5-5 7.5-11.017 7.5-18.05 0-7.033-2.5-13.033-7.5-18-4.967-5-10.967-7.5-18-7.5-7.033 0-13.05 2.5-18.05 7.5-4.967 4.967-7.45 10.967-7.45 18 0 7.033 2.483 13.05 7.45 18.05m87.3 56.85l15.099-15.1c2.368-2.367 2.384-4.716.051-7.05l-17.15-17.15c-2.366-2.366-4.734-2.366-7.1 0l-59.551 59.55-59.299-59.3c-.5-.5-.983-.883-1.45-1.15l-53.95-53.95c-2.367-2.366-4.734-2.366-7.1 0l-17.15 17.151c-2.333 2.333-2.317 4.682.05 7.049l61.15 61.15h.3l55.1 55.1h.35l7.85 7.85c4.6 4.6 9.2 6.95 13.8 7.05h.599c3.467-.067 6.934-1.417 10.401-4.05l13.65-12.6-.1-.1 23.2-23.2v13.2c0 3.333 1.667 5 5 5h11.25c3.333 0 5-1.667 5-5z" fill-rule="evenodd"/>
  </g>
</svg></a>
</header>
  </div>

  <div class="flex flex-column justify-between mw7 pb5 center w-100 ph4">
    <div class="flex flex-column mt2 mb5">
      <h1 class="f3 f1-ns ttl mb2 near-black lh-title">
        Building Hacker News with Angular 2 CLI, RxJS and Webpack
      </h1>
      <time class="f5 fw6 red" datetime="2016-09-16 13:20:00 +0000">September 16, 2016</time>
    </div>
    <div id="markup" class="f5 f4-ns lh-copy near-black">
      <p>If you have ever built an Angular 2 application before, you’ll know that setting up and bootstrapping an application can take a significant amount of time. Thankfully, the Angular team have rolled out <a href="https://cli.angular.io/">Angular CLI</a>, a command line interface that makes creating and scaffolding an application significantly easier.</p>

<p>In this post, we’ll build an entire <a href="https://news.ycombinator.com/">Hacker News</a> client using Angular CLI, RxJS Observables and Webpack as our module loader.</p>

<div class="flex items-center justify-center h3">
  <a class="f6 fw6 link dim ph3 pv2 mb2 dib white bg-red mr2 ttu br2" href="https://angular2-hn.firebaseapp.com/">View App</a>
  <a class="f6 fw6 link dim ph3 pv2 mb2 dib white bg-red ttu br2" href="https://github.com/housseindjirdeh/angular2-hn/tree/version-1">Source Code</a>
</div>

<p><img alt="angular 2 hn preview" title="angular 2 hn preview" data-src="https://i.imgur.com/VLKj7xr.png" class="lazyload" /></p>

<p>We’ll go through building the entire application step by step. Throughout this post, I’ll try my best to explain my thought process as well as some of the mistakes I’ve made and what I did to fix them.</p>

<p>Here’s a rundown of what we’ll be doing.</p>

<ol>
  <li>We’ll start by building our basic setup first, the front page of Hacker News</li>
  <li>We’ll then wrap an Observable Data Service to load data asynchronously</li>
  <li>To allow the user to navigate between different pages and story types, we’ll add routing using the <a href="https://angular.io/docs/ts/latest/guide/router.html">Angular Component Router</a></li>
  <li>Finally, we’ll add routes to allow the user to navigate to item comments and user profiles.</li>
</ol>

<p>This visual tutorial should make you feel a little more comfortable building an Angular 2 application from small modular parts as well as creating an app from scratch all the way to completion. We’ll also briefly go over some important topics and understand how they apply to an actual application, which includes:</p>

<ol>
  <li>The <code class="highlighter-rouge">NgModule</code> decorator<br /></li>
  <li>View Encapsulation<br /></li>
  <li>RxJS</li>
</ol>

<h2 id="getting-started">Getting Started</h2>

<p>Once you have the required <a href="https://github.com/angular/angular-cli#prerequisites">Node and NPM versions</a>, you can install the CLI through your terminal.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">npm install <span class="nt">-g</span> @angular/cli</code></pre></figure>

<p>You can then create and start your application.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">ng new angular2-hn
<span class="nb">cd </span>angular2-hn
ng serve</code></pre></figure>

<p>If you now open <code class="highlighter-rouge">https://localhost:4200/</code>, you’ll see the application running.</p>

<p><img alt="App Setup" title="App Setup" data-src="https://i.imgur.com/4ME0JaW.png" class="lazyload shadow" /></p>

<p>Pretty cool huh? Angular CLI used to use <a href="https://github.com/systemjs/systemjs">SystemJS</a> as the module bundler and loader. Using SystemJS had a few quirks including long loading times and a lengthy process just to add third party libraries. So to make things simpler and faster, the Angular CLI team have moved from <a href="https://github.com/angular/angular-cli/blob/master/CHANGELOG.md#100-beta11-webpack-2016-08-02">SystemJS to Webpack!</a></p>

<h2 id="ngmodule">NgModule</h2>

<p>Bootstrapping an application with CLI uses Angular’s latest release version, but let’s go over one of the biggest changes that happened with the release of <a href="https://angularjs.blogspot.se/2016/08/angular-2-rc5-ngmodules-lazy-loading.html">RC5</a>, the <code class="highlighter-rouge">@NgModule</code> decorator. We can see it being used in the <code class="highlighter-rouge">app.module.ts</code> file.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// app.module.ts</span>

<span class="k">import</span> <span class="p">{</span> <span class="nx">BrowserModule</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'@angular/platform-browser'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">NgModule</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'@angular/core'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">FormsModule</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'@angular/forms'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">HttpModule</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'@angular/http'</span><span class="p">;</span>

<span class="k">import</span> <span class="p">{</span> <span class="nx">AppComponent</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'./app.component'</span><span class="p">;</span>

<span class="p">@</span><span class="nd">NgModule</span><span class="p">({</span>
  <span class="na">declarations</span><span class="p">:</span> <span class="p">[</span>
    <span class="nx">AppComponent</span>
  <span class="p">],</span>
  <span class="na">imports</span><span class="p">:</span> <span class="p">[</span>
    <span class="nx">BrowserModule</span><span class="p">,</span>
    <span class="nx">FormsModule</span><span class="p">,</span>
    <span class="nx">HttpModule</span>
  <span class="p">],</span>
  <span class="na">providers</span><span class="p">:</span> <span class="p">[],</span>
  <span class="na">bootstrap</span><span class="p">:</span> <span class="p">[</span><span class="nx">AppComponent</span><span class="p">]</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">AppModule</span> <span class="p">{</span> <span class="p">}</span></code></pre></figure>

<p>So what exactly is happening here? The <code class="highlighter-rouge">@NgModule</code> decorator specifies all declarations (components, directives and pipes), library imports (such as <code class="highlighter-rouge">FormsModule</code> and <code class="highlighter-rouge">HttpModule</code>) and providers (a single-instance service for example) that we’ll be using in our application.</p>

<p>You can probably already see how much more organized it is to not need to specify all our module-level components, directives, pipes and so forth in each of our components.</p>

<h2 id="lets-get-ready-to-rumble">Let’s get ready to rumble</h2>

<p>Let’s set up <a href="http://sass-lang.com/">Sass</a> as our CSS preprocessor. The CLI makes it simple for a project that’s already been started.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">ng <span class="nb">set </span>defaults.styleExt scss</code></pre></figure>

<p><em>Note: If you’re seeing a weird error here, you can just set the default style extension to <code class="highlighter-rouge">scss</code> in <code class="highlighter-rouge">angular-cli.json</code> instead and restart the server. Take a look at this <a href="https://github.com/angular/angular-cli/issues/1900">issue</a>.</em></p>

<p>Now that we have everything set up, we can create our first few components. To start things off, we’ll create a <code class="highlighter-rouge">HeaderComponent</code>.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">ng generate component Header</code></pre></figure>

<p>You’ll notice that a <code class="highlighter-rouge">header</code> folder is immediately created and scaffolded with the following files created.</p>

<ul>
  <li><code class="highlighter-rouge">header.component.scss</code><br /></li>
  <li><code class="highlighter-rouge">header.component.html</code><br /></li>
  <li><code class="highlighter-rouge">header.component.ts</code><br /></li>
  <li><code class="highlighter-rouge">header.component.spec.ts</code></li>
</ul>

<p><img alt="Unit Tests" title="Unit Tests" data-src="https://i.imgur.com/ET1JQLg.jpg" class="lazyload shadow" /></p>

<p>I’m only joking, unit testing is always important for apps that go to production. We won’t be doing them for this tutorial however so feel free to delete/comment out the <code class="highlighter-rouge">spec</code> files.</p>

<p>Take a look at <code class="highlighter-rouge">app.module.ts</code> once again and you’ll notice that our component is now declared there as well.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// app.module.ts</span>

<span class="c1">// ...</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">AppComponent</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'./app.component'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">HeaderComponent</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'./header/header.component'</span><span class="p">;</span>

<span class="p">@</span><span class="nd">NgModule</span><span class="p">({</span>
  <span class="na">declarations</span><span class="p">:</span> <span class="p">[</span>
    <span class="nx">AppComponent</span><span class="p">,</span>
    <span class="nx">HeaderComponent</span>
  <span class="p">],</span>
<span class="c1">//...</span></code></pre></figure>

<p>If you take a look at <code class="highlighter-rouge">header.component.ts</code>, you can see that its component selector is <code class="highlighter-rouge">app-header</code>. Let’s add this in our root component, <code class="highlighter-rouge">app.component.ts</code>.</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="c">&lt;!-- app.component.html --&gt;</span>

<span class="nt">&lt;app-header&gt;&lt;/app-header&gt;</span></code></pre></figure>

<p>Running the application will show you that the header component loads successfully.</p>

<p><img alt="Header Loads" title="Header Loads" data-src="https://i.imgur.com/8upqeWW.png" class="lazyload shadow" /></p>

<p>Sweet, now let’s add some markup and styling.</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="c">&lt;!-- app.component.html --&gt;</span>

<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"wrapper"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;app-header&gt;&lt;/app-header&gt;</span>
<span class="nt">&lt;/div&gt;</span></code></pre></figure>

<p>The styling in <code class="highlighter-rouge">app.component.scss</code> can be found <a href="https://github.com/housseindjirdeh/angular2-hn/blob/initial-setup/src/app/app.component.scss">here</a>. Now let’s work on the header.</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="c">&lt;!-- header.component.html --&gt;</span>

<span class="nt">&lt;header</span> <span class="na">id=</span><span class="s">"header"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">"home-link"</span> <span class="na">href=</span><span class="s">"/"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;img</span> <span class="na">class=</span><span class="s">"logo"</span> <span class="na">src=</span><span class="s">"https://i.imgur.com/J303pQ4.png"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;/a&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"header-text"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"left"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;h1</span> <span class="na">class=</span><span class="s">"name"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"/"</span><span class="nt">&gt;</span>Angular 2 HN<span class="nt">&lt;/a&gt;</span>
      <span class="nt">&lt;/h1&gt;</span>
      <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"header-nav"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">""</span><span class="nt">&gt;</span>new<span class="nt">&lt;/a&gt;</span>
        <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"divider"</span><span class="nt">&gt;</span>
          |
        <span class="nt">&lt;/span&gt;</span>
        <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">""</span><span class="nt">&gt;</span>show<span class="nt">&lt;/a&gt;</span>
        <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"divider"</span><span class="nt">&gt;</span>
          |
        <span class="nt">&lt;/span&gt;</span>
        <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">""</span><span class="nt">&gt;</span>ask<span class="nt">&lt;/a&gt;</span>
        <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"divider"</span><span class="nt">&gt;</span>
          |
        <span class="nt">&lt;/span&gt;</span>
        <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">""</span><span class="nt">&gt;</span>jobs<span class="nt">&lt;/a&gt;</span>
      <span class="nt">&lt;/span&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"info"</span><span class="nt">&gt;</span>
      Built with <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"https://cli.angular.io/"</span> <span class="na">target=</span><span class="s">"_blank"</span><span class="nt">&gt;</span>Angular CLI<span class="nt">&lt;/a&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/header&gt;</span></code></pre></figure>

<p>And similarly, you can find the styling for this component <a href="https://github.com/housseindjirdeh/angular2-hn/blob/initial-setup/src/app/header/header.component.scss">here</a>. Running the application gives us the following result.</p>

<p><img alt="Header" title="Header" data-src="https://i.imgur.com/oLAH0EJ.png" class="lazyload shadow" /></p>

<h2 id="view-encapsulation">View Encapsulation</h2>

<p>Since we want this application to be as responsive as possible, it’s important to check how it looks with different screen sizes regularly. Let’s adjust our viewport to see how it would look on a mobile device.</p>

<p><img alt="Header Mobile" title="Header Mobile" data-src="https://i.imgur.com/UGyVSEi.png" class="lazyload" /></p>

<p>As you can see, there seems to be an offset from the edge of the page. This is because the <code class="highlighter-rouge">body</code> element has a bult-in offset (through <code class="highlighter-rouge">margin</code>) that shows in almost all modern browsers.</p>

<p><img alt="body margin" title="body margin" data-src="https://i.imgur.com/gpogcbO.png" class="lazyload shadow" /></p>

<p>But if you take a look at <code class="highlighter-rouge">app.component.scss</code>, we explicity set <code class="highlighter-rouge">margin: 0</code> for screen sizes less then 768px.</p>

<figure class="highlight"><pre><code class="language-css" data-lang="css"><span class="err">$</span><span class="nt">mobile-only</span><span class="o">:</span> <span class="s1">"only screen and (max-width : 768px)"</span><span class="o">;</span>

<span class="nt">body</span> <span class="p">{</span>
  <span class="nl">margin-bottom</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>

  <span class="err">@media</span> <span class="err">#{$mobile-only</span><span class="p">}</span> <span class="p">{</span>
    <span class="nl">margin</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>
  <span class="p">}</span>
<span class="err">}</span></code></pre></figure>

<p>So why isn’t this rendering the way it should? This is because of the way Angular encapsulates CSS styles onto a component. I won’t be going into too much detail here, but there are three different ways Angular does this.</p>

<ul>
  <li><code class="highlighter-rouge">None</code>: Angular doesn’t do anything. No encapsulation and no Shadow DOM, this is just like adding styles regularly. Adding a style will apply to the entire document.</li>
  <li><code class="highlighter-rouge">Emulated</code>: Angular <em>emulates</em> Shadow DOM behaviour. This is the default.</li>
  <li><code class="highlighter-rouge">Native</code>: Angular uses the browser’s native Shadow DOM completely (make sure you’re using a <a href="http://caniuse.com/#feat=shadowdom">browser that supports this</a>.</li>
</ul>

<p>In our root component, we’re trying to add styles to the <code class="highlighter-rouge">body</code> element which really doesn’t make sense if you think about it. Our root component is within <code class="highlighter-rouge">body</code>, not the other way around, hence why it’s styles will not be affected. We can work around this by telling Angular to not do any view encapsulation in this component whatsoever.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// app.component.ts</span>

<span class="k">import</span> <span class="p">{</span> <span class="nx">Component</span><span class="p">,</span> <span class="nx">ViewEncapsulation</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'@angular/core'</span><span class="p">;</span>

<span class="p">@</span><span class="nd">Component</span><span class="p">({</span>
  <span class="na">selector</span><span class="p">:</span> <span class="s1">'app-root'</span><span class="p">,</span>
  <span class="na">encapsulation</span><span class="p">:</span> <span class="nx">ViewEncapsulation</span><span class="p">.</span><span class="nx">None</span><span class="p">,</span>
  <span class="na">templateUrl</span><span class="p">:</span> <span class="s1">'./app.component.html'</span><span class="p">,</span>
  <span class="na">styleUrls</span><span class="p">:</span> <span class="p">[</span><span class="s1">'./app.component.scss'</span><span class="p">]</span>
<span class="p">})</span>

<span class="k">export</span> <span class="kd">class</span> <span class="nx">AppComponent</span> <span class="p">{</span>
<span class="p">}</span></code></pre></figure>

<p>Take a look at our application once more and you’ll notice that the styles have now been applied to <code class="highlighter-rouge">body</code>. This is because all of the styles in this component now affect the entire document.</p>

<p><img alt="header fixed" title="header fixed" data-src="https://i.imgur.com/SK0RhAr.png" class="lazyload" /></p>

<p>But wait a minute, was all of this really necessary? I see a <code class="highlighter-rouge">styles.css</code> file in our <code class="highlighter-rouge">src</code> folder. Isn’t this for global styles? Can’t we just add a class here to style <code class="highlighter-rouge">body</code>?</p>

<p>Yes you can, but hey at least we learned something here.</p>

<p><img alt="face palm" title="face palm" data-src="https://i.imgur.com/WtE1S58.jpg" class="lazyload shadow" /></p>

<h2 id="multiple-components">Multiple Components</h2>

<p>Let’s create two more components, <code class="highlighter-rouge">Stories</code> and <code class="highlighter-rouge">Footer</code>. Stories represent posts in Hacker News, and we’ll start out with a skeleton just to get an ordered list in place.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">ng g component Stories</code></pre></figure>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// stories.component.ts</span>

<span class="k">import</span> <span class="p">{</span> <span class="nx">Component</span><span class="p">,</span> <span class="nx">OnInit</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'@angular/core'</span><span class="p">;</span>

<span class="p">@</span><span class="nd">Component</span><span class="p">({</span>
  <span class="na">selector</span><span class="p">:</span> <span class="s1">'app-stories'</span><span class="p">,</span>
  <span class="na">templateUrl</span><span class="p">:</span> <span class="s1">'./stories.component.html'</span><span class="p">,</span>
  <span class="na">styleUrls</span><span class="p">:</span> <span class="p">[</span><span class="s1">'./stories.component.scss'</span><span class="p">]</span>
<span class="p">})</span>

<span class="k">export</span> <span class="kd">class</span> <span class="nx">StoriesComponent</span> <span class="kr">implements</span> <span class="nx">OnInit</span> <span class="p">{</span>
  <span class="nl">items</span><span class="p">:</span> <span class="nx">number</span><span class="p">[];</span>

  <span class="kd">constructor</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">items</span> <span class="o">=</span> <span class="nb">Array</span><span class="p">(</span><span class="mi">30</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">ngOnInit</span><span class="p">()</span> <span class="p">{</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="c">&lt;!-- stories.component.html --&gt;</span>

<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"main-content"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;ol&gt;</span>
    <span class="nt">&lt;li</span> <span class="err">*</span><span class="na">ngFor=</span><span class="s">"let item of items; let i = index"</span> <span class="na">class=</span><span class="s">"post"</span><span class="nt">&gt;</span>
      Story #{{i}}
    <span class="nt">&lt;/li&gt;</span>
  <span class="nt">&lt;/ol&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"nav"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">""</span> <span class="na">class=</span><span class="s">"prev"</span><span class="nt">&gt;</span>
      ‹ Prev
    <span class="nt">&lt;/a&gt;</span>
    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">""</span> <span class="na">class=</span><span class="s">"more"</span><span class="nt">&gt;</span>
      More ›
    <span class="nt">&lt;/a&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span></code></pre></figure>

<p>Click <a href="https://github.com/housseindjirdeh/angular2-hn/blob/initial-setup/src/app/stories/stories.component.scss">here</a> to take a look at the styles for <code class="highlighter-rouge">Stories</code>. Our footer is straightfoward (and it’s styling can be found <a href="https://github.com/housseindjirdeh/angular2-hn/blob/initial-setup/src/app/footer/footer.component.scss">here</a>).</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">ng g component Footer</code></pre></figure>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="c">&lt;!-- footer.component.html --&gt;</span>

<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"footer"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;p&gt;</span>Show this project some ❤ on
      <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"https://github.com/housseindjirdeh/angular2-hn"</span> <span class="na">target=</span><span class="s">"_blank"</span><span class="nt">&gt;</span>
        GitHub
      <span class="nt">&lt;/a&gt;</span>
    <span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/div&gt;</span></code></pre></figure>

<p>We’ll also need to update our root component to show these components.</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="c">&lt;!-- app.component.html --&gt;</span>

<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"wrapper"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;app-header&gt;&lt;/app-header&gt;</span>
  <span class="nt">&lt;app-stories&gt;&lt;/app-stories&gt;</span>
  <span class="nt">&lt;app-footer&gt;&lt;/app-footer&gt;</span>
<span class="nt">&lt;/div&gt;</span></code></pre></figure>

<p>Let’s see what our page is looking like.</p>

<p><img alt="Numbered List" title="Numbered List" data-src="https://i.imgur.com/r5cQTZ9.png" class="lazyload" /></p>

<p>Since each post, or item, will have its own attributes, it makes sense to create a component for this as well.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">ng g component Item</code></pre></figure>

<p>Once we start getting real data, we’ll need to pass down the item identifier from the story component to it’s child item component. In the meantime, let’s just pass down the list index as <code class="highlighter-rouge">itemID</code>.</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="c">&lt;!-- stories.component.html --&gt;</span>

<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"main-content"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;ol&gt;</span>
    <span class="nt">&lt;li</span> <span class="err">*</span><span class="na">ngFor=</span><span class="s">"let item of items; let i = index"</span> <span class="na">class=</span><span class="s">"post"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;item</span> <span class="na">class=</span><span class="s">"item-block"</span> <span class="na">itemID=</span><span class="s">"{{ i + 1 }}"</span><span class="nt">&gt;&lt;/item&gt;</span>
    <span class="nt">&lt;/li&gt;</span>
  <span class="nt">&lt;/ol&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"nav"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">""</span> <span class="na">class=</span><span class="s">"prev"</span><span class="nt">&gt;</span>
      ‹ Prev
    <span class="nt">&lt;/a&gt;</span>
    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">""</span> <span class="na">class=</span><span class="s">"more"</span><span class="nt">&gt;</span>
      More ›
    <span class="nt">&lt;/a&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// item.component.ts</span>

<span class="k">import</span> <span class="p">{</span> <span class="nx">Component</span><span class="p">,</span> <span class="nx">Input</span><span class="p">,</span> <span class="nx">OnInit</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'@angular/core'</span><span class="p">;</span>

<span class="p">@</span><span class="nd">Component</span><span class="p">({</span>
  <span class="na">selector</span><span class="p">:</span> <span class="s1">'item'</span><span class="p">,</span>
  <span class="na">templateUrl</span><span class="p">:</span> <span class="s1">'./item.component.html'</span><span class="p">,</span>
  <span class="na">styleUrls</span><span class="p">:</span> <span class="p">[</span><span class="s1">'./item.component.scss'</span><span class="p">]</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">ItemComponent</span> <span class="kr">implements</span> <span class="nx">OnInit</span> <span class="p">{</span>
  <span class="p">@</span><span class="nd">Input</span><span class="p">()</span> <span class="nx">itemID</span><span class="p">:</span> <span class="nx">number</span><span class="p">;</span>

  <span class="kd">constructor</span><span class="p">()</span> <span class="p">{</span> <span class="p">}</span>

  <span class="nx">ngOnInit</span><span class="p">()</span> <span class="p">{</span>
  <span class="p">}</span>

<span class="p">}</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="c">&lt;!-- item.component.html --&gt;</span>

<span class="nt">&lt;p&gt;</span>Story #{{itemID}}<span class="nt">&lt;p&gt;</span></code></pre></figure>

<p>Refreshing the application will give you the same result, showing that the index parameter is successfully being passed down using the <code class="highlighter-rouge">@Input</code> decoration.</p>

<p>We have a basic skeleton of the home page done and that’s a good start. Here’s the <a href="https://github.com/housseindjirdeh/angular2-hn/tree/initial-setup">link</a> for the source code for this step.</p>

<h2 id="rxjs-and-observables">RxJS and Observables</h2>

<p>Before we start fetching real data, let’s briefly go over the concept of RxJS and observables.</p>

<p>Angular’s <a href="https://angular.io/docs/ts/latest/guide/server-communication.html">HTTP client</a> allows you to communicate with a server, and you need it to fetch data from anywhere. To fetch data from a server, the first thing you would most likely do is pass the resource URL through an <code class="highlighter-rouge">http.get</code> call. But what gets returned exactly?</p>

<p>In Angular 2, we use the <a href="https://github.com/Reactive-Extensions/RxJS">RxJS</a> library to return an <code class="highlighter-rouge">Observable</code> of data, or an <em>asynchronous stream of data</em>. You may already be familiar with the concept of Promises and how you can use them to retrieve data asynchronously. Observables obtain data just like promises do, but they allow us to subscribe to the stream of data and respond to specific data changes that it emits.</p>

<p><img alt="Clicks Event Stream" title="Clicks Event Stream" data-src="https://i.imgur.com/w3cwr9j.png" class="lazyload shadow" /></p>

<p class="image-source"><a href="https://gist.github.com/staltz/868e7e9bc2a7b8c1f754">Source: The introduction to Reactive Programming you’ve been missing</a></p>

<p>The diagram above depicts the events that occur when a user clicks on a button. Notice how this stream emits values (which represent the click events), an error as well as a completed event.</p>

<p>The entire concept of using Observables in your application is known as <a href="https://gist.github.com/staltz/868e7e9bc2a7b8c1f754">Reactive Programming.</a></p>

<h2 id="observable-data-service">Observable Data Service</h2>

<p>Okay, now it’s time to start retrieving some real data. To do this, we’re going to be creating an Observable Data Service and injecting it into our components.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">ng g service hackernews-api</code></pre></figure>

<p>This creates and sets up a service file for us. Now before we dive in, let’s try to understand how the official Hacker News API works. If you take a look at the <a href="https://github.com/HackerNews/API">documentation</a>, you’ll notice that everything (polls, comments, stories, jobs) is just an item distinguishable though an <code class="highlighter-rouge">id</code> parameter. This means any item’s information can be obtained from their specific URL.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// https://hacker-news.firebaseio.com/v0/item/2.json?print=pretty</span>

<span class="p">{</span>
  <span class="s2">"by"</span> <span class="p">:</span> <span class="s2">"phyllis"</span><span class="p">,</span>
  <span class="s2">"descendants"</span> <span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
  <span class="s2">"id"</span> <span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
  <span class="s2">"kids"</span> <span class="p">:</span> <span class="p">[</span> <span class="mi">454411</span> <span class="p">],</span>
  <span class="s2">"score"</span> <span class="p">:</span> <span class="mi">16</span><span class="p">,</span>
  <span class="s2">"time"</span> <span class="p">:</span> <span class="mi">1160418628</span><span class="p">,</span>
  <span class="s2">"title"</span> <span class="p">:</span> <span class="s2">"A Student's Guide to Startups"</span><span class="p">,</span>
  <span class="s2">"type"</span> <span class="p">:</span> <span class="s2">"story"</span><span class="p">,</span>
  <span class="s2">"url"</span> <span class="p">:</span> <span class="s2">"https://www.paulgraham.com/mit.html"</span>
<span class="p">}</span></code></pre></figure>

<p>Now if we want to obtain information like front page ranking, we’ll need to use another endpoint specific to the type of stories. For example, top stories can be retrieved like this.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// https://hacker-news.firebaseio.com/v0/topstories.json?print=pretty</span>

<span class="p">[</span> <span class="mi">12426766</span><span class="p">,</span> <span class="mi">12426315</span><span class="p">,</span> <span class="mi">12424656</span><span class="p">,</span> <span class="mi">12425725</span><span class="p">,</span> <span class="mi">12426064</span><span class="p">,</span> <span class="mi">12427341</span><span class="p">,</span> <span class="mi">12425692</span><span class="p">,</span> <span class="mi">12425776</span><span class="p">,</span> <span class="mi">12425324</span><span class="p">,</span> <span class="mi">12425750</span><span class="p">,</span> <span class="mi">12425135</span><span class="p">,</span> <span class="mi">12427073</span><span class="p">,</span> <span class="mi">12425632</span><span class="p">,</span> <span class="mi">12423733</span><span class="p">,</span> <span class="mi">12425720</span><span class="p">,</span> <span class="mi">12427135</span><span class="p">,</span> <span class="mi">12425683</span><span class="p">,</span> <span class="mi">12423794</span><span class="p">,</span> <span class="mi">12424987</span><span class="p">,</span> <span class="mi">12423809</span><span class="p">,</span> <span class="mi">12424738</span><span class="p">,</span> <span class="mi">12425119</span><span class="p">,</span> <span class="mi">12426759</span><span class="p">,</span> <span class="mi">12425711</span><span class="p">,</span> <span class="mi">12422891</span><span class="p">,</span> <span class="mi">12424731</span><span class="p">,</span> <span class="mi">12423742</span><span class="p">,</span> <span class="mi">12424131</span><span class="p">,</span> <span class="mi">12424184</span><span class="p">,</span> <span class="mi">12422833</span><span class="p">,</span> <span class="mi">12424421</span><span class="p">,</span> <span class="mi">12426729</span><span class="p">,</span> <span class="mi">12423373</span><span class="p">,</span> <span class="mi">12421687</span><span class="p">,</span> <span class="mi">12427437</span> <span class="p">...]</span></code></pre></figure>

<p>So to show the top stories on the front page, we’ll need to first subscribe to this endpoint and then subsequently subscribe to each item. Let’s dive in.</p>

<p>Since we would want a single instance of the service throughout the entire app, let’s include it in the <code class="highlighter-rouge">provider</code> metadata of <code class="highlighter-rouge">NgModule</code>.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// app.module.ts</span>

<span class="c1">//...</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">HackerNewsAPIService</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'./hackernews-api.service'</span><span class="p">;</span>

<span class="p">@</span><span class="nd">NgModule</span><span class="p">({</span>
  <span class="na">declarations</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">...</span>
   <span class="p">],</span>
  <span class="na">imports</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">...</span>
  <span class="p">],</span>
  <span class="na">providers</span><span class="p">:</span> <span class="p">[</span><span class="nx">HackerNewsAPIService</span><span class="p">],</span>
  <span class="na">bootstrap</span><span class="p">:</span> <span class="p">[</span><span class="nx">AppComponent</span><span class="p">]</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">AppModule</span> <span class="p">{</span> <span class="p">}</span></code></pre></figure>

<p>Now let’s add the request method to our service.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// hackernews-api.service.ts</span>

<span class="k">import</span> <span class="p">{</span> <span class="nx">Injectable</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'@angular/core'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Http</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'@angular/http'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Observable</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'rxjs/Observable'</span><span class="p">;</span>
<span class="k">import</span> <span class="s1">'rxjs/add/operator/map'</span><span class="p">;</span>

<span class="p">@</span><span class="nd">Injectable</span><span class="p">()</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">HackerNewsAPIService</span> <span class="p">{</span>
  <span class="nl">baseUrl</span><span class="p">:</span> <span class="nx">string</span><span class="p">;</span>

  <span class="kd">constructor</span><span class="p">(</span><span class="kr">private</span> <span class="nx">http</span><span class="p">:</span> <span class="nx">Http</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">baseUrl</span> <span class="o">=</span> <span class="s1">'https://hacker-news.firebaseio.com/v0'</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nx">fetchStories</span><span class="p">():</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">any</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">http</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">baseUrl</span><span class="p">}</span><span class="s2">/topstories.json`</span><span class="p">)</span>
                    <span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">());</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>As we mentioned previously, the <code class="highlighter-rouge">http.get</code> call returns an Observable of data. If you look at <code class="highlighter-rouge">fetchStories</code>, we take in the Observable and then <code class="highlighter-rouge">map</code> it to a JSON format. Let’s see how we handle this Observable in our component.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// stories.component.ts</span>

<span class="k">import</span> <span class="p">{</span> <span class="nx">Component</span><span class="p">,</span> <span class="nx">OnInit</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'@angular/core'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Observable</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'rxjs/Observable'</span><span class="p">;</span>

<span class="k">import</span> <span class="p">{</span> <span class="nx">HackerNewsAPIService</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'../hackernews-api.service'</span><span class="p">;</span>

<span class="p">@</span><span class="nd">Component</span><span class="p">({</span>
  <span class="na">selector</span><span class="p">:</span> <span class="s1">'app-stories'</span><span class="p">,</span>
  <span class="na">templateUrl</span><span class="p">:</span> <span class="s1">'./stories.component.html'</span><span class="p">,</span>
  <span class="na">styleUrls</span><span class="p">:</span> <span class="p">[</span><span class="s1">'./stories.component.scss'</span><span class="p">]</span>
<span class="p">})</span>

<span class="k">export</span> <span class="kd">class</span> <span class="nx">StoriesComponent</span> <span class="kr">implements</span> <span class="nx">OnInit</span> <span class="p">{</span>
  <span class="nx">items</span><span class="p">;</span>

  <span class="kd">constructor</span><span class="p">(</span><span class="kr">private</span> <span class="nx">_hackerNewsAPIService</span><span class="p">:</span> <span class="nx">HackerNewsAPIService</span><span class="p">)</span> <span class="p">{}</span>

  <span class="nx">ngOnInit</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">_hackerNewsAPIService</span><span class="p">.</span><span class="nx">fetchStories</span><span class="p">()</span>
                    <span class="p">.</span><span class="nx">subscribe</span><span class="p">(</span>
                      <span class="nx">items</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">items</span> <span class="o">=</span> <span class="nx">items</span><span class="p">,</span>
                      <span class="nx">error</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Error fetching stories'</span><span class="p">));</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>In the <code class="highlighter-rouge">ngOnInit</code> hook, which fires when the component is initialized, we <code class="highlighter-rouge">subscribe</code> to the data stream and set the <code class="highlighter-rouge">items</code> attribute to what gets returned. In our view, the only thing we’re going to add is a <code class="highlighter-rouge">SlicePipe</code> to show 30 list items instead of all 500 which gets returned.</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="c">&lt;!-- stories.component.html --&gt;</span>

<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"main-content"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;ol&gt;</span>
    <span class="nt">&lt;li</span> <span class="err">*</span><span class="na">ngFor=</span><span class="s">"let item of items | slice:0:30"</span> <span class="na">class=</span><span class="s">"post"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;item</span> <span class="na">class=</span><span class="s">"item-block"</span> <span class="na">itemID=</span><span class="s">"{{ item }}"</span><span class="nt">&gt;&lt;/item&gt;</span>
    <span class="nt">&lt;/li&gt;</span>
  <span class="nt">&lt;/ol&gt;</span>
  <span class="c">&lt;!-- ... --&gt;</span>
<span class="nt">&lt;/div&gt;</span></code></pre></figure>

<p>Now if you run the application, you’ll see a list of item ids populated.</p>

<p><img alt="Item ID List" title="Item ID List" data-src="https://i.imgur.com/Bj2MSeX.png" class="lazyload shadow" /></p>

<p>Since we have the item id’s being passed down successfully to each of the <code class="highlighter-rouge">item</code> components, let’s set up another Observable subscription for each item to show their details. To do this, let’s start by adding a new method to our service.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// hackernews-api.service.ts</span>

<span class="c1">//...</span>

<span class="nx">fetchItem</span><span class="p">(</span><span class="nx">id</span><span class="p">:</span> <span class="nx">number</span><span class="p">):</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">any</span><span class="o">&gt;</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">http</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">baseUrl</span><span class="p">}</span><span class="s2">/item/</span><span class="p">${</span><span class="nx">id</span><span class="p">}</span><span class="s2">.json`</span><span class="p">)</span>
                  <span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">());</span>
<span class="p">}</span></code></pre></figure>

<p>And now we need to modify our <code class="highlighter-rouge">item</code> component a bit.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// item.component.ts</span>

<span class="k">import</span> <span class="p">{</span> <span class="nx">Component</span><span class="p">,</span> <span class="nx">Input</span><span class="p">,</span> <span class="nx">OnInit</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'@angular/core'</span><span class="p">;</span>

<span class="k">import</span> <span class="p">{</span> <span class="nx">HackerNewsAPIService</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'../hackernews-api.service'</span><span class="p">;</span>

<span class="p">@</span><span class="nd">Component</span><span class="p">({</span>
  <span class="na">selector</span><span class="p">:</span> <span class="s1">'item'</span><span class="p">,</span>
  <span class="na">templateUrl</span><span class="p">:</span> <span class="s1">'./item.component.html'</span><span class="p">,</span>
  <span class="na">styleUrls</span><span class="p">:</span> <span class="p">[</span><span class="s1">'./item.component.scss'</span><span class="p">]</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">ItemComponent</span> <span class="kr">implements</span> <span class="nx">OnInit</span> <span class="p">{</span>
  <span class="p">@</span><span class="nd">Input</span><span class="p">()</span> <span class="nx">itemID</span><span class="p">:</span> <span class="nx">number</span><span class="p">;</span>
  <span class="nx">item</span><span class="p">;</span>

  <span class="kd">constructor</span><span class="p">(</span><span class="kr">private</span> <span class="nx">_hackerNewsAPIService</span><span class="p">:</span> <span class="nx">HackerNewsAPIService</span><span class="p">)</span> <span class="p">{}</span>

  <span class="nx">ngOnInit</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">_hackerNewsAPIService</span><span class="p">.</span><span class="nx">fetchItem</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">itemID</span><span class="p">).</span><span class="nx">subscribe</span><span class="p">(</span><span class="nx">data</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">item</span> <span class="o">=</span> <span class="nx">data</span><span class="p">;</span>
    <span class="p">},</span> <span class="nx">error</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Could not load item'</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">itemID</span><span class="p">));</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="c">&lt;!-- item.component.html --&gt;</span>

<span class="nt">&lt;div</span> <span class="err">*</span><span class="na">ngIf=</span><span class="s">"!item"</span> <span class="na">class=</span><span class="s">"loading-section"</span><span class="nt">&gt;</span>
  <span class="c">&lt;!-- You can add a loading indicator here if you want to :) &lt;/i&gt; --&gt;</span>
<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;div</span> <span class="err">*</span><span class="na">ngIf=</span><span class="s">"item"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"item-laptop"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;p&gt;</span>
      <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">"title"</span> <span class="na">href=</span><span class="s">"{{item.url}}"</span><span class="nt">&gt;</span>
        {{item.title}}
      <span class="nt">&lt;/a&gt;</span>
      <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"domain"</span><span class="nt">&gt;</span>{{item.url | domain}}<span class="nt">&lt;/span&gt;</span>
    <span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"subtext-laptop"</span><span class="nt">&gt;</span>
      {{item.score}} points by
      <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">""</span><span class="nt">&gt;</span>{{item.by}}<span class="nt">&lt;/a&gt;</span>
      {{ (item.time | amFromUnix) | amTimeAgo }}
      <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">""</span><span class="nt">&gt;</span>
        <span class="nt">&lt;span</span> <span class="err">*</span><span class="na">ngIf=</span><span class="s">"item.descendants !== 0"</span><span class="nt">&gt;</span>
          {{item.descendants}}
          <span class="nt">&lt;span</span> <span class="err">*</span><span class="na">ngIf=</span><span class="s">"item.descendants === 1"</span><span class="nt">&gt;</span>comment<span class="nt">&lt;/span&gt;</span>
          <span class="nt">&lt;span</span> <span class="err">*</span><span class="na">ngIf=</span><span class="s">"item.descendants &gt; 1"</span><span class="nt">&gt;</span>comments<span class="nt">&lt;/span&gt;</span>
        <span class="nt">&lt;/span&gt;</span>
        <span class="nt">&lt;span</span> <span class="err">*</span><span class="na">ngIf=</span><span class="s">"item.descendants === 0"</span><span class="nt">&gt;</span>discuss<span class="nt">&lt;/span&gt;</span>
      <span class="nt">&lt;/a&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"item-mobile"</span><span class="nt">&gt;</span>
    <span class="c">&lt;!-- Markup that shows only on mobile (to give the app a
    responsive mobile feel). Same attributes as above
    nothing really new here (but refer to the source
    file if you're interested) --&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span></code></pre></figure>

<p>Nice and straightforward. For each item, we’re subscribing to their respective stream. In the markup, we can see that when the response hasn’t been received yet, we have a loading section where we can show a loading indicator of some sort. Once the item loads from the Observable, it’s details will show. Click <a href="https://github.com/housseindjirdeh/angular2-hn/tree/first-page/src/app/item">here</a> to see all the files for this component including styling.</p>

<p><em>Note: You may be wondering where the <code class="highlighter-rouge">amFromUnix</code> and <code class="highlighter-rouge">amTimeAgo</code> pipes came from. The time parameter for each item is in <a href="https://en.wikipedia.org/wiki/Unix_time">Unix</a> format. To convert this into something we can understand, I use <a href="https://momentjs.com/">moment.js</a> pipes by importing the <a href="https://github.com/urish/angular2-moment">angular2-moment</a> library.</em></p>

<p><em>Note 2: For each item with a link, the entire URL is passed through it’s <code class="highlighter-rouge">url</code> attribute. To only show the link domain, I created a pipe called <code class="highlighter-rouge">domain</code>. Take a look <a href="https://github.com/housseindjirdeh/angular2-hn/blob/first-page/src/app/domain.pipe.ts">here</a> for the code.</em></p>

<p>Now if you run the application, you’ll see the first page of Hacker News! Click <a href="https://github.com/housseindjirdeh/angular2-hn/tree/first-page">here</a> for the full source code until this step.</p>

<p><img alt="Top Stories" title="Top Stories" data-src="https://i.imgur.com/VLKj7xr.png" class="lazyload shadow" /></p>

<h2 id="things-are-kinda-slow-though">Things are kinda slow though</h2>

<p>Let’s take a look at the requests transferred when we load the front page of our application.</p>

<p><img alt="Front Page Requests" title="Front Page Requests" data-src="https://i.imgur.com/j99CNyz.png" class="lazyload shadow" /></p>

<p>Woah, 31 requests and 20.8KB transferred in 546ms. This takes almost five times as long loading the front page of Hacker News and more then twice as much data to just load the posts. This is pretty darn slow, and maybe it’s kind of tolerable when you’re loading the list of posts on the front page but this is a serious problem if we try loading a large number of comments for a single post.</p>

<p>I built the entire application with each component using this method, including each post and their comments. You can take a look at what happens when I try to load a post with almost 2000 comments <a href="https://media.giphy.com/media/3o6Zt9ZBEDjwiPDjz2/giphy.gif">here</a>. But to save you time from watching that entire gif, it takes <strong>741 requests, 1.5MB and 90s</strong> to load roughly 700 of the comments (I wasn’t patient enough to wait for every comment to load).</p>

<p><em>Just for reference’s sake, I still have this version of the app up on my GitHub pages. At your own caution, you can take a look at how long it takes to load this many comments <a href="https://houssein.me/angular2-hn/item/12445994">here</a></em>.</p>

<h2 id="lets-switch-things-up">Let’s switch things up</h2>

<p>Okay, now we can see why having multiple network connections to fetch a parent item and it’s content isn’t the nicest experience. After a little bit of searching, I found this awesome <a href="https://github.com/cheeaun/node-hnapi">unofficial API</a> which returns an item and it’s details through a single request.</p>

<p>For example, the response for the list of top stories looks like this.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// https://node-hnapi.herokuapp.com/news?page=1</span>

<span class="p">[</span>
  <span class="p">{</span>
    <span class="s2">"id"</span><span class="p">:</span> <span class="mi">12469856</span><span class="p">,</span>
    <span class="s2">"title"</span><span class="p">:</span> <span class="s2">"Owl Lisp – A purely functional Scheme that compiles to C"</span><span class="p">,</span>
    <span class="s2">"points"</span><span class="p">:</span> <span class="mi">57</span><span class="p">,</span>
    <span class="s2">"user"</span><span class="p">:</span> <span class="s2">"rcarmo"</span><span class="p">,</span>
    <span class="s2">"time"</span><span class="p">:</span> <span class="mi">1473524669</span><span class="p">,</span>
    <span class="s2">"time_ago"</span><span class="p">:</span> <span class="s2">"2 hours ago"</span><span class="p">,</span>
    <span class="s2">"comments_count"</span><span class="p">:</span> <span class="mi">9</span><span class="p">,</span>
    <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"link"</span><span class="p">,</span>
    <span class="s2">"url"</span><span class="p">:</span> <span class="s2">"https://github.com/aoh/owl-lisp"</span><span class="p">,</span>
    <span class="s2">"domain"</span><span class="p">:</span> <span class="s2">"github.com"</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="s2">"id"</span><span class="p">:</span> <span class="mi">12469823</span><span class="p">,</span>
    <span class="s2">"title"</span><span class="p">:</span> <span class="s2">"How to Write Articles and Essays Quickly and Expertly"</span><span class="p">,</span>
    <span class="s2">"points"</span><span class="p">:</span> <span class="mi">52</span><span class="p">,</span>
    <span class="s2">"user"</span><span class="p">:</span> <span class="s2">"bemmu"</span><span class="p">,</span>
    <span class="s2">"time"</span><span class="p">:</span> <span class="mi">1473524142</span><span class="p">,</span>
    <span class="s2">"time_ago"</span><span class="p">:</span> <span class="s2">"2 hours ago"</span><span class="p">,</span>
    <span class="s2">"comments_count"</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span>
    <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"link"</span><span class="p">,</span>
    <span class="s2">"url"</span><span class="p">:</span> <span class="s2">"https://www.downes.ca/post/38526"</span><span class="p">,</span>
    <span class="s2">"domain"</span><span class="p">:</span> <span class="s2">"downes.ca"</span>
  <span class="p">},</span>
  <span class="p">...</span>
<span class="p">]</span></code></pre></figure>

<p>Notice that there is a <code class="highlighter-rouge">domain</code> as well as a <code class="highlighter-rouge">time_ago</code> attribute which is pretty cool. This means we can ditch the <code class="highlighter-rouge">domain.pipe.ts</code> file I created earlier as well as uninstall the <code class="highlighter-rouge">angular2-moment</code> library. Let’s take a look at what we need to change in our data service.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// hackernews-api.service.ts</span>

<span class="k">export</span> <span class="kd">class</span> <span class="nx">HackerNewsAPIService</span> <span class="p">{</span>
  <span class="nl">baseUrl</span><span class="p">:</span> <span class="nx">string</span><span class="p">;</span>

  <span class="kd">constructor</span><span class="p">(</span><span class="kr">private</span> <span class="nx">http</span><span class="p">:</span> <span class="nx">Http</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">baseUrl</span> <span class="o">=</span> <span class="s1">'https://node-hnapi.herokuapp.com'</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nx">fetchStories</span><span class="p">(</span><span class="nx">storyType</span><span class="p">:</span> <span class="nx">string</span><span class="p">,</span> <span class="nx">page</span><span class="p">:</span> <span class="nx">number</span><span class="p">):</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">any</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">http</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">baseUrl</span><span class="p">}</span><span class="s2">/</span><span class="p">${</span><span class="nx">storyType</span><span class="p">}</span><span class="s2">?page=</span><span class="p">${</span><span class="nx">page</span><span class="p">}</span><span class="s2">`</span><span class="p">)</span>
                    <span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">());</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>Since the API doesn’t load all 500 top stories, we need to add page number as an argument. Notice how we’re also passing <code class="highlighter-rouge">storyType</code> as well. This will allow us to show different types of stories depending on where the user navigates to.</p>

<p>Let’s take a look at how we can change the stories component. We can start with just passing in <code class="highlighter-rouge">'news'</code> and page number <code class="highlighter-rouge">1</code> into our service call to get our top stories.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// stories.component.ts</span>

<span class="k">export</span> <span class="kd">class</span> <span class="nx">StoriesComponent</span> <span class="kr">implements</span> <span class="nx">OnInit</span> <span class="p">{</span>
  <span class="nx">items</span><span class="p">;</span>

  <span class="kd">constructor</span><span class="p">(</span><span class="kr">private</span> <span class="nx">_hackerNewsAPIService</span><span class="p">:</span> <span class="nx">HackerNewsAPIService</span><span class="p">)</span> <span class="p">{}</span>

  <span class="nx">ngOnInit</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">_hackerNewsAPIService</span><span class="p">.</span><span class="nx">fetchStories</span><span class="p">(</span><span class="s1">'news'</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
                              <span class="p">.</span><span class="nx">subscribe</span><span class="p">(</span>
                                <span class="nx">items</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">items</span> <span class="o">=</span> <span class="nx">items</span><span class="p">,</span>
                                <span class="nx">error</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Error fetching stories'</span><span class="p">));</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>The correpsonding markup is as follows.</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="c">&lt;!-- stories.component.html --&gt;</span>

<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"loading-section"</span> <span class="err">*</span><span class="na">ngIf=</span><span class="s">"!items"</span><span class="nt">&gt;</span>
  <span class="c">&lt;!-- You can add a loading indicator here if you want to :) --&gt;</span>
<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;div</span> <span class="err">*</span><span class="na">ngIf=</span><span class="s">"items"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;ol&gt;</span>
    <span class="nt">&lt;li</span> <span class="err">*</span><span class="na">ngFor=</span><span class="s">"let item of items"</span> <span class="na">class=</span><span class="s">"post"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;item</span> <span class="na">class=</span><span class="s">"item-block"</span> <span class="err">[</span><span class="na">item</span><span class="err">]="</span><span class="na">item</span><span class="err">"</span><span class="nt">&gt;&lt;/item&gt;</span>
    <span class="nt">&lt;/li&gt;</span>
  <span class="nt">&lt;/ol&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"nav"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">"prev"</span><span class="nt">&gt;</span>
      ‹ Prev
    <span class="nt">&lt;/a&gt;</span>
    <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">"more"</span><span class="nt">&gt;</span>
      More ›
    <span class="nt">&lt;/a&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span></code></pre></figure>

<p>Since all our item components are not loading individually async anymore, we set up the loading section (where we can have a loading indicator) here. Moreover, we just pass in the item object of each post to the child item component.</p>

<p>This means we should be able to clean things up in <code class="highlighter-rouge">ItemComponent</code>. In <code class="highlighter-rouge">item.component.ts</code>, we don’t need to inject <code class="highlighter-rouge">HackerNewsService</code> anymore and our component is now simply a conduit to take in the item object from it’s parent.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// item.component.ts</span>

<span class="k">export</span> <span class="kd">class</span> <span class="nx">ItemComponent</span> <span class="kr">implements</span> <span class="nx">OnInit</span> <span class="p">{</span>
  <span class="p">@</span><span class="nd">Input</span><span class="p">()</span> <span class="nx">item</span><span class="p">;</span>

  <span class="kd">constructor</span><span class="p">()</span> <span class="p">{}</span>

  <span class="nx">ngOnInit</span><span class="p">()</span> <span class="p">{</span>

  <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>The markup (<code class="highlighter-rouge">item.component.html</code>) is very similar, but we now don’t need to conditionally check if the item object is present anymore (we do that in the parent component). Moreover, each parameter now refers to the properties of our new API.</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="c">&lt;!-- item.component.html --&gt;</span>

<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"item-laptop"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;p&gt;</span>
    <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">"title"</span> <span class="na">href=</span><span class="s">""</span><span class="nt">&gt;</span>
      {{item.title}}
    <span class="nt">&lt;/a&gt;</span>
    <span class="nt">&lt;span</span> <span class="err">*</span><span class="na">ngIf=</span><span class="s">"item.domain"</span> <span class="na">class=</span><span class="s">"domain"</span><span class="nt">&gt;</span>({{item.domain}})<span class="nt">&lt;/span&gt;</span>
  <span class="nt">&lt;/p&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"subtext-laptop"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;span&gt;</span>
      {{item.points}} points by
      <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">""</span><span class="nt">&gt;</span>{{item.user}}<span class="nt">&lt;/a&gt;</span>
    <span class="nt">&lt;/span&gt;</span>
    <span class="nt">&lt;span&gt;</span>
      {{item.time_ago}}
      <span class="nt">&lt;span&gt;</span> |
        <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">""</span><span class="nt">&gt;</span>
          <span class="nt">&lt;span</span> <span class="err">*</span><span class="na">ngIf=</span><span class="s">"item.comments_count !== 0"</span><span class="nt">&gt;</span>
            {{item.comments_count}}
            <span class="nt">&lt;span</span> <span class="err">*</span><span class="na">ngIf=</span><span class="s">"item.comments_count === 1"</span><span class="nt">&gt;</span>comment<span class="nt">&lt;/span&gt;</span>
            <span class="nt">&lt;span</span> <span class="err">*</span><span class="na">ngIf=</span><span class="s">"item.comments_count &gt; 1"</span><span class="nt">&gt;</span>comments<span class="nt">&lt;/span&gt;</span>
          <span class="nt">&lt;/span&gt;</span>
          <span class="nt">&lt;span</span> <span class="err">*</span><span class="na">ngIf=</span><span class="s">"item.comments_count === 0"</span><span class="nt">&gt;</span>discuss<span class="nt">&lt;/span&gt;</span>
        <span class="nt">&lt;/a&gt;</span>
      <span class="nt">&lt;/span&gt;</span>
    <span class="nt">&lt;/span&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"item-mobile"</span><span class="nt">&gt;</span>
  <span class="c">&lt;!-- Markup that shows only on mobile (to give the app a
    responsive mobile feel). Same attributes as above
    nothing really new here (but refer to the source
    file if you're interested) --&gt;</span>
<span class="nt">&lt;/div&gt;</span></code></pre></figure>

<p>Now let’s see what happens when we run this bad boy.</p>

<p><img alt="Front Page" title="Front Page" data-src="https://i.imgur.com/VLKj7xr.png" class="lazyload shadow" /></p>

<p>And now everything loads much faster. The source code for this step can be found <a href="https://github.com/housseindjirdeh/angular2-hn/tree/first-page-final">here</a>.</p>

<h2 id="routing">Routing</h2>

<p>We’ve come quite a long way, but before we continue let’s map out the entire component structure of the application. Please excuse my funky Powerpoint skills.</p>

<p>Let’s start with what we’ve built so far.</p>

<p><img alt="Front Page Components" title="Front Page Components" data-src="https://i.imgur.com/zUH1SPy.png" class="lazyload" /></p>

<p>Let’s also map out the components that show when we navigate to the comments page.</p>

<p><img alt="Item Comment Components" title="Item Comment Components" data-src="https://i.imgur.com/XttxmfM.png" class="lazyload" /></p>

<p>To allow the user to navigate between these pages, we’re going to have to include some basic routing in our application. Before we begin, let’s create our next component.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">ng g component ItemComments</code></pre></figure>

<p>Now let’s create an <code class="highlighter-rouge">app.routes.ts</code> file in our <code class="highlighter-rouge">app</code> folder.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// app.routes.ts</span>

<span class="k">import</span> <span class="p">{</span> <span class="nx">Routes</span><span class="p">,</span> <span class="nx">RouterModule</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'@angular/router'</span><span class="p">;</span>

<span class="k">import</span> <span class="p">{</span> <span class="nx">StoriesComponent</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'./stories/stories.component'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">ItemCommentsComponent</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'./item-comments/item-comments.component'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">routes</span><span class="p">:</span> <span class="nx">Routes</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span><span class="na">path</span><span class="p">:</span> <span class="s1">''</span><span class="p">,</span> <span class="na">redirectTo</span><span class="p">:</span> <span class="s1">'news/1'</span><span class="p">,</span> <span class="na">pathMatch</span> <span class="p">:</span> <span class="s1">'full'</span><span class="p">},</span>
  <span class="p">{</span><span class="na">path</span><span class="p">:</span> <span class="s1">'news/:page'</span><span class="p">,</span> <span class="na">component</span><span class="p">:</span> <span class="nx">StoriesComponent</span><span class="p">,</span> <span class="na">data</span><span class="p">:</span> <span class="p">{</span><span class="na">storiesType</span><span class="p">:</span> <span class="s1">'news'</span><span class="p">}},</span>
  <span class="p">{</span><span class="na">path</span><span class="p">:</span> <span class="s1">'newest/:page'</span><span class="p">,</span> <span class="na">component</span><span class="p">:</span> <span class="nx">StoriesComponent</span><span class="p">,</span> <span class="na">data</span><span class="p">:</span> <span class="p">{</span><span class="na">storiesType</span><span class="p">:</span> <span class="s1">'newest'</span><span class="p">}},</span>
  <span class="p">{</span><span class="na">path</span><span class="p">:</span> <span class="s1">'show/:page'</span><span class="p">,</span> <span class="na">component</span><span class="p">:</span> <span class="nx">StoriesComponent</span><span class="p">,</span> <span class="na">data</span><span class="p">:</span> <span class="p">{</span><span class="na">storiesType</span><span class="p">:</span> <span class="s1">'show'</span><span class="p">}},</span>
  <span class="p">{</span><span class="na">path</span><span class="p">:</span> <span class="s1">'ask/:page'</span><span class="p">,</span> <span class="na">component</span><span class="p">:</span> <span class="nx">StoriesComponent</span><span class="p">,</span> <span class="na">data</span><span class="p">:</span> <span class="p">{</span><span class="na">storiesType</span><span class="p">:</span> <span class="s1">'ask'</span><span class="p">}},</span>
  <span class="p">{</span><span class="na">path</span><span class="p">:</span> <span class="s1">'jobs/:page'</span><span class="p">,</span> <span class="na">component</span><span class="p">:</span> <span class="nx">StoriesComponent</span><span class="p">,</span> <span class="na">data</span><span class="p">:</span> <span class="p">{</span><span class="na">storiesType</span><span class="p">:</span> <span class="s1">'jobs'</span><span class="p">}},</span>
  <span class="p">{</span><span class="na">path</span><span class="p">:</span> <span class="s1">'item/:id'</span><span class="p">,</span> <span class="na">component</span><span class="p">:</span> <span class="nx">ItemCommentsComponent</span><span class="p">}</span>
<span class="p">];</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">routing</span> <span class="o">=</span> <span class="nx">RouterModule</span><span class="p">.</span><span class="nx">forRoot</span><span class="p">(</span><span class="nx">routes</span><span class="p">);</span></code></pre></figure>

<p>An overview of what we’re doing here:</p>

<ol>
  <li>We just created an array of routes, each with a relative <em>path</em> that maps to a specific <em>component</em><br /></li>
  <li>Our header navigation links will route to a number of different paths; <code class="highlighter-rouge">news</code>, <code class="highlighter-rouge">newest</code>, <code class="highlighter-rouge">show</code>, <code class="highlighter-rouge">ask</code> and <code class="highlighter-rouge">jobs</code>. All these paths will map to our <code class="highlighter-rouge">StoriesComponent</code></li>
  <li>We’ve set up our root path to redirect to <code class="highlighter-rouge">news</code> which should return the list of top stories</li>
  <li>When we map to <code class="highlighter-rouge">StoriesComponent</code>, we pass down <code class="highlighter-rouge">storiesType</code> as a parameter through the <code class="highlighter-rouge">data</code> property. This lets us have a story type associated for each route (we’ll need this when we use our data service to fetch the list of stories)</li>
  <li><code class="highlighter-rouge">:page</code> is used as a token so that <code class="highlighter-rouge">StoriesComponent</code> can fetch the list of stories for a specific page</li>
  <li><code class="highlighter-rouge">:id</code> is similarly used so that <code class="highlighter-rouge">ItemCommentsComponent</code> can obtain all the comments for a specific item</li>
</ol>

<p>There’s a lot more you can do with routing, but this basic setup should be everything we need. Now let’s open <code class="highlighter-rouge">app.module.ts</code> to register our routing.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// app.module.ts</span>

<span class="c1">// ...</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">routing</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'./app.routes'</span><span class="p">;</span>

<span class="p">@</span><span class="nd">NgModule</span><span class="p">({</span>
  <span class="na">declarations</span><span class="p">:</span> <span class="p">[</span>
    <span class="c1">//...</span>
  <span class="p">],</span>
  <span class="na">imports</span><span class="p">:</span> <span class="p">[</span>
    <span class="c1">//...</span>
    <span class="nx">routing</span>
  <span class="p">],</span>
  <span class="na">providers</span><span class="p">:</span> <span class="p">[</span><span class="nx">HackerNewsAPIService</span><span class="p">],</span>
  <span class="na">bootstrap</span><span class="p">:</span> <span class="p">[</span><span class="nx">AppComponent</span><span class="p">]</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">AppModule</span> <span class="p">{</span> <span class="p">}</span></code></pre></figure>

<p>To tell Angular where to load the component to route to, we need to use <code class="highlighter-rouge">RouterOutlet</code>.</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="c">&lt;!-- app.component.html --&gt;</span>

<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"wrapper"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;app-header&gt;&lt;/app-header&gt;</span>
  <span class="nt">&lt;router-outlet&gt;&lt;/router-outlet&gt;</span>
  <span class="nt">&lt;app-footer&gt;&lt;/app-footer&gt;</span>
<span class="nt">&lt;/div&gt;</span></code></pre></figure>

<h2 id="story-navigation">Story Navigation</h2>

<p>Let’s bind our navigation links in <code class="highlighter-rouge">HeaderComponent</code> to their respective routes.</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="c">&lt;!-- header.component.html --&gt;</span>

<span class="nt">&lt;header&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"header"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">"home-link"</span> <span class="na">routerLink=</span><span class="s">"/news/1"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;img</span> <span class="na">class=</span><span class="s">"logo"</span> <span class="na">src=</span><span class="s">"https://i.imgur.com/J303pQ4.png"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;/a&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"header-text"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"left"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;h1</span> <span class="na">class=</span><span class="s">"name"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;a</span> <span class="na">routerLink=</span><span class="s">"/news/1"</span> <span class="na">class=</span><span class="s">"app-title"</span><span class="nt">&gt;</span>Angular 2 HN<span class="nt">&lt;/a&gt;</span>
        <span class="nt">&lt;/h1&gt;</span>
        <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"header-nav"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;a</span> <span class="na">routerLink=</span><span class="s">"/newest/1"</span><span class="nt">&gt;</span>new<span class="nt">&lt;/a&gt;</span>
          <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"divider"</span><span class="nt">&gt;</span>
            |
          <span class="nt">&lt;/span&gt;</span>
          <span class="nt">&lt;a</span> <span class="na">routerLink=</span><span class="s">"/show/1"</span><span class="nt">&gt;</span>show<span class="nt">&lt;/a&gt;</span>
          <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"divider"</span><span class="nt">&gt;</span>
            |
          <span class="nt">&lt;/span&gt;</span>
          <span class="nt">&lt;a</span> <span class="na">routerLink=</span><span class="s">"/ask/1"</span><span class="nt">&gt;</span>ask<span class="nt">&lt;/a&gt;</span>
          <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"divider"</span><span class="nt">&gt;</span>
            |
          <span class="nt">&lt;/span&gt;</span>
          <span class="nt">&lt;a</span> <span class="na">routerLink=</span><span class="s">"/jobs/1"</span><span class="nt">&gt;</span>jobs<span class="nt">&lt;/a&gt;</span>
        <span class="nt">&lt;/span&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"info"</span><span class="nt">&gt;</span>
        Built with <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"https://cli.angular.io/"</span> <span class="na">target=</span><span class="s">"_blank"</span><span class="nt">&gt;</span>Angular CLI<span class="nt">&lt;/a&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/header&gt;</span></code></pre></figure>

<p>The <code class="highlighter-rouge">RouterLink</code> directive is responsible for binding a specific element to a route. Let’s update the <code class="highlighter-rouge">StoriesComponent</code> now.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// stories.component.ts</span>

<span class="k">import</span> <span class="p">{</span> <span class="nx">Component</span><span class="p">,</span> <span class="nx">OnInit</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'@angular/core'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Observable</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'rxjs/Observable'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">ActivatedRoute</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'@angular/router'</span><span class="p">;</span>

<span class="k">import</span> <span class="p">{</span> <span class="nx">HackerNewsAPIService</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'../hackernews-api.service'</span><span class="p">;</span>

<span class="p">@</span><span class="nd">Component</span><span class="p">({</span>
  <span class="na">selector</span><span class="p">:</span> <span class="s1">'app-stories'</span><span class="p">,</span>
  <span class="na">templateUrl</span><span class="p">:</span> <span class="s1">'./stories.component.html'</span><span class="p">,</span>
  <span class="na">styleUrls</span><span class="p">:</span> <span class="p">[</span><span class="s1">'./stories.component.scss'</span><span class="p">]</span>
<span class="p">})</span>

<span class="k">export</span> <span class="kd">class</span> <span class="nx">StoriesComponent</span> <span class="kr">implements</span> <span class="nx">OnInit</span> <span class="p">{</span>
  <span class="nl">typeSub</span><span class="p">:</span> <span class="nx">any</span><span class="p">;</span>
  <span class="nl">pageSub</span><span class="p">:</span> <span class="nx">any</span><span class="p">;</span>
  <span class="nx">items</span><span class="p">;</span>
  <span class="nx">storiesType</span><span class="p">;</span>
  <span class="nl">pageNum</span><span class="p">:</span> <span class="nx">number</span><span class="p">;</span>
  <span class="nl">listStart</span><span class="p">:</span> <span class="nx">number</span><span class="p">;</span>

  <span class="kd">constructor</span><span class="p">(</span>
    <span class="kr">private</span> <span class="nx">_hackerNewsAPIService</span><span class="p">:</span> <span class="nx">HackerNewsAPIService</span><span class="p">,</span>
    <span class="kr">private</span> <span class="nx">route</span><span class="p">:</span> <span class="nx">ActivatedRoute</span>
  <span class="p">)</span> <span class="p">{}</span>

  <span class="nx">ngOnInit</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">typeSub</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">route</span>
      <span class="p">.</span><span class="nx">data</span>
      <span class="p">.</span><span class="nx">subscribe</span><span class="p">(</span><span class="nx">data</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">storiesType</span> <span class="o">=</span> <span class="p">(</span><span class="nx">data</span> <span class="k">as</span> <span class="nx">any</span><span class="p">).</span><span class="nx">storiesType</span><span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">pageSub</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">route</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">(</span><span class="nx">params</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">pageNum</span> <span class="o">=</span> <span class="o">+</span><span class="nx">params</span><span class="p">[</span><span class="s1">'page'</span><span class="p">]</span> <span class="p">?</span> <span class="o">+</span><span class="nx">params</span><span class="p">[</span><span class="s1">'page'</span><span class="p">]</span> <span class="p">:</span> <span class="mi">1</span><span class="p">;</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">_hackerNewsAPIService</span><span class="p">.</span><span class="nx">fetchStories</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">storiesType</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">pageNum</span><span class="p">)</span>
                              <span class="p">.</span><span class="nx">subscribe</span><span class="p">(</span>
                                <span class="nx">items</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">items</span> <span class="o">=</span> <span class="nx">items</span><span class="p">,</span>
                                <span class="nx">error</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Error fetching'</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">storiesType</span> <span class="o">+</span> <span class="s1">'stories'</span><span class="p">),</span>
                                <span class="p">()</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">listStart</span> <span class="o">=</span> <span class="p">((</span><span class="k">this</span><span class="p">.</span><span class="nx">pageNum</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="mi">30</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
    <span class="p">});</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>Let’s parse out what we’ve added. First of all, we imported <code class="highlighter-rouge">ActivatedRoute</code> which is a service that allows us to access information present in the route.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="k">import</span> <span class="p">{</span> <span class="nx">ActivatedRoute</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'@angular/router'</span><span class="p">;</span>

<span class="p">@</span><span class="nd">Component</span><span class="p">({</span>
  <span class="c1">//...</span>
<span class="p">})</span>

<span class="k">export</span> <span class="kd">class</span> <span class="nx">StoriesComponent</span> <span class="kr">implements</span> <span class="nx">OnInit</span> <span class="p">{</span>
<span class="c1">//..</span>

<span class="kd">constructor</span><span class="p">(</span>
  <span class="kr">private</span> <span class="nx">route</span><span class="p">:</span> <span class="nx">ActivatedRoute</span>
<span class="p">)</span> <span class="p">{}</span>
<span class="c1">//...</span>
<span class="p">}</span></code></pre></figure>

<p>We then subscribe to the route data property and store <code class="highlighter-rouge">storiesType</code> into a component variable in the <code class="highlighter-rouge">ngOnInit</code> hook. Notice how we assign any type to the response object. This is just a quick and simple way to opt-out of type checking. Otherwise you may see an error that states property <code class="highlighter-rouge">storiesType</code> does not exist.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">ngOnInit</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">typeSub</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">route</span>
    <span class="p">.</span><span class="nx">data</span>
    <span class="p">.</span><span class="nx">subscribe</span><span class="p">(</span><span class="nx">data</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">storiesType</span> <span class="o">=</span> <span class="p">(</span><span class="nx">data</span> <span class="k">as</span> <span class="nx">any</span><span class="p">).</span><span class="nx">storiesType</span><span class="p">);</span>

<span class="c1">// ...</span>
<span class="p">}</span></code></pre></figure>

<p>And finally, we subscribe to the route parameters and obtain the page number. We then fetch the list of stories using our data service.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">ngOnInit</span><span class="p">()</span> <span class="p">{</span>
<span class="c1">// ...</span>

<span class="k">this</span><span class="p">.</span><span class="nx">pageSub</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">route</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">(</span><span class="nx">params</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">pageNum</span> <span class="o">=</span> <span class="o">+</span><span class="nx">params</span><span class="p">[</span><span class="s1">'page'</span><span class="p">]</span> <span class="p">?</span> <span class="o">+</span><span class="nx">params</span><span class="p">[</span><span class="s1">'page'</span><span class="p">]</span> <span class="p">:</span> <span class="mi">1</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">_hackerNewsAPIService</span><span class="p">.</span><span class="nx">fetchStories</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">storiesType</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">pageNum</span><span class="p">)</span>
                            <span class="p">.</span><span class="nx">subscribe</span><span class="p">(</span>
                              <span class="nx">items</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">items</span> <span class="o">=</span> <span class="nx">items</span><span class="p">,</span>
                              <span class="nx">error</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Error fetching'</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">storiesType</span> <span class="o">+</span> <span class="s1">'stories'</span><span class="p">),</span>
                              <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
                                <span class="k">this</span><span class="p">.</span><span class="nx">listStart</span> <span class="o">=</span> <span class="p">((</span><span class="k">this</span><span class="p">.</span><span class="nx">pageNum</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="mi">30</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
                                <span class="nb">window</span><span class="p">.</span><span class="nx">scrollTo</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
                              <span class="p">});</span>
  <span class="p">});</span>
<span class="p">}</span></code></pre></figure>

<p>To signal completion, we use <code class="highlighter-rouge">onCompleted()</code> to update a <code class="highlighter-rouge">listStart</code> variable which is used as the starting value of our ordered list (which you can see in the markup below). We also scroll to the top of the window so the user is not stuck at the bottom of the page when he/she tries to switch pages.</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="c">&lt;!-- stories.component.html --&gt;</span>

<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"main-content"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"loading-section"</span> <span class="err">*</span><span class="na">ngIf=</span><span class="s">"!items"</span><span class="nt">&gt;</span>
    <span class="c">&lt;!-- You can add a loading indicator here if you want to :) --&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;div</span> <span class="err">*</span><span class="na">ngIf=</span><span class="s">"items"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;ol</span> <span class="na">start=</span><span class="s">"{{ listStart }}"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;li</span> <span class="err">*</span><span class="na">ngFor=</span><span class="s">"let item of items"</span> <span class="na">class=</span><span class="s">"post"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;item</span> <span class="na">class=</span><span class="s">"item-block"</span> <span class="err">[</span><span class="na">item</span><span class="err">]="</span><span class="na">item</span><span class="err">"</span><span class="nt">&gt;&lt;/item&gt;</span>
      <span class="nt">&lt;/li&gt;</span>
    <span class="nt">&lt;/ol&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"nav"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;a</span> <span class="err">*</span><span class="na">ngIf=</span><span class="s">"listStart !== 1"</span> <span class="err">[</span><span class="na">routerLink</span><span class="err">]="['/'</span> <span class="err">+</span> <span class="na">storiesType</span><span class="err">,</span> <span class="na">pageNum</span> <span class="na">-</span> <span class="na">1</span><span class="err">]"</span> <span class="na">class=</span><span class="s">"prev"</span><span class="nt">&gt;</span>
        ‹ Prev
      <span class="nt">&lt;/a&gt;</span>
      <span class="nt">&lt;a</span> <span class="err">*</span><span class="na">ngIf=</span><span class="s">"items.length === 30"</span> <span class="err">[</span><span class="na">routerLink</span><span class="err">]="['/'</span> <span class="err">+</span> <span class="na">storiesType</span><span class="err">,</span> <span class="na">pageNum</span> <span class="err">+</span> <span class="na">1</span><span class="err">]"</span> <span class="na">class=</span><span class="s">"more"</span><span class="nt">&gt;</span>
        More ›
      <span class="nt">&lt;/a&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span></code></pre></figure>

<p>We now have the front page complete with <a href="https://media.giphy.com/media/l3vR4zR3rCMX76Pm0/giphy.gif">navigation and pagination</a>. Run the application to see the good stuff.</p>

<h2 id="item-comments">Item Comments</h2>

<p>We’re almost done! Before we start adding our other comment page components, let’s update the links in <code class="highlighter-rouge">ItemComponent</code> to include routing.</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="c">&lt;!-- item.component.html --&gt;</span>

<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"item-laptop"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;p&gt;</span>
    <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">"title"</span> <span class="na">href=</span><span class="s">"{{item.url}}"</span><span class="nt">&gt;</span>
      {{item.title}}
    <span class="nt">&lt;/a&gt;</span>
    <span class="nt">&lt;span</span> <span class="err">*</span><span class="na">ngIf=</span><span class="s">"item.domain"</span> <span class="na">class=</span><span class="s">"domain"</span><span class="nt">&gt;</span>({{item.domain}})<span class="nt">&lt;/span&gt;</span>
  <span class="nt">&lt;/p&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"subtext-laptop"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;span&gt;</span>
      {{item.points}} points by
      <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">""</span><span class="nt">&gt;</span>{{item.user}}<span class="nt">&lt;/a&gt;</span>
    <span class="nt">&lt;/span&gt;</span>
    <span class="nt">&lt;span&gt;</span>
      {{item.time_ago}}
      <span class="nt">&lt;span&gt;</span> |
         <span class="nt">&lt;a</span> <span class="err">[</span><span class="na">routerLink</span><span class="err">]="['/</span><span class="na">item</span><span class="err">',</span> <span class="na">item</span><span class="err">.</span><span class="na">id</span><span class="err">]"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;span</span> <span class="err">*</span><span class="na">ngIf=</span><span class="s">"item.comments_count !== 0"</span><span class="nt">&gt;</span>
            {{item.comments_count}}
            <span class="nt">&lt;span</span> <span class="err">*</span><span class="na">ngIf=</span><span class="s">"item.comments_count === 1"</span><span class="nt">&gt;</span>comment<span class="nt">&lt;/span&gt;</span>
            <span class="nt">&lt;span</span> <span class="err">*</span><span class="na">ngIf=</span><span class="s">"item.comments_count &gt; 1"</span><span class="nt">&gt;</span>comments<span class="nt">&lt;/span&gt;</span>
          <span class="nt">&lt;/span&gt;</span>
          <span class="nt">&lt;span</span> <span class="err">*</span><span class="na">ngIf=</span><span class="s">"item.comments_count === 0"</span><span class="nt">&gt;</span>discuss<span class="nt">&lt;/span&gt;</span>
        <span class="nt">&lt;/a&gt;</span>
      <span class="nt">&lt;/span&gt;</span>
    <span class="nt">&lt;/span&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"item-mobile"</span><span class="nt">&gt;</span>
  <span class="c">&lt;!-- Markup that shows only on mobile (to give the app a
    responsive mobile feel). Same attributes as above,  
    nothing really new here (but refer to the source
    file if you're interested) --&gt;</span>
<span class="nt">&lt;/div&gt;</span></code></pre></figure>

<p>Run the application and click on an item’s comments.</p>

<p><img alt="Item Comments Route" title="Item Comments Route" data-src="https://i.imgur.com/tvCNyWz.png" class="lazyload" /></p>

<p>Beauty. We can see that it’s routing to <code class="highlighter-rouge">ItemCommentsComponent</code>. Now let’s create our additional components.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">ng g component CommentTree</code></pre></figure>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">ng g component Comment</code></pre></figure>

<p>We should add a new <code class="highlighter-rouge">GET</code> request to our data service to fetch comments, so let’s do that before we start filling our components in.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// hackernews.api.service.ts</span>

<span class="c1">//...</span>

<span class="nx">fetchComments</span><span class="p">(</span><span class="nx">id</span><span class="p">:</span> <span class="nx">number</span><span class="p">):</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">any</span><span class="o">&gt;</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">http</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">baseUrl</span><span class="p">}</span><span class="s2">/item/</span><span class="p">${</span><span class="nx">id</span><span class="p">}</span><span class="s2">`</span><span class="p">)</span>
                  <span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">());</span>
<span class="p">}</span></code></pre></figure>

<p>And now we can fill out our components.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// item-comments.component.ts</span>

<span class="k">import</span> <span class="p">{</span> <span class="nx">Component</span><span class="p">,</span> <span class="nx">OnInit</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'@angular/core'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">ActivatedRoute</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'@angular/router'</span><span class="p">;</span>

<span class="k">import</span> <span class="p">{</span> <span class="nx">HackerNewsAPIService</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'../hackernews-api.service'</span><span class="p">;</span>

<span class="p">@</span><span class="nd">Component</span><span class="p">({</span>
  <span class="na">selector</span><span class="p">:</span> <span class="s1">'app-item-comments'</span><span class="p">,</span>
  <span class="na">templateUrl</span><span class="p">:</span> <span class="s1">'./item-comments.component.html'</span><span class="p">,</span>
  <span class="na">styleUrls</span><span class="p">:</span> <span class="p">[</span><span class="s1">'./item-comments.component.scss'</span><span class="p">]</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">ItemCommentsComponent</span> <span class="kr">implements</span> <span class="nx">OnInit</span> <span class="p">{</span>
  <span class="nl">sub</span><span class="p">:</span> <span class="nx">any</span><span class="p">;</span>
  <span class="nx">item</span><span class="p">;</span>

  <span class="kd">constructor</span><span class="p">(</span>
    <span class="kr">private</span> <span class="nx">_hackerNewsAPIService</span><span class="p">:</span> <span class="nx">HackerNewsAPIService</span><span class="p">,</span>
    <span class="kr">private</span> <span class="nx">route</span><span class="p">:</span> <span class="nx">ActivatedRoute</span>
  <span class="p">)</span> <span class="p">{}</span>

  <span class="nx">ngOnInit</span><span class="p">()</span> <span class="p">{</span>    
    <span class="k">this</span><span class="p">.</span><span class="nx">sub</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">route</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">(</span><span class="nx">params</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="kd">let</span> <span class="nx">itemID</span> <span class="o">=</span> <span class="o">+</span><span class="nx">params</span><span class="p">[</span><span class="s1">'id'</span><span class="p">];</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">_hackerNewsAPIService</span><span class="p">.</span><span class="nx">fetchComments</span><span class="p">(</span><span class="nx">itemID</span><span class="p">).</span><span class="nx">subscribe</span><span class="p">(</span><span class="nx">data</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">item</span> <span class="o">=</span> <span class="nx">data</span><span class="p">;</span>
      <span class="p">},</span> <span class="nx">error</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Could not load item'</span> <span class="o">+</span> <span class="nx">itemID</span><span class="p">));</span>
    <span class="p">});</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>Similar to what we did in <code class="highlighter-rouge">StoriesComponent</code>, we subscribe to our route parameters, obtain the item id and use that to fetch our comments.</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="c">&lt;!-- item-comments.component.html --&gt;</span>

<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"main-content"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"loading-section"</span> <span class="err">*</span><span class="na">ngIf=</span><span class="s">"!item"</span><span class="nt">&gt;</span>
    <span class="c">&lt;!-- You can add a loading indicator here if you want to :) --&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;div</span> <span class="err">*</span><span class="na">ngIf=</span><span class="s">"item"</span> <span class="na">class=</span><span class="s">"item"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"mobile item-header"</span><span class="nt">&gt;</span>
     <span class="c">&lt;!-- Markup that shows only on mobile (to give the app a
    responsive mobile feel). Same attributes as below,
    nothing really new here (but refer to the source
    file if you're interested) --&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"laptop"</span> <span class="err">[</span><span class="na">class</span><span class="err">.</span><span class="na">item-header</span><span class="err">]="</span><span class="na">item</span><span class="err">.</span><span class="na">comments_count</span> <span class="nt">&gt;</span> 0 || item.type === 'job'" [class.head-margin]="item.text"&gt;
      <span class="nt">&lt;p&gt;</span>
        <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">"title"</span> <span class="na">href=</span><span class="s">"{{item.url}}"</span><span class="nt">&gt;</span>
        {{item.title}}
        <span class="nt">&lt;/a&gt;</span>
        <span class="nt">&lt;span</span> <span class="err">*</span><span class="na">ngIf=</span><span class="s">"item.domain"</span> <span class="na">class=</span><span class="s">"domain"</span><span class="nt">&gt;</span>({{item.domain}})<span class="nt">&lt;/span&gt;</span>
      <span class="nt">&lt;/p&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"subtext"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;span&gt;</span>
        {{item.points}} points by
          <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">""</span><span class="nt">&gt;</span>{{item.user}}<span class="nt">&lt;/a&gt;</span>
        <span class="nt">&lt;/span&gt;</span>
        <span class="nt">&lt;span&gt;</span>
          {{item.time_ago}}
          <span class="nt">&lt;span&gt;</span> |
            <span class="nt">&lt;a</span> <span class="err">[</span><span class="na">routerLink</span><span class="err">]="['/</span><span class="na">item</span><span class="err">',</span> <span class="na">item</span><span class="err">.</span><span class="na">id</span><span class="err">]"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;span</span> <span class="err">*</span><span class="na">ngIf=</span><span class="s">"item.comments_count !== 0"</span><span class="nt">&gt;</span>
                {{item.comments_count}}
                <span class="nt">&lt;span</span> <span class="err">*</span><span class="na">ngIf=</span><span class="s">"item.comments_count === 1"</span><span class="nt">&gt;</span>comment<span class="nt">&lt;/span&gt;</span>
                <span class="nt">&lt;span</span> <span class="err">*</span><span class="na">ngIf=</span><span class="s">"item.comments_count &gt; 1"</span><span class="nt">&gt;</span>comments<span class="nt">&lt;/span&gt;</span>
              <span class="nt">&lt;/span&gt;</span>
              <span class="nt">&lt;span</span> <span class="err">*</span><span class="na">ngIf=</span><span class="s">"item.comments_count === 0"</span><span class="nt">&gt;</span>discuss<span class="nt">&lt;/span&gt;</span>
            <span class="nt">&lt;/a&gt;</span>
          <span class="nt">&lt;/span&gt;</span>
        <span class="nt">&lt;/span&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"subject"</span> <span class="err">[</span><span class="na">innerHTML</span><span class="err">]="</span><span class="na">item</span><span class="err">.</span><span class="na">content</span><span class="err">"</span><span class="nt">&gt;&lt;/p&gt;</span>
    <span class="nt">&lt;app-comment-tree</span> <span class="err">[</span><span class="na">commentTree</span><span class="err">]="</span><span class="na">item</span><span class="err">.</span><span class="na">comments</span><span class="err">"</span><span class="nt">&gt;&lt;/app-comment-tree&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span></code></pre></figure>

<p>At the top of the component, we’re going to display the item details, followed by it’s description (<code class="highlighter-rouge">item.content</code>). We then input the entire comments object (<code class="highlighter-rouge">item.comments</code>) to <code class="highlighter-rouge">app-comment-tree</code>, the selector for <code class="highlighter-rouge">CommentTreeComponent</code>. The styling for this component can be found <a href="https://github.com/housseindjirdeh/angular2-hn/blob/item-comments/src/app/item-comments/item-comments.component.scss">here</a>.</p>

<p>Next, set up the <code class="highlighter-rouge">CommentTreeComponent</code>.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// comment-tree.component.ts</span>

<span class="k">import</span> <span class="p">{</span> <span class="nx">Component</span><span class="p">,</span> <span class="nx">Input</span><span class="p">,</span> <span class="nx">OnInit</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'@angular/core'</span><span class="p">;</span>

<span class="p">@</span><span class="nd">Component</span><span class="p">({</span>
  <span class="na">selector</span><span class="p">:</span> <span class="s1">'app-comment-tree'</span><span class="p">,</span>
  <span class="na">templateUrl</span><span class="p">:</span> <span class="s1">'./comment-tree.component.html'</span><span class="p">,</span>
  <span class="na">styleUrls</span><span class="p">:</span> <span class="p">[</span><span class="s1">'./comment-tree.component.scss'</span><span class="p">]</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">CommentTreeComponent</span> <span class="kr">implements</span> <span class="nx">OnInit</span> <span class="p">{</span>
  <span class="p">@</span><span class="nd">Input</span><span class="p">()</span> <span class="nx">commentTree</span><span class="p">;</span>

  <span class="kd">constructor</span><span class="p">()</span> <span class="p">{}</span>

  <span class="nx">ngOnInit</span><span class="p">()</span> <span class="p">{</span>

  <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="c">&lt;!-- comment-tree.component.html --&gt;</span>

<span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">"comment-list"</span><span class="nt">&gt;</span>
   <span class="nt">&lt;li</span> <span class="err">*</span><span class="na">ngFor=</span><span class="s">"let comment of commentTree"</span> <span class="nt">&gt;</span>
      <span class="nt">&lt;app-comment</span> <span class="err">[</span><span class="na">comment</span><span class="err">]="</span><span class="na">comment</span><span class="err">"</span><span class="nt">&gt;&lt;/app-comment&gt;</span>
   <span class="nt">&lt;/li&gt;</span>
<span class="nt">&lt;/ul&gt;</span></code></pre></figure>

<p>Nice and simple, we list all the comments using the <code class="highlighter-rouge">ngFor</code> directive. Click <a href="https://github.com/housseindjirdeh/angular2-hn/blob/item-comments/src/app/comment-tree/comment-tree.component.scss">here</a> to see it’s SCSS file.</p>

<p>Let’s fill out <code class="highlighter-rouge">CommentComponent</code>, the component responsible for each specific comment.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// comment.component.ts</span>

<span class="k">import</span> <span class="p">{</span> <span class="nx">Component</span><span class="p">,</span> <span class="nx">Input</span><span class="p">,</span> <span class="nx">OnInit</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'@angular/core'</span><span class="p">;</span>

<span class="p">@</span><span class="nd">Component</span><span class="p">({</span>
  <span class="na">selector</span><span class="p">:</span> <span class="s1">'app-comment'</span><span class="p">,</span>
  <span class="na">templateUrl</span><span class="p">:</span> <span class="s1">'./comment.component.html'</span><span class="p">,</span>
  <span class="na">styleUrls</span><span class="p">:</span> <span class="p">[</span><span class="s1">'./comment.component.scss'</span><span class="p">]</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">CommentComponent</span> <span class="kr">implements</span> <span class="nx">OnInit</span> <span class="p">{</span>
  <span class="p">@</span><span class="nd">Input</span><span class="p">()</span> <span class="nx">comment</span><span class="p">;</span>
  <span class="nl">collapse</span><span class="p">:</span> <span class="kr">boolean</span><span class="p">;</span>

  <span class="kd">constructor</span><span class="p">()</span> <span class="p">{}</span>

  <span class="nx">ngOnInit</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">collapse</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="c">&lt;!-- comment.component.html --&gt;</span>

<span class="nt">&lt;div</span> <span class="err">*</span><span class="na">ngIf=</span><span class="s">"!comment.deleted"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"meta"</span> <span class="err">[</span><span class="na">class</span><span class="err">.</span><span class="na">meta-collapse</span><span class="err">]="</span><span class="na">collapse</span><span class="err">"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"collapse"</span> <span class="err">(</span><span class="na">click</span><span class="err">)="</span><span class="na">collapse =</span><span class="err"> </span><span class="s">!collapse"</span><span class="nt">&gt;</span>[{{collapse ? '+' : '-'}}]<span class="nt">&lt;/span&gt;</span>
    <span class="nt">&lt;a</span> <span class="err">[</span><span class="na">routerLink</span><span class="err">]="['/</span><span class="na">user</span><span class="err">',</span> <span class="na">comment</span><span class="err">.</span><span class="na">user</span><span class="err">]"</span> <span class="na">routerLinkActive=</span><span class="s">"active"</span><span class="nt">&gt;</span>{{comment.user}}<span class="nt">&lt;/a&gt;</span>
    <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"time"</span><span class="nt">&gt;</span>{{comment.time_ago}}<span class="nt">&lt;/span&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"comment-tree"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="err">[</span><span class="na">hidden</span><span class="err">]="</span><span class="na">collapse</span><span class="err">"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"comment-text"</span> <span class="err">[</span><span class="na">innerHTML</span><span class="err">]="</span><span class="na">comment</span><span class="err">.</span><span class="na">content</span><span class="err">"</span><span class="nt">&gt;&lt;/p&gt;</span>
      <span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">"subtree"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;li</span> <span class="err">*</span><span class="na">ngFor=</span><span class="s">"let subComment of comment.comments"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;app-comment</span> <span class="err">[</span><span class="na">comment</span><span class="err">]="</span><span class="na">subComment</span><span class="err">"</span><span class="nt">&gt;&lt;/app-comment&gt;</span>
        <span class="nt">&lt;/li&gt;</span>
      <span class="nt">&lt;/ul&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;div</span> <span class="err">*</span><span class="na">ngIf=</span><span class="s">"comment.deleted"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"deleted-meta"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"collapse"</span><span class="nt">&gt;</span>[deleted]<span class="nt">&lt;/span&gt;</span> | Comment Deleted
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span></code></pre></figure>

<p>Notice how we’re recursively referencing <code class="highlighter-rouge">app-comment</code> inside of it’s own component. This is because each comment object in the array has it’s own array of comments, and we’re using recursion to show all of them.</p>

<p>Click <a href="https://github.com/housseindjirdeh/angular2-hn/blob/item-comments/src/app/comment/comment.component.scss">here</a> to see the styling for this component. If you now run the application, you can see all the comments for each item!</p>

<p><img alt="Item Comments" title="Item Comments" data-src="https://i.imgur.com/lLcdxd0.png" class="lazyload" /></p>

<p>The entire source code for this step can be found <a href="https://github.com/housseindjirdeh/angular2-hn/tree/item-comments">here</a>.</p>

<h2 id="user-profiles">User Profiles</h2>

<p>All we have left is user profiles. Since the concept is pretty much the same, I won’t go through this in detail. All you need to do is:</p>

<ol>
  <li>Set up another request in the data service to point to the user endpoint</li>
  <li>Create a user component</li>
  <li>Add another field to your routes file</li>
  <li>Update the user links in the other components to route to the user</li>
</ol>

<p>And that’s it! Take a look <a href="https://github.com/housseindjirdeh/angular2-hn/tree/version-1/src/app/user">here</a> if you want to see the whole user component setup.</p>

<h2 id="wrapping-things-up">Wrapping things up</h2>

<p>We’re done! To kick off a production build, you can run <code class="highlighter-rouge">ng build --prod</code> or <code class="highlighter-rouge">ng serve --prod</code> which will make use of uglifying and tree-shaking.</p>

<p>I hope you found this tutorial useful. If you did, please <a href="https://twitter.com/intent/tweet?original_referer=/angular2-hacker-news&amp;ref_src=twsrc%5Etfw&amp;text=Building Hacker News with Angular 2 CLI, RxJS and Webpack&amp;tw_p=tweetbutton&amp;url=https://houssein.me/angular2-hacker-news&amp;via=hdjirdeh">tweet it forward</a> and/or <a href="https://github.com/housseindjirdeh/angular2-hn">star the repo!</a> I would also love to hear any type of feedback whatsoever.</p>

<p>If you happen to be interested enough to work on this app further, take a look at the <a href="https://github.com/housseindjirdeh/angular2-hn/issues">issue list</a> and feel free to put up a feature request or a PR! There have been some structural and feature changes since I’ve written this post and this version of the app lives in a <a href="https://github.com/housseindjirdeh/angular2-hn/tree/version-1">separate branch</a> from <a href="https://github.com/housseindjirdeh/angular2-hn">master</a>, so you’ll need to go there to see the latest version <i class="fa fa-smile-o" aria-hidden="true"></i>.</p>

<p>If you’re interested, please take a look at <a href="https://houssein.me/progressive-angular-applications">my post</a> on how I made this a Progressive Web App that works offline and can be installed to your mobile homescreen!</p>

    </div>

    <div class="f5 fw6 lh-copy mt5">
      <p>If you have any questions or suggestions, feel free to open an
        <a class="link-effect" href="https://github.com/housseindjirdeh/housseindjirdeh.github.io/issues/new">issue!</a>
      </p>
    </div>

    <div class="flex flex-column items-center mt6 mt7-ns mb5">
	<p class="grow">
		<a class="f4 fw6 link near-black hover-red ttl" href="https://twitter.com/hdjirdeh" rel="noopener noreferrer" target="_blank">
			Houssein Djirdeh
		</a>
	</p>
</div>
  </div>
  
  <script>
  /*! highlight.js v9.12.0 | BSD3 License | git.io/hljslicense */
  !function(e){var t="object"==typeof window&&window||"object"==typeof self&&self;"undefined"!=typeof exports?e(exports):t&&(t.hljs=e({}),"function"==typeof define&&define.amd&&define([],function(){return t.hljs}))}(function(e){function t(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function r(e){return e.nodeName.toLowerCase()}function n(e,t){var r=e&&e.exec(t);return r&&0===r.index}function a(e){return v.test(e)}function c(e){var t,r={},n=Array.prototype.slice.call(arguments,1);for(t in e)r[t]=e[t];return n.forEach(function(e){for(t in e)r[t]=e[t]}),r}function i(e){var t=[];return function e(n,a){for(var c=n.firstChild;c;c=c.nextSibling)3===c.nodeType?a+=c.nodeValue.length:1===c.nodeType&&(t.push({event:"start",offset:a,node:c}),a=e(c,a),r(c).match(/br|hr|img|input/)||t.push({event:"stop",offset:a,node:c}));return a}(e,0),t}function s(e){function t(e){return e&&e.source||e}function r(r,n){return new RegExp(t(r),"m"+(e.cI?"i":"")+(n?"g":""))}!function n(a,i){if(!a.compiled){if(a.compiled=!0,a.k=a.k||a.bK,a.k){var s={},o=function(t,r){e.cI&&(r=r.toLowerCase()),r.split(" ").forEach(function(e){var r=e.split("|");s[r[0]]=[t,r[1]?Number(r[1]):1]})};"string"==typeof a.k?o("keyword",a.k):d(a.k).forEach(function(e){o(e,a.k[e])}),a.k=s}a.lR=r(a.l||/\w+/,!0),i&&(a.bK&&(a.b="\\b("+a.bK.split(" ").join("|")+")\\b"),a.b||(a.b=/\B|\b/),a.bR=r(a.b),a.e||a.eW||(a.e=/\B|\b/),a.e&&(a.eR=r(a.e)),a.tE=t(a.e)||"",a.eW&&i.tE&&(a.tE+=(a.e?"|":"")+i.tE)),a.i&&(a.iR=r(a.i)),null==a.r&&(a.r=1),a.c||(a.c=[]),a.c=Array.prototype.concat.apply([],a.c.map(function(e){return(t="self"===e?a:e).v&&!t.cached_variants&&(t.cached_variants=t.v.map(function(e){return c(t,{v:null},e)})),t.cached_variants||t.eW&&[c(t)]||[t];var t})),a.c.forEach(function(e){n(e,a)}),a.starts&&n(a.starts,i);var l=a.c.map(function(e){return e.bK?"\\.?("+e.b+")\\.?":e.b}).concat([a.tE,a.i]).map(t).filter(Boolean);a.t=l.length?r(l.join("|"),!0):{exec:function(){return null}}}}(e)}function o(e,r,a,c){function i(e,t,r,n){var a='<span class="'+(n?"":E.classPrefix);return(a+=e+'">')+t+(r?"":y)}function u(){N+=null!=m.sL?function(){var e="string"==typeof m.sL;if(e&&!h[m.sL])return t(w);var r=e?o(m.sL,w,!0,v[m.sL]):l(w,m.sL.length?m.sL:void 0);return m.r>0&&(M+=r.r),e&&(v[m.sL]=r.top),i(r.language,r.value,!1,!0)}():function(){var e,r,n,a,c,s,o;if(!m.k)return t(w);for(a="",r=0,m.lR.lastIndex=0,n=m.lR.exec(w);n;)a+=t(w.substring(r,n.index)),c=m,s=n,o=g.cI?s[0].toLowerCase():s[0],e=c.k.hasOwnProperty(o)&&c.k[o],e?(M+=e[1],a+=i(e[0],t(n[0]))):a+=t(n[0]),r=m.lR.lastIndex,n=m.lR.exec(w);return a+t(w.substr(r))}(),w=""}function f(e){N+=e.cN?i(e.cN,"",!0):"",m=Object.create(e,{parent:{value:m}})}function b(e,t){if(w+=e,null==t)return u(),0;var r=function(e,t){var r,a;for(r=0,a=t.c.length;a>r;r++)if(n(t.c[r].bR,e))return t.c[r]}(t,m);if(r)return r.skip?w+=t:(r.eB&&(w+=t),u(),r.rB||r.eB||(w=t)),f(r),r.rB?0:t.length;var c,i=function e(t,r){if(n(t.eR,r)){for(;t.endsParent&&t.parent;)t=t.parent;return t}return t.eW?e(t.parent,r):void 0}(m,t);if(i){var s=m;s.skip?w+=t:(s.rE||s.eE||(w+=t),u(),s.eE&&(w=t));do{m.cN&&(N+=y),m.skip||(M+=m.r),m=m.parent}while(m!==i.parent);return i.starts&&f(i.starts),s.rE?0:t.length}if(c=t,!a&&n(m.iR,c))throw new Error('Illegal lexeme "'+t+'" for mode "'+(m.cN||"<unnamed>")+'"');return w+=t,t.length||1}var g=p(e);if(!g)throw new Error('Unknown language: "'+e+'"');s(g);var d,m=c||g,v={},N="";for(d=m;d!==g;d=d.parent)d.cN&&(N=i(d.cN,"",!0)+N);var w="",M=0;try{for(var x,R,C=0;m.t.lastIndex=C,x=m.t.exec(r);)R=b(r.substring(C,x.index),x[0]),C=x.index+R;for(b(r.substr(C)),d=m;d.parent;d=d.parent)d.cN&&(N+=y);return{r:M,value:N,language:e,top:m}}catch(e){if(e.message&&-1!==e.message.indexOf("Illegal"))return{r:0,value:t(r)};throw e}}function l(e,r){r=r||E.languages||d(h);var n={r:0,value:t(e)},a=n;return r.filter(p).forEach(function(t){var r=o(t,e,!1);r.language=t,r.r>a.r&&(a=r),r.r>n.r&&(a=n,n=r)}),a.language&&(n.second_best=a),n}function u(e){return E.tabReplace||E.useBR?e.replace(w,function(e,t){return E.useBR&&"\n"===e?"<br>":E.tabReplace?t.replace(/\t/g,E.tabReplace):""}):e}function f(e){var n,c,s,f,b,d,h,v,w,y,M=function(e){var t,r,n,c,i=e.className+" ";if(i+=e.parentNode?e.parentNode.className:"",r=N.exec(i))return p(r[1])?r[1]:"no-highlight";for(t=0,n=(i=i.split(/\s+/)).length;n>t;t++)if(c=i[t],a(c)||p(c))return c}(e);a(M)||(E.useBR?(n=document.createElementNS("http://www.w3.org/1999/xhtml","div")).innerHTML=e.innerHTML.replace(/\n/g,"").replace(/<br[ \/]*>/g,"\n"):n=e,b=n.textContent,s=M?o(M,b,!0):l(b),(c=i(n)).length&&((f=document.createElementNS("http://www.w3.org/1999/xhtml","div")).innerHTML=s.value,s.value=function(e,n,a){function c(){return e.length&&n.length?e[0].offset!==n[0].offset?e[0].offset<n[0].offset?e:n:"start"===n[0].event?e:n:e.length?e:n}function i(e){u+="<"+r(e)+g.map.call(e.attributes,function(e){return" "+e.nodeName+'="'+t(e.value).replace('"',"&quot;")+'"'}).join("")+">"}function s(e){u+="</"+r(e)+">"}function o(e){("start"===e.event?i:s)(e.node)}for(var l=0,u="",f=[];e.length||n.length;){var b=c();if(u+=t(a.substring(l,b[0].offset)),l=b[0].offset,b===e){f.reverse().forEach(s);do{o(b.splice(0,1)[0]),b=c()}while(b===e&&b.length&&b[0].offset===l);f.reverse().forEach(i)}else"start"===b[0].event?f.push(b[0].node):f.pop(),o(b.splice(0,1)[0])}return u+t(a.substr(l))}(c,i(f),b)),s.value=u(s.value),e.innerHTML=s.value,e.className=(d=e.className,h=M,v=s.language,w=h?m[h]:v,y=[d.trim()],d.match(/\bhljs\b/)||y.push("hljs"),-1===d.indexOf(w)&&y.push(w),y.join(" ").trim()),e.result={language:s.language,re:s.r},s.second_best&&(e.second_best={language:s.second_best.language,re:s.second_best.r}))}function b(){if(!b.called){b.called=!0;var e=document.querySelectorAll("pre code");g.forEach.call(e,f)}}function p(e){return e=(e||"").toLowerCase(),h[e]||h[m[e]]}var g=[],d=Object.keys,h={},m={},v=/^(no-?highlight|plain|text)$/i,N=/\blang(?:uage)?-([\w-]+)\b/i,w=/((^(<[^>]+>|\t|)+|(?:\n)))/gm,y="</span>",E={classPrefix:"hljs-",tabReplace:null,useBR:!1,languages:void 0};return e.highlight=o,e.highlightAuto=l,e.fixMarkup=u,e.highlightBlock=f,e.configure=function(e){E=c(E,e)},e.initHighlighting=b,e.initHighlightingOnLoad=function(){addEventListener("DOMContentLoaded",b,!1),addEventListener("load",b,!1)},e.registerLanguage=function(t,r){var n=h[t]=r(e);n.aliases&&n.aliases.forEach(function(e){m[e]=t})},e.listLanguages=function(){return d(h)},e.getLanguage=p,e.inherit=c,e.IR="[a-zA-Z]\\w*",e.UIR="[a-zA-Z_]\\w*",e.NR="\\b\\d+(\\.\\d+)?",e.CNR="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",e.BNR="\\b(0b[01]+)",e.RSR="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",e.BE={b:"\\\\[\\s\\S]",r:0},e.ASM={cN:"string",b:"'",e:"'",i:"\\n",c:[e.BE]},e.QSM={cN:"string",b:'"',e:'"',i:"\\n",c:[e.BE]},e.PWM={b:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},e.C=function(t,r,n){var a=e.inherit({cN:"comment",b:t,e:r,c:[]},n||{});return a.c.push(e.PWM),a.c.push({cN:"doctag",b:"(?:TODO|FIXME|NOTE|BUG|XXX):",r:0}),a},e.CLCM=e.C("//","$"),e.CBCM=e.C("/\\*","\\*/"),e.HCM=e.C("#","$"),e.NM={cN:"number",b:e.NR,r:0},e.CNM={cN:"number",b:e.CNR,r:0},e.BNM={cN:"number",b:e.BNR,r:0},e.CSSNM={cN:"number",b:e.NR+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",r:0},e.RM={cN:"regexp",b:/\//,e:/\/[gimuy]*/,i:/\n/,c:[e.BE,{b:/\[/,e:/\]/,r:0,c:[e.BE]}]},e.TM={cN:"title",b:e.IR,r:0},e.UTM={cN:"title",b:e.UIR,r:0},e.METHOD_GUARD={b:"\\.\\s*"+e.UIR,r:0},e}),hljs.registerLanguage("css",function(e){var t={b:/[A-Z\_\.\-]+\s*:/,rB:!0,e:";",eW:!0,c:[{cN:"attribute",b:/\S/,e:":",eE:!0,starts:{eW:!0,eE:!0,c:[{b:/[\w-]+\(/,rB:!0,c:[{cN:"built_in",b:/[\w-]+/},{b:/\(/,e:/\)/,c:[e.ASM,e.QSM]}]},e.CSSNM,e.QSM,e.ASM,e.CBCM,{cN:"number",b:"#[0-9A-Fa-f]+"},{cN:"meta",b:"!important"}]}}]};return{cI:!0,i:/[=\/|'\$]/,c:[e.CBCM,{cN:"selector-id",b:/#[A-Za-z0-9_-]+/},{cN:"selector-class",b:/\.[A-Za-z0-9_-]+/},{cN:"selector-attr",b:/\[/,e:/\]/,i:"$"},{cN:"selector-pseudo",b:/:(:)?[a-zA-Z0-9\_\-\+\(\)"'.]+/},{b:"@(font-face|page)",l:"[a-z-]+",k:"font-face page"},{b:"@",e:"[{;]",i:/:/,c:[{cN:"keyword",b:/\w+/},{b:/\s/,eW:!0,eE:!0,r:0,c:[e.ASM,e.QSM,e.CSSNM]}]},{cN:"selector-tag",b:"[a-zA-Z-][a-zA-Z0-9_-]*",r:0},{b:"{",e:"}",i:/\S/,c:[e.CBCM,t]}]}}),hljs.registerLanguage("bash",function(e){var t={cN:"variable",v:[{b:/\$[\w\d#@][\w\d_]*/},{b:/\$\{(.*?)}/}]},r={cN:"string",b:/"/,e:/"/,c:[e.BE,t,{cN:"variable",b:/\$\(/,e:/\)/,c:[e.BE]}]};return{aliases:["sh","zsh"],l:/\b-?[a-z\._]+\b/,k:{keyword:"if then else elif fi for while in do done case esac function",literal:"true false",built_in:"break cd continue eval exec exit export getopts hash pwd readonly return shift test times trap umask unset alias bind builtin caller command declare echo enable help let local logout mapfile printf read readarray source type typeset ulimit unalias set shopt autoload bg bindkey bye cap chdir clone comparguments compcall compctl compdescribe compfiles compgroups compquote comptags comptry compvalues dirs disable disown echotc echoti emulate fc fg float functions getcap getln history integer jobs kill limit log noglob popd print pushd pushln rehash sched setcap setopt stat suspend ttyctl unfunction unhash unlimit unsetopt vared wait whence where which zcompile zformat zftp zle zmodload zparseopts zprof zpty zregexparse zsocket zstyle ztcp",_:"-ne -eq -lt -gt -f -d -e -s -l -a"},c:[{cN:"meta",b:/^#![^\n]+sh\s*$/,r:10},{cN:"function",b:/\w[\w\d_]*\s*\(\s*\)\s*\{/,rB:!0,c:[e.inherit(e.TM,{b:/\w[\w\d_]*/})],r:0},e.HCM,r,{cN:"string",b:/'/,e:/'/},t]}}),hljs.registerLanguage("xml",function(e){var t={eW:!0,i:/</,r:0,c:[{cN:"attr",b:"[A-Za-z0-9\\._:-]+",r:0},{b:/=\s*/,r:0,c:[{cN:"string",endsParent:!0,v:[{b:/"/,e:/"/},{b:/'/,e:/'/},{b:/[^\s"'=<>`]+/}]}]}]};return{aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist"],cI:!0,c:[{cN:"meta",b:"<!DOCTYPE",e:">",r:10,c:[{b:"\\[",e:"\\]"}]},e.C("\x3c!--","--\x3e",{r:10}),{b:"<\\!\\[CDATA\\[",e:"\\]\\]>",r:10},{b:/<\?(php)?/,e:/\?>/,sL:"php",c:[{b:"/\\*",e:"\\*/",skip:!0}]},{cN:"tag",b:"<style(?=\\s|>|$)",e:">",k:{name:"style"},c:[t],starts:{e:"</style>",rE:!0,sL:["css","xml"]}},{cN:"tag",b:"<script(?=\\s|>|$)",e:">",k:{name:"script"},c:[t],starts:{e:"<\/script>",rE:!0,sL:["actionscript","javascript","handlebars","xml"]}},{cN:"meta",v:[{b:/<\?xml/,e:/\?>/,r:10},{b:/<\?\w+/,e:/\?>/}]},{cN:"tag",b:"</?",e:"/?>",c:[{cN:"name",b:/[^\/><\s]+/,r:0},t]}]}}),hljs.registerLanguage("json",function(e){var t={literal:"true false null"},r=[e.QSM,e.CNM],n={e:",",eW:!0,eE:!0,c:r,k:t},a={b:"{",e:"}",c:[{cN:"attr",b:/"/,e:/"/,c:[e.BE],i:"\\n"},e.inherit(n,{b:/:/})],i:"\\S"},c={b:"\\[",e:"\\]",c:[e.inherit(n)],i:"\\S"};return r.splice(r.length,0,a,c),{c:r,k:t,i:"\\S"}}),hljs.registerLanguage("javascript",function(e){var t="[A-Za-z$_][0-9A-Za-z$_]*",r={keyword:"in of if for while finally var new function do return void else break catch instanceof with throw case default try this switch continue typeof delete let yield const export super debugger as async await static import from as",literal:"true false null undefined NaN Infinity",built_in:"eval isFinite isNaN parseFloat parseInt decodeURI decodeURIComponent encodeURI encodeURIComponent escape unescape Object Function Boolean Error EvalError InternalError RangeError ReferenceError StopIteration SyntaxError TypeError URIError Number Math Date String RegExp Array Float32Array Float64Array Int16Array Int32Array Int8Array Uint16Array Uint32Array Uint8Array Uint8ClampedArray ArrayBuffer DataView JSON Intl arguments require module console window document Symbol Set Map WeakSet WeakMap Proxy Reflect Promise"},n={cN:"number",v:[{b:"\\b(0[bB][01]+)"},{b:"\\b(0[oO][0-7]+)"},{b:e.CNR}],r:0},a={cN:"subst",b:"\\$\\{",e:"\\}",k:r,c:[]},c={cN:"string",b:"`",e:"`",c:[e.BE,a]};a.c=[e.ASM,e.QSM,c,n,e.RM];var i=a.c.concat([e.CBCM,e.CLCM]);return{aliases:["js","jsx"],k:r,c:[{cN:"meta",r:10,b:/^\s*['"]use (strict|asm)['"]/},{cN:"meta",b:/^#!/,e:/$/},e.ASM,e.QSM,c,e.CLCM,e.CBCM,n,{b:/[{,]\s*/,r:0,c:[{b:t+"\\s*:",rB:!0,r:0,c:[{cN:"attr",b:t,r:0}]}]},{b:"("+e.RSR+"|\\b(case|return|throw)\\b)\\s*",k:"return throw case",c:[e.CLCM,e.CBCM,e.RM,{cN:"function",b:"(\\(.*?\\)|"+t+")\\s*=>",rB:!0,e:"\\s*=>",c:[{cN:"params",v:[{b:t},{b:/\(\s*\)/},{b:/\(/,e:/\)/,eB:!0,eE:!0,k:r,c:i}]}]},{b:/</,e:/(\/\w+|\w+\/)>/,sL:"xml",c:[{b:/<\w+\s*\/>/,skip:!0},{b:/<\w+/,e:/(\/\w+|\w+\/)>/,skip:!0,c:[{b:/<\w+\s*\/>/,skip:!0},"self"]}]}],r:0},{cN:"function",bK:"function",e:/\{/,eE:!0,c:[e.inherit(e.TM,{b:t}),{cN:"params",b:/\(/,e:/\)/,eB:!0,eE:!0,c:i}],i:/\[|%/},{b:/\$[(.]/},e.METHOD_GUARD,{cN:"class",bK:"class",e:/[{;=]/,eE:!0,i:/[:"\[\]]/,c:[{bK:"extends"},e.UTM]},{bK:"constructor",e:/\{/,eE:!0}],i:/#(?!!)/}});
</script>
<script>
  window.addEventListener('load', () => {
    hljs.initHighlighting();
  });
</script> <script>
  /*! lazysizes - v4.0.3 */
  !function(a,b){var c=b(a,a.document);a.lazySizes=c,"object"==typeof module&&module.exports&&(module.exports=c)}(window,function(a,b){"use strict";if(b.getElementsByClassName){var c,d,e=b.documentElement,f=a.Date,g=a.HTMLPictureElement,h="addEventListener",i="getAttribute",j=a[h],k=a.setTimeout,l=a.requestAnimationFrame||k,m=a.requestIdleCallback,n=/^picture$/i,o=["load","error","lazyincluded","_lazyloaded"],p={},q=Array.prototype.forEach,r=function(a,b){return p[b]||(p[b]=new RegExp("(\\s|^)"+b+"(\\s|$)")),p[b].test(a[i]("class")||"")&&p[b]},s=function(a,b){r(a,b)||a.setAttribute("class",(a[i]("class")||"").trim()+" "+b)},t=function(a,b){var c;(c=r(a,b))&&a.setAttribute("class",(a[i]("class")||"").replace(c," "))},u=function(a,b,c){var d=c?h:"removeEventListener";c&&u(a,b),o.forEach(function(c){a[d](c,b)})},v=function(a,d,e,f,g){var h=b.createEvent("CustomEvent");return e||(e={}),e.instance=c,h.initCustomEvent(d,!f,!g,e),a.dispatchEvent(h),h},w=function(b,c){var e;!g&&(e=a.picturefill||d.pf)?e({reevaluate:!0,elements:[b]}):c&&c.src&&(b.src=c.src)},x=function(a,b){return(getComputedStyle(a,null)||{})[b]},y=function(a,b,c){for(c=c||a.offsetWidth;c<d.minSize&&b&&!a._lazysizesWidth;)c=b.offsetWidth,b=b.parentNode;return c},z=function(){var a,c,d=[],e=[],f=d,g=function(){var b=f;for(f=d.length?e:d,a=!0,c=!1;b.length;)b.shift()();a=!1},h=function(d,e){a&&!e?d.apply(this,arguments):(f.push(d),c||(c=!0,(b.hidden?k:l)(g)))};return h._lsFlush=g,h}(),A=function(a,b){return b?function(){z(a)}:function(){var b=this,c=arguments;z(function(){a.apply(b,c)})}},B=function(a){var b,c=0,e=d.throttleDelay,g=d.ricTimeout,h=function(){b=!1,c=f.now(),a()},i=m&&g>49?function(){m(h,{timeout:g}),g!==d.ricTimeout&&(g=d.ricTimeout)}:A(function(){k(h)},!0);return function(a){var d;(a=a===!0)&&(g=33),b||(b=!0,d=e-(f.now()-c),0>d&&(d=0),a||9>d?i():k(i,d))}},C=function(a){var b,c,d=99,e=function(){b=null,a()},g=function(){var a=f.now()-c;d>a?k(g,d-a):(m||e)(e)};return function(){c=f.now(),b||(b=k(g,d))}};!function(){var b,c={lazyClass:"lazyload",loadedClass:"lazyloaded",loadingClass:"lazyloading",preloadClass:"lazypreload",errorClass:"lazyerror",autosizesClass:"lazyautosizes",srcAttr:"data-src",srcsetAttr:"data-srcset",sizesAttr:"data-sizes",minSize:40,customMedia:{},init:!0,expFactor:1.5,hFac:.8,loadMode:2,loadHidden:!0,ricTimeout:0,throttleDelay:125};d=a.lazySizesConfig||a.lazysizesConfig||{};for(b in c)b in d||(d[b]=c[b]);a.lazySizesConfig=d,k(function(){d.init&&F()})}();var D=function(){var g,l,m,o,p,y,D,F,G,H,I,J,K,L,M=/^img$/i,N=/^iframe$/i,O="onscroll"in a&&!/glebot/.test(navigator.userAgent),P=0,Q=0,R=0,S=-1,T=function(a){R--,a&&a.target&&u(a.target,T),(!a||0>R||!a.target)&&(R=0)},U=function(a,c){var d,f=a,g="hidden"==x(b.body,"visibility")||"hidden"!=x(a,"visibility");for(F-=c,I+=c,G-=c,H+=c;g&&(f=f.offsetParent)&&f!=b.body&&f!=e;)g=(x(f,"opacity")||1)>0,g&&"visible"!=x(f,"overflow")&&(d=f.getBoundingClientRect(),g=H>d.left&&G<d.right&&I>d.top-1&&F<d.bottom+1);return g},V=function(){var a,f,h,j,k,m,n,p,q,r=c.elements;if((o=d.loadMode)&&8>R&&(a=r.length)){f=0,S++,null==K&&("expand"in d||(d.expand=e.clientHeight>500&&e.clientWidth>500?500:370),J=d.expand,K=J*d.expFactor),K>Q&&1>R&&S>2&&o>2&&!b.hidden?(Q=K,S=0):Q=o>1&&S>1&&6>R?J:P;for(;a>f;f++)if(r[f]&&!r[f]._lazyRace)if(O)if((p=r[f][i]("data-expand"))&&(m=1*p)||(m=Q),q!==m&&(y=innerWidth+m*L,D=innerHeight+m,n=-1*m,q=m),h=r[f].getBoundingClientRect(),(I=h.bottom)>=n&&(F=h.top)<=D&&(H=h.right)>=n*L&&(G=h.left)<=y&&(I||H||G||F)&&(d.loadHidden||"hidden"!=x(r[f],"visibility"))&&(l&&3>R&&!p&&(3>o||4>S)||U(r[f],m))){if(ba(r[f]),k=!0,R>9)break}else!k&&l&&!j&&4>R&&4>S&&o>2&&(g[0]||d.preloadAfterLoad)&&(g[0]||!p&&(I||H||G||F||"auto"!=r[f][i](d.sizesAttr)))&&(j=g[0]||r[f]);else ba(r[f]);j&&!k&&ba(j)}},W=B(V),X=function(a){s(a.target,d.loadedClass),t(a.target,d.loadingClass),u(a.target,Z),v(a.target,"lazyloaded")},Y=A(X),Z=function(a){Y({target:a.target})},$=function(a,b){try{a.contentWindow.location.replace(b)}catch(c){a.src=b}},_=function(a){var b,c=a[i](d.srcsetAttr);(b=d.customMedia[a[i]("data-media")||a[i]("media")])&&a.setAttribute("media",b),c&&a.setAttribute("srcset",c)},aa=A(function(a,b,c,e,f){var g,h,j,l,o,p;(o=v(a,"lazybeforeunveil",b)).defaultPrevented||(e&&(c?s(a,d.autosizesClass):a.setAttribute("sizes",e)),h=a[i](d.srcsetAttr),g=a[i](d.srcAttr),f&&(j=a.parentNode,l=j&&n.test(j.nodeName||"")),p=b.firesLoad||"src"in a&&(h||g||l),o={target:a},p&&(u(a,T,!0),clearTimeout(m),m=k(T,2500),s(a,d.loadingClass),u(a,Z,!0)),l&&q.call(j.getElementsByTagName("source"),_),h?a.setAttribute("srcset",h):g&&!l&&(N.test(a.nodeName)?$(a,g):a.src=g),f&&(h||l)&&w(a,{src:g})),a._lazyRace&&delete a._lazyRace,t(a,d.lazyClass),z(function(){(!p||a.complete&&a.naturalWidth>1)&&(p?T(o):R--,X(o))},!0)}),ba=function(a){var b,c=M.test(a.nodeName),e=c&&(a[i](d.sizesAttr)||a[i]("sizes")),f="auto"==e;(!f&&l||!c||!a[i]("src")&&!a.srcset||a.complete||r(a,d.errorClass)||!r(a,d.lazyClass))&&(b=v(a,"lazyunveilread").detail,f&&E.updateElem(a,!0,a.offsetWidth),a._lazyRace=!0,R++,aa(a,b,f,e,c))},ca=function(){if(!l){if(f.now()-p<999)return void k(ca,999);var a=C(function(){d.loadMode=3,W()});l=!0,d.loadMode=3,W(),j("scroll",function(){3==d.loadMode&&(d.loadMode=2),a()},!0)}};return{_:function(){p=f.now(),c.elements=b.getElementsByClassName(d.lazyClass),g=b.getElementsByClassName(d.lazyClass+" "+d.preloadClass),L=d.hFac,j("scroll",W,!0),j("resize",W,!0),a.MutationObserver?new MutationObserver(W).observe(e,{childList:!0,subtree:!0,attributes:!0}):(e[h]("DOMNodeInserted",W,!0),e[h]("DOMAttrModified",W,!0),setInterval(W,999)),j("hashchange",W,!0),["focus","mouseover","click","load","transitionend","animationend","webkitAnimationEnd"].forEach(function(a){b[h](a,W,!0)}),/d$|^c/.test(b.readyState)?ca():(j("load",ca),b[h]("DOMContentLoaded",W),k(ca,2e4)),c.elements.length?(V(),z._lsFlush()):W()},checkElems:W,unveil:ba}}(),E=function(){var a,c=A(function(a,b,c,d){var e,f,g;if(a._lazysizesWidth=d,d+="px",a.setAttribute("sizes",d),n.test(b.nodeName||""))for(e=b.getElementsByTagName("source"),f=0,g=e.length;g>f;f++)e[f].setAttribute("sizes",d);c.detail.dataAttr||w(a,c.detail)}),e=function(a,b,d){var e,f=a.parentNode;f&&(d=y(a,f,d),e=v(a,"lazybeforesizes",{width:d,dataAttr:!!b}),e.defaultPrevented||(d=e.detail.width,d&&d!==a._lazysizesWidth&&c(a,f,e,d)))},f=function(){var b,c=a.length;if(c)for(b=0;c>b;b++)e(a[b])},g=C(f);return{_:function(){a=b.getElementsByClassName(d.autosizesClass),j("resize",g)},checkElems:g,updateElem:e}}(),F=function(){F.i||(F.i=!0,E._(),D._())};return c={cfg:d,autoSizer:E,loader:D,init:F,uP:w,aC:s,rC:t,hC:r,fire:v,gW:y,rAF:z}}});
</script>
 <script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('/service-worker.js').then(registration => {
        console.log('service worker registration was successful')
      }, err => {
        console.log('service worker registration failed')
      });
    });
  }
</script>
  
    <script>
  window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
  ga('create', 'UA-66348622-2', 'auto');
  ga('send', 'pageview');
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
  
</body>

</html>